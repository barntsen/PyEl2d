//  Translated by epsc  version today  
#include <stddef.h>
typedef struct { float r; float i;} complex; 
typedef struct nctempfloat1 { int d[1]; float *a;} nctempfloat1; 
typedef struct nctempint1 { int d[1]; int *a;} nctempint1; 
typedef struct nctempchar1 { int d[1]; char *a;} nctempchar1; 
typedef struct nctempcomplex1 { int d[1]; complex *a;} nctempcomplex1; 
typedef struct nctempfloat2 { int d[2]; float *a;} nctempfloat2; 
typedef struct nctempint2 { int d[2]; int *a;} nctempint2; 
typedef struct nctempchar2 { int d[2]; char *a;} nctempchar2; 
typedef struct nctempcomplex2 { int d[2]; complex *a;} nctempcomplex2; 
typedef struct nctempfloat3 { int d[3]; float *a;} nctempfloat3; 
typedef struct nctempint3 { int d[3]; int *a;} nctempint3; 
typedef struct nctempchar3 { int d[3]; char *a;} nctempchar3; 
typedef struct nctempcomplex3 { int d[3]; complex *a;} nctempcomplex3; 
typedef struct nctempfloat4 { int d[4]; float *a;} nctempfloat4; 
typedef struct nctempint4 { int d[4]; int *a;} nctempint4; 
typedef struct nctempchar4 { int d[4]; char *a;} nctempchar4; 
typedef struct nctempcomplex4 { int d[4]; complex *a;} nctempcomplex4; 
#include <stdlib.h>
#include <string.h>
void *RunMalloc(int n); 
int RunFree(void *n); 
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
struct MainArg {nctempchar1 *arg;
};
typedef struct nctempMainArg1 {int d[1]; struct MainArg *a; } nctempMainArg1;
struct nctempMainArg2 {int d[2]; struct MainArg *a; } ;
struct nctempMainArg3 {int d[3]; struct MainArg *a; } ;
struct nctempMainArg4 {int d[4]; struct MainArg *a; } ;
int LibeErrno;
nctempchar1 *LibeErrstr;
int LibeErrinit ();
int LibeGeterrno ();
int LibeClearerr ();
nctempchar1 * LibeGeterrstr ();
nctempchar1 * LibeGetenv (nctempchar1 *name);
;
;
;
;
;
float LibeMach (int flag);
float LibeFabs (float x);
float LibeFscale2 (float x,int n);
float LibeGetfman2 (float x);
int LibeGetfexp2 (float x);
float LibeFscale (float x,int n);
int LibeGetfman (float f,int maxdig);
float LibeGetffman (float f);
int LibeGetmaxdig (float f);
int LibeGetfexp (float f);
float LibeClock ();
;
;
;
;
;
;
;
float LibeSincosmax;
float LibeSincoslim;
float LibeLnmax;
float LibeLnmin;
int LibeMod (int n,int r);
float LibeSqrt (float x);
float LibeLn (float x);
float LibeExp (float x);
float LibeSincos (float x,float y,float sign);
float LibeSin (float x);
float LibeCos (float x);
float LibeTan (float x);
float LibeArcsin (float x);
float LibeArccos (float x);
float LibeAtan (float f);
float LibeArctan (float x);
float LibePow (float base,float exponent);
int LibeMathinit ();
int LibeStrlen (nctempchar1 *s);
int LibeStrcmp (nctempchar1 *s,nctempchar1 *t);
int LibeStrev (nctempchar1 *s);
int LibeStrcpy (nctempchar1 *s,nctempchar1 *t);
int LibeStrcat (nctempchar1 *s,nctempchar1 *t);
nctempchar1 * LibeStradd (nctempchar1 *t,nctempchar1 *s);
nctempchar1 * LibeStrsave (nctempchar1 *s);
int LibeIsalhpa (int c);
int LibeIsdigit (int c);
int LibeIsalnum (int c);
int LibeAtoi (nctempchar1 *s);
int LibeItoa (int n,nctempchar1 *s);
int LibeItoh (int n,nctempchar1 *s);
float LibeAtof (nctempchar1 *s);
int LibeFtoaf (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoae (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoa (float f,nctempchar1 *fmt,nctempchar1 *s);
struct LibeFdescr {int cnt;
int ptr;
int bufsize;
nctempchar1 *base;
int readflg;
int writflg;
int unbflg;
int errflg;
int eoflg;
int fd;
};
typedef struct nctempLibeFdescr1 {int d[1]; struct LibeFdescr *a; } nctempLibeFdescr1;
struct nctempLibeFdescr2 {int d[2]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr3 {int d[3]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr4 {int d[4]; struct LibeFdescr *a; } ;
;
struct nctempLibeFdescr1 *LibeFarr;
;
nctempchar1 *LibeTmpstr;
int LibeIoinit ();
int LibeFlushbuff (int fp);
int LibeFillbuff (int fp);
int LibeFlush (int fp);
int LibeOpen (nctempchar1 *name,nctempchar1 *mode);
int LibeClose (int fp);
int LibeGetc (int fp);
int LibeUngetc (int fp);
int LibeGetw (int fp,nctempchar1 *text);
int LibePutc (int fp,int c);
int LibePuts (int fp,nctempchar1 *s);
int LibePuti (int fp,int ival);
int LibePutf (int fp,float fval,nctempchar1 *form);
int LibePs (nctempchar1 *s);
int LibePi (int n);
int LibePf (float r);
int LibeRead (int fp,int n,nctempchar1 *buffer);
int LibeWrite (int fp,int n,nctempchar1 *buffer);
int LibeSeek (int fp,int pos,int flag);
int LibeIodelete ();
int NBLOCKS;
int NTHREADS;
int LibeSetnb (int nb);
int LibeSetnt (int nt);
int LibeGetnb ();
int LibeGetnt ();
int LibeArrayex (int line,nctempchar1 *name,int ival,int index,int bound);
int LibeSystem (nctempchar1 *cmd);
int LibeInit ();
int LibeExit ();
struct model {int Nx;
int Ny;
int Nb;
float W0;
nctempfloat2 *Qlx;
nctempfloat2 *Qly;
nctempfloat2 *Qmx;
nctempfloat2 *Qmy;
nctempfloat2 *Qpx;
nctempfloat2 *Qpy;
nctempfloat2 *Lambda;
nctempfloat2 *Mu;
nctempfloat2 *Muxy;
nctempfloat2 *Dmuxyx;
nctempfloat2 *Dmuxyy;
nctempfloat2 *Dlambdax;
nctempfloat2 *Dlambday;
nctempfloat2 *Dmux;
nctempfloat2 *Dmuy;
nctempfloat2 *Drhopx;
nctempfloat2 *Drhopy;
nctempfloat2 *Rho;
nctempfloat2 *Rhox;
nctempfloat2 *Rhoy;
nctempfloat2 *Alpha1x;
nctempfloat2 *Alpha1y;
nctempfloat2 *Alpha2x;
nctempfloat2 *Alpha2y;
nctempfloat2 *Beta1x;
nctempfloat2 *Beta2x;
nctempfloat2 *Beta1y;
nctempfloat2 *Beta2y;
nctempfloat2 *Eta1x;
nctempfloat2 *Eta1y;
nctempfloat2 *Eta2x;
nctempfloat2 *Eta2y;
nctempfloat1 *dx;
nctempfloat1 *dy;
nctempfloat1 *dx1;
nctempfloat1 *dy1;
nctempfloat1 *dx2;
nctempfloat1 *dy2;
float Dx;
float Dt;
int Freesurface;
};
typedef struct nctempmodel1 {int d[1]; struct model *a; } nctempmodel1;
struct nctempmodel2 {int d[2]; struct model *a; } ;
struct nctempmodel3 {int d[3]; struct model *a; } ;
struct nctempmodel4 {int d[4]; struct model *a; } ;
int Modeld (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp5=d->d[0];n =nctemp5;
i =0;
int nctemp13 = (i < n);
while(nctemp13){
{
int nctemp20=i;
d->a[nctemp20] =1.0;
}
int nctemp31 = i + 1;
i =nctemp31;
int nctemp32 = (i < n);
nctemp13=nctemp32;
}
i =0;
int nctemp40 = (i < nb);
while(nctemp40){
{
int nctemp47=i;
int nctemp53=i;
float nctemp68=(float)(i);
float nctemp72 = nctemp68 * dx;
float nctemp77=(float)(nb);
float nctemp81 = nctemp77 * dx;
float nctemp82 = nctemp72 / nctemp81;
float nctemp87=(float)(i);
float nctemp91 = nctemp87 * dx;
float nctemp92 = nctemp82 * nctemp91;
float nctemp97=(float)(nb);
float nctemp101 = nctemp97 * dx;
float nctemp102 = nctemp92 / nctemp101;
float nctemp103 = d->a[nctemp53] * nctemp102;
d->a[nctemp47] =nctemp103;
}
int nctemp112 = i + 1;
i =nctemp112;
int nctemp113 = (i < nb);
nctemp40=nctemp113;
}
int nctemp128 = n - 1;
int nctemp130 = nctemp128 - nb;
i =nctemp130;
int nctemp131 = (i < n);
while(nctemp131){
{
int nctemp138=i;
int nctemp144=i;
int nctemp168 = n - 1;
int nctemp170 = nctemp168 - i;
float nctemp159=(float)(nctemp170);
float nctemp172 = nctemp159 * dx;
float nctemp177=(float)(nb);
float nctemp181 = nctemp177 * dx;
float nctemp182 = nctemp172 / nctemp181;
int nctemp196 = n - 1;
int nctemp198 = nctemp196 - i;
float nctemp187=(float)(nctemp198);
float nctemp200 = nctemp187 * dx;
float nctemp201 = nctemp182 * nctemp200;
float nctemp206=(float)(nb);
float nctemp210 = nctemp206 * dx;
float nctemp211 = nctemp201 / nctemp210;
float nctemp212 = d->a[nctemp144] * nctemp211;
d->a[nctemp138] =nctemp212;
}
int nctemp221 = i + 1;
i =nctemp221;
int nctemp222 = (i < n);
nctemp131=nctemp222;
}
return 1;
}
int Modele (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp231=d->d[0];n =nctemp231;
i =0;
int nctemp239 = (i < n);
while(nctemp239){
{
int nctemp246=i;
d->a[nctemp246] =1.0;
}
int nctemp257 = i + 1;
i =nctemp257;
int nctemp258 = (i < n);
nctemp239=nctemp258;
}
int nctemp273 = n - 1;
int nctemp275 = nctemp273 - nb;
i =nctemp275;
int nctemp276 = (i < n);
while(nctemp276){
{
int nctemp283=i;
int nctemp289=i;
int nctemp313 = n - 1;
int nctemp315 = nctemp313 - i;
float nctemp304=(float)(nctemp315);
float nctemp317 = nctemp304 * dx;
float nctemp322=(float)(nb);
float nctemp326 = nctemp322 * dx;
float nctemp327 = nctemp317 / nctemp326;
int nctemp341 = n - 1;
int nctemp343 = nctemp341 - i;
float nctemp332=(float)(nctemp343);
float nctemp345 = nctemp332 * dx;
float nctemp346 = nctemp327 * nctemp345;
float nctemp351=(float)(nb);
float nctemp355 = nctemp351 * dx;
float nctemp356 = nctemp346 / nctemp355;
float nctemp357 = d->a[nctemp289] * nctemp356;
d->a[nctemp283] =nctemp357;
}
int nctemp366 = i + 1;
i =nctemp366;
int nctemp367 = (i < n);
nctemp276=nctemp367;
}
return 1;
}
nctempfloat2 * Modelcopy (nctempfloat2 *a)
{
int nx;
int ny;
int i;
int j;
nctempfloat2 *b;
int nctemp376=a->d[0];nx =nctemp376;
int nctemp384=a->d[1];ny =nctemp384;
int nctemp394=nx;
nctemp394=nctemp394*ny;
nctempfloat2 *nctemp393;
nctemp393=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp393->d[0]=nx;
nctemp393->d[1]=ny;
nctemp393->a=(float *)RunMalloc(sizeof(float)*nctemp394);
b=nctemp393;
j =0;
int nctemp403 = (j < ny);
while(nctemp403){
{
i =0;
int nctemp411 = (i < nx);
while(nctemp411){
{
int nctemp418=i;
nctemp418=j*b->d[0]+nctemp418;
int nctemp422=i;
nctemp422=j*a->d[0]+nctemp422;
b->a[nctemp418] =a->a[nctemp422];
}
int nctemp433 = i + 1;
i =nctemp433;
int nctemp434 = (i < nx);
nctemp411=nctemp434;
}
}
int nctemp446 = j + 1;
j =nctemp446;
int nctemp447 = (j < ny);
nctemp403=nctemp447;
}
return b;
}
int Modelstaggerx (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp457=a->d[0];nx =nctemp457;
int nctemp465=a->d[1];ny =nctemp465;
j =0;
int nctemp473 = (j < ny);
while(nctemp473){
{
i =0;
int nctemp481 = (i < nx);
while(nctemp481){
{
int nctemp488=i;
nctemp488=j*astagg->d[0]+nctemp488;
int nctemp492=i;
nctemp492=j*a->d[0]+nctemp492;
astagg->a[nctemp488] =a->a[nctemp492];
}
int nctemp503 = i + 1;
i =nctemp503;
int nctemp504 = (i < nx);
nctemp481=nctemp504;
}
}
int nctemp516 = j + 1;
j =nctemp516;
int nctemp517 = (j < ny);
nctemp473=nctemp517;
}
j =0;
int nctemp525 = (j < ny);
while(nctemp525){
{
i =0;
int nctemp541 = nx - 1;
int nctemp533 = (i < nctemp541);
while(nctemp533){
{
int nctemp545=i;
nctemp545=j*astagg->d[0]+nctemp545;
int nctemp556=i;
nctemp556=j*a->d[0]+nctemp556;
int nctemp565 = i + 1;
int nctemp560=nctemp565;
nctemp560=j*a->d[0]+nctemp560;
float nctemp567 = a->a[nctemp556] + a->a[nctemp560];
float nctemp568 = 0.5 * nctemp567;
astagg->a[nctemp545] =nctemp568;
}
int nctemp577 = i + 1;
i =nctemp577;
int nctemp586 = nx - 1;
int nctemp578 = (i < nctemp586);
nctemp533=nctemp578;
}
}
int nctemp595 = j + 1;
j =nctemp595;
int nctemp596 = (j < ny);
nctemp525=nctemp596;
}
return 1;
}
int Modelstaggery (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp605=a->d[0];nx =nctemp605;
int nctemp613=a->d[1];ny =nctemp613;
j =0;
int nctemp621 = (j < ny);
while(nctemp621){
{
i =0;
int nctemp629 = (i < nx);
while(nctemp629){
{
int nctemp636=i;
nctemp636=j*astagg->d[0]+nctemp636;
int nctemp640=i;
nctemp640=j*a->d[0]+nctemp640;
astagg->a[nctemp636] =a->a[nctemp640];
}
int nctemp651 = i + 1;
i =nctemp651;
int nctemp652 = (i < nx);
nctemp629=nctemp652;
}
}
int nctemp664 = j + 1;
j =nctemp664;
int nctemp665 = (j < ny);
nctemp621=nctemp665;
}
j =0;
int nctemp681 = ny - 1;
int nctemp673 = (j < nctemp681);
while(nctemp673){
{
i =0;
int nctemp686 = (i < nx);
while(nctemp686){
{
int nctemp693=i;
nctemp693=j*astagg->d[0]+nctemp693;
int nctemp704=i;
nctemp704=j*a->d[0]+nctemp704;
int nctemp708=i;
int nctemp714 = j + 1;
nctemp708=nctemp714*a->d[0]+nctemp708;
float nctemp715 = a->a[nctemp704] + a->a[nctemp708];
float nctemp716 = 0.5 * nctemp715;
astagg->a[nctemp693] =nctemp716;
}
int nctemp725 = i + 1;
i =nctemp725;
int nctemp726 = (i < nx);
nctemp686=nctemp726;
}
}
int nctemp738 = j + 1;
j =nctemp738;
int nctemp747 = ny - 1;
int nctemp739 = (j < nctemp747);
nctemp673=nctemp739;
}
return 1;
}
int Modelslscoeffs (nctempfloat2 *Qx,nctempfloat2 *Qy,nctempfloat2 *modx,nctempfloat2 *mody,nctempfloat2 *coeff1x,nctempfloat2 *coeff1y,nctempfloat2 *coeff2x,nctempfloat2 *coeff2y,struct model* Model)
{
int Nx;
int Ny;
float tau0;
float tauex;
float tauey;
float tausx;
float tausy;
nctempfloat1 *d1;
nctempfloat1 *d2;
float argx;
float argy;
int i;
int j;
Nx =Model->Nx;
Ny =Model->Ny;
int nctemp763=Nx;
nctempfloat1 *nctemp762;
nctemp762=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp762->d[0]=Nx;
nctemp762->a=(float *)RunMalloc(sizeof(float)*nctemp763);
d1=nctemp762;
int nctemp772=Ny;
nctempfloat1 *nctemp771;
nctemp771=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp771->d[0]=Ny;
nctemp771->a=(float *)RunMalloc(sizeof(float)*nctemp772);
d2=nctemp771;
struct nctempchar1 *nctemp778;
static struct nctempchar1 nctemp779 = {{ 17}, (char*)"model freesurf: \0"};
nctemp778=&nctemp779;
nctempchar1* nctemp776= nctemp778;
int nctemp780=LibePs(nctemp776);
int nctemp782= Model->Freesurface;
int nctemp784=LibePi(nctemp782);
struct nctempchar1 *nctemp788;
static struct nctempchar1 nctemp789 = {{ 3}, (char*)"\n\0"};
nctemp788=&nctemp789;
nctempchar1* nctemp786= nctemp788;
int nctemp790=LibePs(nctemp786);
int nctemp791 = (Model->Freesurface ==1);
if(nctemp791)
{
nctempfloat1* nctemp796= d2;
float nctemp799= Model->Dx;
int nctemp801= Model->Nb;
int nctemp803=Modele(nctemp796,nctemp799,nctemp801);
}
else{
nctempfloat1* nctemp805= d2;
float nctemp808= Model->Dx;
int nctemp810= Model->Nb;
int nctemp812=Modeld(nctemp805,nctemp808,nctemp810);
}
nctempfloat1* nctemp814= d1;
float nctemp817= Model->Dx;
int nctemp819= Model->Nb;
int nctemp821=Modeld(nctemp814,nctemp817,nctemp819);
Model->dx=d1;
Model->dy=d2;
j =0;
int nctemp838 = (j < Ny);
while(nctemp838){
{
i =0;
int nctemp846 = (i < Nx);
while(nctemp846){
{
float nctemp858 = 1.0 / Model->W0;
tau0 =nctemp858;
int nctemp870=i;
nctemp870=j*Qx->d[0]+nctemp870;
float nctemp873 = tau0 / Qx->a[nctemp870];
int nctemp885=i;
nctemp885=j*Qx->d[0]+nctemp885;
int nctemp889=i;
nctemp889=j*Qx->d[0]+nctemp889;
float nctemp892 = Qx->a[nctemp885] * Qx->a[nctemp889];
float nctemp894 = nctemp892 + 1.0;
float nctemp878= nctemp894;
float nctemp895=LibeSqrt(nctemp878);
float nctemp897 = nctemp895 + 1.0;
float nctemp898 = nctemp873 * nctemp897;
tauex =nctemp898;
int nctemp910=i;
nctemp910=j*Qx->d[0]+nctemp910;
float nctemp913 = tau0 / Qx->a[nctemp910];
int nctemp925=i;
nctemp925=j*Qx->d[0]+nctemp925;
int nctemp929=i;
nctemp929=j*Qx->d[0]+nctemp929;
float nctemp932 = Qx->a[nctemp925] * Qx->a[nctemp929];
float nctemp934 = nctemp932 + 1.0;
float nctemp918= nctemp934;
float nctemp935=LibeSqrt(nctemp918);
float nctemp937 = nctemp935 - 1.0;
float nctemp938 = nctemp913 * nctemp937;
tausx =nctemp938;
int nctemp950=i;
nctemp950=j*Qy->d[0]+nctemp950;
float nctemp953 = tau0 / Qy->a[nctemp950];
int nctemp965=i;
nctemp965=j*Qy->d[0]+nctemp965;
int nctemp969=i;
nctemp969=j*Qy->d[0]+nctemp969;
float nctemp972 = Qy->a[nctemp965] * Qy->a[nctemp969];
float nctemp974 = nctemp972 + 1.0;
float nctemp958= nctemp974;
float nctemp975=LibeSqrt(nctemp958);
float nctemp977 = nctemp975 + 1.0;
float nctemp978 = nctemp953 * nctemp977;
tauey =nctemp978;
int nctemp990=i;
nctemp990=j*Qy->d[0]+nctemp990;
float nctemp993 = tau0 / Qy->a[nctemp990];
int nctemp1005=i;
nctemp1005=j*Qy->d[0]+nctemp1005;
int nctemp1009=i;
nctemp1009=j*Qy->d[0]+nctemp1009;
float nctemp1012 = Qy->a[nctemp1005] * Qy->a[nctemp1009];
float nctemp1014 = nctemp1012 + 1.0;
float nctemp998= nctemp1014;
float nctemp1015=LibeSqrt(nctemp998);
float nctemp1017 = nctemp1015 - 1.0;
float nctemp1018 = nctemp993 * nctemp1017;
tausy =nctemp1018;
float nctemp1027 = 1.0 / tauex;
tauex =nctemp1027;
float nctemp1036 = 1.0 / tauey;
tauey =nctemp1036;
float nctemp1045 = 1.0 / tausx;
tausx =nctemp1045;
float nctemp1054 = 1.0 / tausy;
tausy =nctemp1054;
int nctemp1059=i;
argx =Model->dx->a[nctemp1059];
int nctemp1065=j;
argy =Model->dy->a[nctemp1065];
int nctemp1070=i;
nctemp1070=j*coeff1x->d[0]+nctemp1070;
float nctemp1078= -argx;
float nctemp1077= nctemp1078;
float nctemp1079=LibeExp(nctemp1077);
float nctemp1084= -Model->Dt;
float nctemp1086 = nctemp1084 * tausx;
float nctemp1081= nctemp1086;
float nctemp1087=LibeExp(nctemp1081);
float nctemp1088 = nctemp1079 * nctemp1087;
coeff1x->a[nctemp1070] =nctemp1088;
int nctemp1092=i;
nctemp1092=j*coeff1y->d[0]+nctemp1092;
float nctemp1100= -argy;
float nctemp1099= nctemp1100;
float nctemp1101=LibeExp(nctemp1099);
float nctemp1106= -Model->Dt;
float nctemp1108 = nctemp1106 * tausy;
float nctemp1103= nctemp1108;
float nctemp1109=LibeExp(nctemp1103);
float nctemp1110 = nctemp1101 * nctemp1109;
coeff1y->a[nctemp1092] =nctemp1110;
int nctemp1114=i;
nctemp1114=j*coeff2x->d[0]+nctemp1114;
float nctemp1122 = Model->Dt * tauex;
coeff2x->a[nctemp1114] =nctemp1122;
int nctemp1126=i;
nctemp1126=j*coeff2y->d[0]+nctemp1126;
float nctemp1134 = Model->Dt * tauey;
coeff2y->a[nctemp1126] =nctemp1134;
int nctemp1138=i;
nctemp1138=j*modx->d[0]+nctemp1138;
float nctemp1149= -argx;
float nctemp1148= nctemp1149;
float nctemp1150=LibeExp(nctemp1148);
int nctemp1152=i;
nctemp1152=j*modx->d[0]+nctemp1152;
float nctemp1155 = nctemp1150 * modx->a[nctemp1152];
float nctemp1165 = tausx / tauex;
float nctemp1166 = 1.0 - nctemp1165;
float nctemp1167 = nctemp1155 * nctemp1166;
modx->a[nctemp1138] =nctemp1167;
int nctemp1171=i;
nctemp1171=j*mody->d[0]+nctemp1171;
float nctemp1182= -argy;
float nctemp1181= nctemp1182;
float nctemp1183=LibeExp(nctemp1181);
int nctemp1185=i;
nctemp1185=j*mody->d[0]+nctemp1185;
float nctemp1188 = nctemp1183 * mody->a[nctemp1185];
float nctemp1198 = tausy / tauey;
float nctemp1199 = 1.0 - nctemp1198;
float nctemp1200 = nctemp1188 * nctemp1199;
mody->a[nctemp1171] =nctemp1200;
}
int nctemp1209 = i + 1;
i =nctemp1209;
int nctemp1210 = (i < Nx);
nctemp846=nctemp1210;
}
}
int nctemp1222 = j + 1;
j =nctemp1222;
int nctemp1223 = (j < Ny);
nctemp838=nctemp1223;
}
RunFree(d1->a);
RunFree(d1);
RunFree(d2->a);
RunFree(d2);
return 1;
}
struct model* Modelsls (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Freesurface)
{
struct model* Model;
int Nx;
int Ny;
int i;
int j;
nctempfloat2 *wrk;
nctempfloat2 *wrk2;
struct model *nctemp1238=(struct model*)RunMalloc(sizeof(struct model));
Model =nctemp1238;
Model->Freesurface =Freesurface;
Model->Dx =Dx;
Model->Dt =Dt;
int nctemp1256=vp->d[0];Model->Nx =nctemp1256;
int nctemp1264=vp->d[1];Model->Ny =nctemp1264;
Model->Nb =Nb;
Model->W0 =W0;
Nx =Model->Nx;
Ny =Model->Ny;
Model->Qlx=Qlx;
Model->Qly=Qly;
Model->Qmx=Qmx;
Model->Qmy=Qmy;
Model->Qpx=Qpx;
Model->Qpy=Qpy;
int nctemp1326=Nx;
nctemp1326=nctemp1326*Ny;
nctempfloat2 *nctemp1325;
nctemp1325=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1325->d[0]=Nx;
nctemp1325->d[1]=Ny;
nctemp1325->a=(float *)RunMalloc(sizeof(float)*nctemp1326);
Model->Rho=nctemp1325;
int nctemp1337=Nx;
nctemp1337=nctemp1337*Ny;
nctempfloat2 *nctemp1336;
nctemp1336=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1336->d[0]=Nx;
nctemp1336->d[1]=Ny;
nctemp1336->a=(float *)RunMalloc(sizeof(float)*nctemp1337);
Model->Rhox=nctemp1336;
int nctemp1348=Nx;
nctemp1348=nctemp1348*Ny;
nctempfloat2 *nctemp1347;
nctemp1347=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1347->d[0]=Nx;
nctemp1347->d[1]=Ny;
nctemp1347->a=(float *)RunMalloc(sizeof(float)*nctemp1348);
Model->Rhoy=nctemp1347;
int nctemp1359=Nx;
nctemp1359=nctemp1359*Ny;
nctempfloat2 *nctemp1358;
nctemp1358=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1358->d[0]=Nx;
nctemp1358->d[1]=Ny;
nctemp1358->a=(float *)RunMalloc(sizeof(float)*nctemp1359);
Model->Mu=nctemp1358;
int nctemp1370=Nx;
nctemp1370=nctemp1370*Ny;
nctempfloat2 *nctemp1369;
nctemp1369=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1369->d[0]=Nx;
nctemp1369->d[1]=Ny;
nctemp1369->a=(float *)RunMalloc(sizeof(float)*nctemp1370);
Model->Muxy=nctemp1369;
int nctemp1381=Nx;
nctemp1381=nctemp1381*Ny;
nctempfloat2 *nctemp1380;
nctemp1380=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1380->d[0]=Nx;
nctemp1380->d[1]=Ny;
nctemp1380->a=(float *)RunMalloc(sizeof(float)*nctemp1381);
Model->Lambda=nctemp1380;
int nctemp1392=Nx;
nctemp1392=nctemp1392*Ny;
nctempfloat2 *nctemp1391;
nctemp1391=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1391->d[0]=Nx;
nctemp1391->d[1]=Ny;
nctemp1391->a=(float *)RunMalloc(sizeof(float)*nctemp1392);
Model->Dlambdax=nctemp1391;
int nctemp1403=Nx;
nctemp1403=nctemp1403*Ny;
nctempfloat2 *nctemp1402;
nctemp1402=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1402->d[0]=Nx;
nctemp1402->d[1]=Ny;
nctemp1402->a=(float *)RunMalloc(sizeof(float)*nctemp1403);
Model->Dlambday=nctemp1402;
int nctemp1414=Nx;
nctemp1414=nctemp1414*Ny;
nctempfloat2 *nctemp1413;
nctemp1413=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1413->d[0]=Nx;
nctemp1413->d[1]=Ny;
nctemp1413->a=(float *)RunMalloc(sizeof(float)*nctemp1414);
Model->Dmux=nctemp1413;
int nctemp1425=Nx;
nctemp1425=nctemp1425*Ny;
nctempfloat2 *nctemp1424;
nctemp1424=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1424->d[0]=Nx;
nctemp1424->d[1]=Ny;
nctemp1424->a=(float *)RunMalloc(sizeof(float)*nctemp1425);
Model->Dmuy=nctemp1424;
int nctemp1436=Nx;
nctemp1436=nctemp1436*Ny;
nctempfloat2 *nctemp1435;
nctemp1435=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1435->d[0]=Nx;
nctemp1435->d[1]=Ny;
nctemp1435->a=(float *)RunMalloc(sizeof(float)*nctemp1436);
Model->Dmuxyx=nctemp1435;
int nctemp1447=Nx;
nctemp1447=nctemp1447*Ny;
nctempfloat2 *nctemp1446;
nctemp1446=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1446->d[0]=Nx;
nctemp1446->d[1]=Ny;
nctemp1446->a=(float *)RunMalloc(sizeof(float)*nctemp1447);
Model->Dmuxyy=nctemp1446;
int nctemp1458=Nx;
nctemp1458=nctemp1458*Ny;
nctempfloat2 *nctemp1457;
nctemp1457=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1457->d[0]=Nx;
nctemp1457->d[1]=Ny;
nctemp1457->a=(float *)RunMalloc(sizeof(float)*nctemp1458);
Model->Drhopx=nctemp1457;
int nctemp1469=Nx;
nctemp1469=nctemp1469*Ny;
nctempfloat2 *nctemp1468;
nctemp1468=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1468->d[0]=Nx;
nctemp1468->d[1]=Ny;
nctemp1468->a=(float *)RunMalloc(sizeof(float)*nctemp1469);
Model->Drhopy=nctemp1468;
int nctemp1480=Nx;
nctemp1480=nctemp1480*Ny;
nctempfloat2 *nctemp1479;
nctemp1479=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1479->d[0]=Nx;
nctemp1479->d[1]=Ny;
nctemp1479->a=(float *)RunMalloc(sizeof(float)*nctemp1480);
Model->Alpha1x=nctemp1479;
int nctemp1491=Nx;
nctemp1491=nctemp1491*Ny;
nctempfloat2 *nctemp1490;
nctemp1490=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1490->d[0]=Nx;
nctemp1490->d[1]=Ny;
nctemp1490->a=(float *)RunMalloc(sizeof(float)*nctemp1491);
Model->Alpha1y=nctemp1490;
int nctemp1502=Nx;
nctemp1502=nctemp1502*Ny;
nctempfloat2 *nctemp1501;
nctemp1501=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1501->d[0]=Nx;
nctemp1501->d[1]=Ny;
nctemp1501->a=(float *)RunMalloc(sizeof(float)*nctemp1502);
Model->Alpha2x=nctemp1501;
int nctemp1513=Nx;
nctemp1513=nctemp1513*Ny;
nctempfloat2 *nctemp1512;
nctemp1512=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1512->d[0]=Nx;
nctemp1512->d[1]=Ny;
nctemp1512->a=(float *)RunMalloc(sizeof(float)*nctemp1513);
Model->Alpha2y=nctemp1512;
int nctemp1524=Nx;
nctemp1524=nctemp1524*Ny;
nctempfloat2 *nctemp1523;
nctemp1523=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1523->d[0]=Nx;
nctemp1523->d[1]=Ny;
nctemp1523->a=(float *)RunMalloc(sizeof(float)*nctemp1524);
Model->Beta1x=nctemp1523;
int nctemp1535=Nx;
nctemp1535=nctemp1535*Ny;
nctempfloat2 *nctemp1534;
nctemp1534=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1534->d[0]=Nx;
nctemp1534->d[1]=Ny;
nctemp1534->a=(float *)RunMalloc(sizeof(float)*nctemp1535);
Model->Beta1y=nctemp1534;
int nctemp1546=Nx;
nctemp1546=nctemp1546*Ny;
nctempfloat2 *nctemp1545;
nctemp1545=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1545->d[0]=Nx;
nctemp1545->d[1]=Ny;
nctemp1545->a=(float *)RunMalloc(sizeof(float)*nctemp1546);
Model->Beta2x=nctemp1545;
int nctemp1557=Nx;
nctemp1557=nctemp1557*Ny;
nctempfloat2 *nctemp1556;
nctemp1556=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1556->d[0]=Nx;
nctemp1556->d[1]=Ny;
nctemp1556->a=(float *)RunMalloc(sizeof(float)*nctemp1557);
Model->Beta2y=nctemp1556;
int nctemp1568=Nx;
nctemp1568=nctemp1568*Ny;
nctempfloat2 *nctemp1567;
nctemp1567=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1567->d[0]=Nx;
nctemp1567->d[1]=Ny;
nctemp1567->a=(float *)RunMalloc(sizeof(float)*nctemp1568);
Model->Eta1x=nctemp1567;
int nctemp1579=Nx;
nctemp1579=nctemp1579*Ny;
nctempfloat2 *nctemp1578;
nctemp1578=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1578->d[0]=Nx;
nctemp1578->d[1]=Ny;
nctemp1578->a=(float *)RunMalloc(sizeof(float)*nctemp1579);
Model->Eta1y=nctemp1578;
int nctemp1590=Nx;
nctemp1590=nctemp1590*Ny;
nctempfloat2 *nctemp1589;
nctemp1589=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1589->d[0]=Nx;
nctemp1589->d[1]=Ny;
nctemp1589->a=(float *)RunMalloc(sizeof(float)*nctemp1590);
Model->Eta2x=nctemp1589;
int nctemp1601=Nx;
nctemp1601=nctemp1601*Ny;
nctempfloat2 *nctemp1600;
nctemp1600=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1600->d[0]=Nx;
nctemp1600->d[1]=Ny;
nctemp1600->a=(float *)RunMalloc(sizeof(float)*nctemp1601);
Model->Eta2y=nctemp1600;
j =0;
int nctemp1610 = (j < Ny);
while(nctemp1610){
{
i =0;
int nctemp1618 = (i < Nx);
while(nctemp1618){
{
int nctemp1625=i;
nctemp1625=j*Model->Rho->d[0]+nctemp1625;
int nctemp1633=i;
nctemp1633=j*rho->d[0]+nctemp1633;
float nctemp1636 = 1.0 / rho->a[nctemp1633];
Model->Rho->a[nctemp1625] =nctemp1636;
int nctemp1640=i;
nctemp1640=j*Model->Mu->d[0]+nctemp1640;
int nctemp1650=i;
nctemp1650=j*rho->d[0]+nctemp1650;
int nctemp1654=i;
nctemp1654=j*vs->d[0]+nctemp1654;
float nctemp1657 = rho->a[nctemp1650] * vs->a[nctemp1654];
int nctemp1659=i;
nctemp1659=j*vs->d[0]+nctemp1659;
float nctemp1662 = nctemp1657 * vs->a[nctemp1659];
Model->Mu->a[nctemp1640] =nctemp1662;
int nctemp1666=i;
nctemp1666=j*Model->Lambda->d[0]+nctemp1666;
int nctemp1673=i;
nctemp1673=j*rho->d[0]+nctemp1673;
int nctemp1683=i;
nctemp1683=j*vp->d[0]+nctemp1683;
int nctemp1687=i;
nctemp1687=j*vp->d[0]+nctemp1687;
float nctemp1690 = vp->a[nctemp1683] * vp->a[nctemp1687];
int nctemp1699=i;
nctemp1699=j*vs->d[0]+nctemp1699;
float nctemp1702 = 2.0 * vs->a[nctemp1699];
int nctemp1704=i;
nctemp1704=j*vs->d[0]+nctemp1704;
float nctemp1707 = nctemp1702 * vs->a[nctemp1704];
float nctemp1708 = nctemp1690 - nctemp1707;
float nctemp1709 = rho->a[nctemp1673] * nctemp1708;
Model->Lambda->a[nctemp1666] =nctemp1709;
int nctemp1713=i;
nctemp1713=j*Model->Alpha1x->d[0]+nctemp1713;
Model->Alpha1x->a[nctemp1713] =0.0;
int nctemp1720=i;
nctemp1720=j*Model->Alpha1y->d[0]+nctemp1720;
Model->Alpha1y->a[nctemp1720] =0.0;
int nctemp1727=i;
nctemp1727=j*Model->Alpha2x->d[0]+nctemp1727;
Model->Alpha2x->a[nctemp1727] =0.0;
int nctemp1734=i;
nctemp1734=j*Model->Alpha2y->d[0]+nctemp1734;
Model->Alpha2y->a[nctemp1734] =0.0;
int nctemp1741=i;
nctemp1741=j*Model->Beta1x->d[0]+nctemp1741;
Model->Beta1x->a[nctemp1741] =0.0;
int nctemp1748=i;
nctemp1748=j*Model->Beta1y->d[0]+nctemp1748;
Model->Beta1y->a[nctemp1748] =0.0;
int nctemp1755=i;
nctemp1755=j*Model->Beta2x->d[0]+nctemp1755;
Model->Beta2x->a[nctemp1755] =0.0;
int nctemp1762=i;
nctemp1762=j*Model->Beta2y->d[0]+nctemp1762;
Model->Beta2y->a[nctemp1762] =0.0;
int nctemp1769=i;
nctemp1769=j*Model->Eta1x->d[0]+nctemp1769;
Model->Eta1x->a[nctemp1769] =0.0;
int nctemp1776=i;
nctemp1776=j*Model->Eta1y->d[0]+nctemp1776;
Model->Eta1y->a[nctemp1776] =0.0;
int nctemp1783=i;
nctemp1783=j*Model->Eta2x->d[0]+nctemp1783;
Model->Eta2x->a[nctemp1783] =0.0;
int nctemp1790=i;
nctemp1790=j*Model->Eta2y->d[0]+nctemp1790;
Model->Eta2y->a[nctemp1790] =0.0;
int nctemp1797=i;
nctemp1797=j*Model->Dlambdax->d[0]+nctemp1797;
int nctemp1801=i;
nctemp1801=j*Model->Lambda->d[0]+nctemp1801;
Model->Dlambdax->a[nctemp1797] =Model->Lambda->a[nctemp1801];
int nctemp1807=i;
nctemp1807=j*Model->Dlambday->d[0]+nctemp1807;
int nctemp1811=i;
nctemp1811=j*Model->Lambda->d[0]+nctemp1811;
Model->Dlambday->a[nctemp1807] =Model->Lambda->a[nctemp1811];
int nctemp1817=i;
nctemp1817=j*Model->Dmux->d[0]+nctemp1817;
int nctemp1821=i;
nctemp1821=j*Model->Mu->d[0]+nctemp1821;
Model->Dmux->a[nctemp1817] =Model->Mu->a[nctemp1821];
int nctemp1827=i;
nctemp1827=j*Model->Dmuy->d[0]+nctemp1827;
int nctemp1831=i;
nctemp1831=j*Model->Mu->d[0]+nctemp1831;
Model->Dmuy->a[nctemp1827] =Model->Mu->a[nctemp1831];
int nctemp1837=i;
nctemp1837=j*Model->Drhopx->d[0]+nctemp1837;
int nctemp1841=i;
nctemp1841=j*Model->Rho->d[0]+nctemp1841;
Model->Drhopx->a[nctemp1837] =Model->Rho->a[nctemp1841];
int nctemp1847=i;
nctemp1847=j*Model->Drhopy->d[0]+nctemp1847;
int nctemp1851=i;
nctemp1851=j*Model->Rho->d[0]+nctemp1851;
Model->Drhopy->a[nctemp1847] =Model->Rho->a[nctemp1851];
}
int nctemp1862 = i + 1;
i =nctemp1862;
int nctemp1863 = (i < Nx);
nctemp1618=nctemp1863;
}
}
int nctemp1875 = j + 1;
j =nctemp1875;
int nctemp1876 = (j < Ny);
nctemp1610=nctemp1876;
}
nctempfloat2* nctemp1881= Model->Qlx;
nctempfloat2* nctemp1884= Model->Qly;
nctempfloat2* nctemp1887= Model->Dlambdax;
nctempfloat2* nctemp1890= Model->Dlambday;
nctempfloat2* nctemp1893= Model->Alpha1x;
nctempfloat2* nctemp1896= Model->Alpha1y;
nctempfloat2* nctemp1899= Model->Alpha2x;
nctempfloat2* nctemp1902= Model->Alpha2y;
struct model* nctemp1905= Model;
int nctemp1907=Modelslscoeffs(nctemp1881,nctemp1884,nctemp1887,nctemp1890,nctemp1893,nctemp1896,nctemp1899,nctemp1902,nctemp1905);
nctempfloat2* nctemp1909= Model->Qmx;
nctempfloat2* nctemp1912= Model->Qmy;
nctempfloat2* nctemp1915= Model->Dmux;
nctempfloat2* nctemp1918= Model->Dmuy;
nctempfloat2* nctemp1921= Model->Beta1x;
nctempfloat2* nctemp1924= Model->Beta1y;
nctempfloat2* nctemp1927= Model->Beta2x;
nctempfloat2* nctemp1930= Model->Beta2y;
struct model* nctemp1933= Model;
int nctemp1935=Modelslscoeffs(nctemp1909,nctemp1912,nctemp1915,nctemp1918,nctemp1921,nctemp1924,nctemp1927,nctemp1930,nctemp1933);
nctempfloat2* nctemp1937= Model->Qpx;
nctempfloat2* nctemp1940= Model->Qpy;
nctempfloat2* nctemp1943= Model->Drhopx;
nctempfloat2* nctemp1946= Model->Drhopy;
nctempfloat2* nctemp1949= Model->Eta1x;
nctempfloat2* nctemp1952= Model->Eta1y;
nctempfloat2* nctemp1955= Model->Eta2x;
nctempfloat2* nctemp1958= Model->Eta2y;
struct model* nctemp1961= Model;
int nctemp1963=Modelslscoeffs(nctemp1937,nctemp1940,nctemp1943,nctemp1946,nctemp1949,nctemp1952,nctemp1955,nctemp1958,nctemp1961);
nctempfloat2* nctemp1965= Model->Rho;
nctempfloat2* nctemp1968= Model->Rhox;
int nctemp1971=Modelstaggerx(nctemp1965,nctemp1968);
nctempfloat2* nctemp1973= Model->Rho;
nctempfloat2* nctemp1976= Model->Rhoy;
int nctemp1979=Modelstaggery(nctemp1973,nctemp1976);
nctempfloat2* nctemp1985= Model->Drhopx;
nctempfloat2* nctemp1988=Modelcopy(nctemp1985);
wrk=nctemp1988;
nctempfloat2* nctemp1990= wrk;
nctempfloat2* nctemp1993= Model->Drhopx;
int nctemp1996=Modelstaggerx(nctemp1990,nctemp1993);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2005= Model->Drhopy;
nctempfloat2* nctemp2008=Modelcopy(nctemp2005);
wrk=nctemp2008;
nctempfloat2* nctemp2010= wrk;
nctempfloat2* nctemp2013= Model->Drhopy;
int nctemp2016=Modelstaggery(nctemp2010,nctemp2013);
nctempfloat2* nctemp2018= Model->Mu;
nctempfloat2* nctemp2021= wrk;
int nctemp2024=Modelstaggerx(nctemp2018,nctemp2021);
nctempfloat2* nctemp2026= wrk;
nctempfloat2* nctemp2029= Model->Muxy;
int nctemp2032=Modelstaggery(nctemp2026,nctemp2029);
nctempfloat2* nctemp2034= Model->Dmux;
nctempfloat2* nctemp2037= wrk;
int nctemp2040=Modelstaggerx(nctemp2034,nctemp2037);
nctempfloat2* nctemp2042= wrk;
nctempfloat2* nctemp2045= Model->Dmuxyx;
int nctemp2048=Modelstaggery(nctemp2042,nctemp2045);
nctempfloat2* nctemp2050= Model->Dmuy;
nctempfloat2* nctemp2053= wrk;
int nctemp2056=Modelstaggerx(nctemp2050,nctemp2053);
nctempfloat2* nctemp2058= wrk;
nctempfloat2* nctemp2061= Model->Dmuxyy;
int nctemp2064=Modelstaggery(nctemp2058,nctemp2061);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2073= Model->Beta1x;
nctempfloat2* nctemp2076=Modelcopy(nctemp2073);
wrk=nctemp2076;
int nctemp2083=Model->Nx;
nctemp2083=nctemp2083*Model->Ny;
nctempfloat2 *nctemp2082;
nctemp2082=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2082->d[0]=Model->Nx;
nctemp2082->d[1]=Model->Ny;
nctemp2082->a=(float *)RunMalloc(sizeof(float)*nctemp2083);
wrk2=nctemp2082;
nctempfloat2* nctemp2089= wrk;
nctempfloat2* nctemp2092= wrk2;
int nctemp2095=Modelstaggery(nctemp2089,nctemp2092);
nctempfloat2* nctemp2097= wrk2;
nctempfloat2* nctemp2100= Model->Beta1x;
int nctemp2103=Modelstaggerx(nctemp2097,nctemp2100);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2112= Model->Beta2x;
nctempfloat2* nctemp2115=Modelcopy(nctemp2112);
wrk=nctemp2115;
int nctemp2122=Model->Nx;
nctemp2122=nctemp2122*Model->Ny;
nctempfloat2 *nctemp2121;
nctemp2121=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2121->d[0]=Model->Nx;
nctemp2121->d[1]=Model->Ny;
nctemp2121->a=(float *)RunMalloc(sizeof(float)*nctemp2122);
wrk2=nctemp2121;
nctempfloat2* nctemp2128= wrk;
nctempfloat2* nctemp2131= wrk2;
int nctemp2134=Modelstaggery(nctemp2128,nctemp2131);
nctempfloat2* nctemp2136= wrk2;
nctempfloat2* nctemp2139= Model->Beta2x;
int nctemp2142=Modelstaggerx(nctemp2136,nctemp2139);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2154= Model->Beta1y;
nctempfloat2* nctemp2157=Modelcopy(nctemp2154);
wrk=nctemp2157;
int nctemp2164=Model->Nx;
nctemp2164=nctemp2164*Model->Ny;
nctempfloat2 *nctemp2163;
nctemp2163=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2163->d[0]=Model->Nx;
nctemp2163->d[1]=Model->Ny;
nctemp2163->a=(float *)RunMalloc(sizeof(float)*nctemp2164);
wrk2=nctemp2163;
nctempfloat2* nctemp2170= wrk;
nctempfloat2* nctemp2173= wrk2;
int nctemp2176=Modelstaggery(nctemp2170,nctemp2173);
nctempfloat2* nctemp2178= wrk2;
nctempfloat2* nctemp2181= Model->Beta1y;
int nctemp2184=Modelstaggerx(nctemp2178,nctemp2181);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2193= Model->Beta2y;
nctempfloat2* nctemp2196=Modelcopy(nctemp2193);
wrk=nctemp2196;
int nctemp2203=Model->Nx;
nctemp2203=nctemp2203*Model->Ny;
nctempfloat2 *nctemp2202;
nctemp2202=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2202->d[0]=Model->Nx;
nctemp2202->d[1]=Model->Ny;
nctemp2202->a=(float *)RunMalloc(sizeof(float)*nctemp2203);
wrk2=nctemp2202;
nctempfloat2* nctemp2209= wrk;
nctempfloat2* nctemp2212= wrk2;
int nctemp2215=Modelstaggery(nctemp2209,nctemp2212);
nctempfloat2* nctemp2217= wrk2;
nctempfloat2* nctemp2220= Model->Beta2y;
int nctemp2223=Modelstaggerx(nctemp2217,nctemp2220);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2235= Model->Eta1x;
nctempfloat2* nctemp2238=Modelcopy(nctemp2235);
wrk=nctemp2238;
nctempfloat2* nctemp2240= wrk;
nctempfloat2* nctemp2243= Model->Eta1x;
int nctemp2246=Modelstaggerx(nctemp2240,nctemp2243);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2255= Model->Eta2x;
nctempfloat2* nctemp2258=Modelcopy(nctemp2255);
wrk=nctemp2258;
nctempfloat2* nctemp2260= wrk;
nctempfloat2* nctemp2263= Model->Eta2x;
int nctemp2266=Modelstaggerx(nctemp2260,nctemp2263);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2275= Model->Eta1y;
nctempfloat2* nctemp2278=Modelcopy(nctemp2275);
wrk=nctemp2278;
nctempfloat2* nctemp2280= wrk;
nctempfloat2* nctemp2283= Model->Eta1y;
int nctemp2286=Modelstaggery(nctemp2280,nctemp2283);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2295= Model->Eta2y;
nctempfloat2* nctemp2298=Modelcopy(nctemp2295);
wrk=nctemp2298;
nctempfloat2* nctemp2300= wrk;
nctempfloat2* nctemp2303= Model->Eta2y;
int nctemp2306=Modelstaggery(nctemp2300,nctemp2303);
RunFree(wrk->a);
RunFree(wrk);
return Model;
}
struct model* ModelNew (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Rheol,int Freesurface)
{
struct model* m;
int nctemp2311 = (Rheol ==2);
if(nctemp2311)
{
nctempfloat2* nctemp2319= vp;
nctempfloat2* nctemp2322= vs;
nctempfloat2* nctemp2325= rho;
nctempfloat2* nctemp2328= Qlx;
nctempfloat2* nctemp2331= Qly;
nctempfloat2* nctemp2334= Qmx;
nctempfloat2* nctemp2337= Qmy;
nctempfloat2* nctemp2340= Qpx;
nctempfloat2* nctemp2343= Qpy;
float nctemp2346= Dx;
float nctemp2348= Dt;
float nctemp2350= W0;
int nctemp2352= Nb;
int nctemp2354= Freesurface;
struct model* nctemp2356=Modelsls(nctemp2319,nctemp2322,nctemp2325,nctemp2328,nctemp2331,nctemp2334,nctemp2337,nctemp2340,nctemp2343,nctemp2346,nctemp2348,nctemp2350,nctemp2352,nctemp2354);
m =nctemp2356;
}
else{
int nctemp2358= 4;
struct nctempchar1 *nctemp2362;
static struct nctempchar1 nctemp2363 = {{ 18}, (char*)"Unknown Q-model\n\0"};
nctemp2362=&nctemp2363;
nctempchar1* nctemp2360= nctemp2362;
int nctemp2364=LibePuts(nctemp2358,nctemp2360);
int nctemp2366= 4;
int nctemp2368=LibeFlush(nctemp2366);
int nctemp2370=LibeExit();
}
return m;
}
float ModelStability (struct model* Model)
{
int nx;
int ny;
int i;
int j;
float vp;
float stab;
nx =Model->Nx;
ny =Model->Ny;
j =0;
int nctemp2384 = (j < ny);
while(nctemp2384){
{
i =0;
int nctemp2392 = (i < nx);
while(nctemp2392){
{
int nctemp2407=i;
nctemp2407=j*Model->Lambda->d[0]+nctemp2407;
int nctemp2415=i;
nctemp2415=j*Model->Mu->d[0]+nctemp2415;
float nctemp2418 = 2.0 * Model->Mu->a[nctemp2415];
float nctemp2419 = Model->Lambda->a[nctemp2407] + nctemp2418;
int nctemp2421=i;
nctemp2421=j*Model->Rho->d[0]+nctemp2421;
float nctemp2424 = nctemp2419 / Model->Rho->a[nctemp2421];
float nctemp2400= nctemp2424;
float nctemp2425=LibeSqrt(nctemp2400);
vp =nctemp2425;
float nctemp2437 = vp * Model->Dt;
float nctemp2439 = nctemp2437 / Model->Dx;
stab =nctemp2439;
float nctemp2448= 2.0;
float nctemp2450=LibeSqrt(nctemp2448);
float nctemp2451 = 1.0 / nctemp2450;
int nctemp2440 = (stab > nctemp2451);
if(nctemp2440)
{
int nctemp2453= 4;
struct nctempchar1 *nctemp2457;
static struct nctempchar1 nctemp2458 = {{ 28}, (char*)"Stability index too large! \0"};
nctemp2457=&nctemp2458;
nctempchar1* nctemp2455= nctemp2457;
int nctemp2459=LibePuts(nctemp2453,nctemp2455);
int nctemp2461= 4;
float nctemp2463= stab;
struct nctempchar1 *nctemp2467;
static struct nctempchar1 nctemp2468 = {{ 2}, (char*)"g\0"};
nctemp2467=&nctemp2468;
nctempchar1* nctemp2465= nctemp2467;
int nctemp2469=LibePutf(nctemp2461,nctemp2463,nctemp2465);
int nctemp2471= 4;
struct nctempchar1 *nctemp2475;
static struct nctempchar1 nctemp2476 = {{ 3}, (char*)"\n\0"};
nctemp2475=&nctemp2476;
nctempchar1* nctemp2473= nctemp2475;
int nctemp2477=LibePuts(nctemp2471,nctemp2473);
int nctemp2479= 4;
struct nctempchar1 *nctemp2483;
static struct nctempchar1 nctemp2484 = {{ 7}, (char*)"vp: \n\0"};
nctemp2483=&nctemp2484;
nctempchar1* nctemp2481= nctemp2483;
int nctemp2485=LibePuts(nctemp2479,nctemp2481);
int nctemp2487= 4;
float nctemp2489= vp;
struct nctempchar1 *nctemp2493;
static struct nctempchar1 nctemp2494 = {{ 2}, (char*)"g\0"};
nctemp2493=&nctemp2494;
nctempchar1* nctemp2491= nctemp2493;
int nctemp2495=LibePutf(nctemp2487,nctemp2489,nctemp2491);
int nctemp2497= 4;
struct nctempchar1 *nctemp2501;
static struct nctempchar1 nctemp2502 = {{ 3}, (char*)"\n\0"};
nctemp2501=&nctemp2502;
nctempchar1* nctemp2499= nctemp2501;
int nctemp2503=LibePuts(nctemp2497,nctemp2499);
int nctemp2505= 4;
struct nctempchar1 *nctemp2509;
static struct nctempchar1 nctemp2510 = {{ 7}, (char*)"dt: \n\0"};
nctemp2509=&nctemp2510;
nctempchar1* nctemp2507= nctemp2509;
int nctemp2511=LibePuts(nctemp2505,nctemp2507);
int nctemp2513= 4;
float nctemp2515= Model->Dt;
struct nctempchar1 *nctemp2519;
static struct nctempchar1 nctemp2520 = {{ 2}, (char*)"g\0"};
nctemp2519=&nctemp2520;
nctempchar1* nctemp2517= nctemp2519;
int nctemp2521=LibePutf(nctemp2513,nctemp2515,nctemp2517);
int nctemp2523= 4;
struct nctempchar1 *nctemp2527;
static struct nctempchar1 nctemp2528 = {{ 3}, (char*)"\n\0"};
nctemp2527=&nctemp2528;
nctempchar1* nctemp2525= nctemp2527;
int nctemp2529=LibePuts(nctemp2523,nctemp2525);
int nctemp2531= 4;
struct nctempchar1 *nctemp2535;
static struct nctempchar1 nctemp2536 = {{ 7}, (char*)"dx: \n\0"};
nctemp2535=&nctemp2536;
nctempchar1* nctemp2533= nctemp2535;
int nctemp2537=LibePuts(nctemp2531,nctemp2533);
int nctemp2539= 4;
float nctemp2541= Model->Dx;
struct nctempchar1 *nctemp2545;
static struct nctempchar1 nctemp2546 = {{ 2}, (char*)"g\0"};
nctemp2545=&nctemp2546;
nctempchar1* nctemp2543= nctemp2545;
int nctemp2547=LibePutf(nctemp2539,nctemp2541,nctemp2543);
int nctemp2549= 4;
struct nctempchar1 *nctemp2553;
static struct nctempchar1 nctemp2554 = {{ 3}, (char*)"\n\0"};
nctemp2553=&nctemp2554;
nctempchar1* nctemp2551= nctemp2553;
int nctemp2555=LibePuts(nctemp2549,nctemp2551);
int nctemp2557= 4;
int nctemp2559=LibeFlush(nctemp2557);
}
}
int nctemp2568 = i + 1;
i =nctemp2568;
int nctemp2569 = (i < nx);
nctemp2392=nctemp2569;
}
}
int nctemp2581 = j + 1;
j =nctemp2581;
int nctemp2582 = (j < ny);
nctemp2384=nctemp2582;
}
return stab;
}
