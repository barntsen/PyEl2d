//  Translated by epsc  version today  
#include <stddef.h>
typedef struct { float r; float i;} complex; 
typedef struct nctempfloat1 { int d[1]; float *a;} nctempfloat1; 
typedef struct nctempint1 { int d[1]; int *a;} nctempint1; 
typedef struct nctempchar1 { int d[1]; char *a;} nctempchar1; 
typedef struct nctempcomplex1 { int d[1]; complex *a;} nctempcomplex1; 
typedef struct nctempfloat2 { int d[2]; float *a;} nctempfloat2; 
typedef struct nctempint2 { int d[2]; int *a;} nctempint2; 
typedef struct nctempchar2 { int d[2]; char *a;} nctempchar2; 
typedef struct nctempcomplex2 { int d[2]; complex *a;} nctempcomplex2; 
typedef struct nctempfloat3 { int d[3]; float *a;} nctempfloat3; 
typedef struct nctempint3 { int d[3]; int *a;} nctempint3; 
typedef struct nctempchar3 { int d[3]; char *a;} nctempchar3; 
typedef struct nctempcomplex3 { int d[3]; complex *a;} nctempcomplex3; 
typedef struct nctempfloat4 { int d[4]; float *a;} nctempfloat4; 
typedef struct nctempint4 { int d[4]; int *a;} nctempint4; 
typedef struct nctempchar4 { int d[4]; char *a;} nctempchar4; 
typedef struct nctempcomplex4 { int d[4]; complex *a;} nctempcomplex4; 
#include <stdlib.h>
#include <string.h>
void *RunMalloc(int n); 
int RunFree(void *n); 
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
struct MainArg {nctempchar1 *arg;
};
typedef struct nctempMainArg1 {int d[1]; struct MainArg *a; } nctempMainArg1;
struct nctempMainArg2 {int d[2]; struct MainArg *a; } ;
struct nctempMainArg3 {int d[3]; struct MainArg *a; } ;
struct nctempMainArg4 {int d[4]; struct MainArg *a; } ;
int LibeErrno;
nctempchar1 *LibeErrstr;
int LibeErrinit ();
int LibeGeterrno ();
int LibeClearerr ();
nctempchar1 * LibeGeterrstr ();
nctempchar1 * LibeGetenv (nctempchar1 *name);
;
;
;
;
;
float LibeMach (int flag);
float LibeFabs (float x);
float LibeFscale2 (float x,int n);
float LibeGetfman2 (float x);
int LibeGetfexp2 (float x);
float LibeFscale (float x,int n);
int LibeGetfman (float f,int maxdig);
float LibeGetffman (float f);
int LibeGetmaxdig (float f);
int LibeGetfexp (float f);
float LibeClock ();
;
;
;
;
;
;
;
float LibeSincosmax;
float LibeSincoslim;
float LibeLnmax;
float LibeLnmin;
int LibeMod (int n,int r);
float LibeSqrt (float x);
float LibeLn (float x);
float LibeExp (float x);
float LibeSincos (float x,float y,float sign);
float LibeSin (float x);
float LibeCos (float x);
float LibeTan (float x);
float LibeArcsin (float x);
float LibeArccos (float x);
float LibeAtan (float f);
float LibeArctan (float x);
float LibePow (float base,float exponent);
int LibeMathinit ();
int LibeStrlen (nctempchar1 *s);
int LibeStrcmp (nctempchar1 *s,nctempchar1 *t);
int LibeStrev (nctempchar1 *s);
int LibeStrcpy (nctempchar1 *s,nctempchar1 *t);
int LibeStrcat (nctempchar1 *s,nctempchar1 *t);
nctempchar1 * LibeStradd (nctempchar1 *t,nctempchar1 *s);
nctempchar1 * LibeStrsave (nctempchar1 *s);
int LibeIsalhpa (int c);
int LibeIsdigit (int c);
int LibeIsalnum (int c);
int LibeAtoi (nctempchar1 *s);
int LibeItoa (int n,nctempchar1 *s);
int LibeItoh (int n,nctempchar1 *s);
float LibeAtof (nctempchar1 *s);
int LibeFtoaf (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoae (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoa (float f,nctempchar1 *fmt,nctempchar1 *s);
struct LibeFdescr {int cnt;
int ptr;
int bufsize;
nctempchar1 *base;
int readflg;
int writflg;
int unbflg;
int errflg;
int eoflg;
int fd;
};
typedef struct nctempLibeFdescr1 {int d[1]; struct LibeFdescr *a; } nctempLibeFdescr1;
struct nctempLibeFdescr2 {int d[2]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr3 {int d[3]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr4 {int d[4]; struct LibeFdescr *a; } ;
;
struct nctempLibeFdescr1 *LibeFarr;
;
nctempchar1 *LibeTmpstr;
int LibeIoinit ();
int LibeFlushbuff (int fp);
int LibeFillbuff (int fp);
int LibeFlush (int fp);
int LibeOpen (nctempchar1 *name,nctempchar1 *mode);
int LibeClose (int fp);
int LibeGetc (int fp);
int LibeUngetc (int fp);
int LibeGetw (int fp,nctempchar1 *text);
int LibePutc (int fp,int c);
int LibePuts (int fp,nctempchar1 *s);
int LibePuti (int fp,int ival);
int LibePutf (int fp,float fval,nctempchar1 *form);
int LibePs (nctempchar1 *s);
int LibePi (int n);
int LibePf (float r);
int LibeRead (int fp,int n,nctempchar1 *buffer);
int LibeWrite (int fp,int n,nctempchar1 *buffer);
int LibeSeek (int fp,int pos,int flag);
int LibeIodelete ();
int NBLOCKS;
int NTHREADS;
int LibeSetnb (int nb);
int LibeSetnt (int nt);
int LibeGetnb ();
int LibeGetnt ();
int LibeArrayex (int line,nctempchar1 *name,int ival,int index,int bound);
int LibeSystem (nctempchar1 *cmd);
int LibeInit ();
int LibeExit ();
struct model {int Nx;
int Ny;
int Nb;
float W0;
nctempfloat2 *Qlx;
nctempfloat2 *Qly;
nctempfloat2 *Qmx;
nctempfloat2 *Qmy;
nctempfloat2 *Qpx;
nctempfloat2 *Qpy;
nctempfloat2 *Lambda;
nctempfloat2 *Mu;
nctempfloat2 *Muxy;
nctempfloat2 *Dmuxyx;
nctempfloat2 *Dmuxyy;
nctempfloat2 *Dlambdax;
nctempfloat2 *Dlambday;
nctempfloat2 *Dmux;
nctempfloat2 *Dmuy;
nctempfloat2 *Drhopx;
nctempfloat2 *Drhopy;
nctempfloat2 *Rho;
nctempfloat2 *Rhox;
nctempfloat2 *Rhoy;
nctempfloat2 *Alpha1x;
nctempfloat2 *Alpha1y;
nctempfloat2 *Alpha2x;
nctempfloat2 *Alpha2y;
nctempfloat2 *Beta1x;
nctempfloat2 *Beta2x;
nctempfloat2 *Beta1y;
nctempfloat2 *Beta2y;
nctempfloat2 *Eta1x;
nctempfloat2 *Eta1y;
nctempfloat2 *Eta2x;
nctempfloat2 *Eta2y;
nctempfloat1 *dx;
nctempfloat1 *dy;
nctempfloat1 *dx1;
nctempfloat1 *dy1;
nctempfloat1 *dx2;
nctempfloat1 *dy2;
float Dx;
float Dt;
int Freesurface;
};
typedef struct nctempmodel1 {int d[1]; struct model *a; } nctempmodel1;
struct nctempmodel2 {int d[2]; struct model *a; } ;
struct nctempmodel3 {int d[3]; struct model *a; } ;
struct nctempmodel4 {int d[4]; struct model *a; } ;
int Modeld (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp5=d->d[0];n =nctemp5;
i =0;
int nctemp13 = (i < n);
while(nctemp13){
{
int nctemp20=i;
d->a[nctemp20] =1.0;
}
int nctemp31 = i + 1;
i =nctemp31;
int nctemp32 = (i < n);
nctemp13=nctemp32;
}
i =0;
int nctemp40 = (i < nb);
while(nctemp40){
{
int nctemp47=i;
int nctemp53=i;
float nctemp68=(float)(i);
float nctemp72 = nctemp68 * dx;
float nctemp77=(float)(nb);
float nctemp81 = nctemp77 * dx;
float nctemp82 = nctemp72 / nctemp81;
float nctemp87=(float)(i);
float nctemp91 = nctemp87 * dx;
float nctemp92 = nctemp82 * nctemp91;
float nctemp97=(float)(nb);
float nctemp101 = nctemp97 * dx;
float nctemp102 = nctemp92 / nctemp101;
float nctemp103 = d->a[nctemp53] * nctemp102;
d->a[nctemp47] =nctemp103;
}
int nctemp112 = i + 1;
i =nctemp112;
int nctemp113 = (i < nb);
nctemp40=nctemp113;
}
int nctemp128 = n - 1;
int nctemp130 = nctemp128 - nb;
i =nctemp130;
int nctemp131 = (i < n);
while(nctemp131){
{
int nctemp138=i;
int nctemp144=i;
int nctemp168 = n - 1;
int nctemp170 = nctemp168 - i;
float nctemp159=(float)(nctemp170);
float nctemp172 = nctemp159 * dx;
float nctemp177=(float)(nb);
float nctemp181 = nctemp177 * dx;
float nctemp182 = nctemp172 / nctemp181;
int nctemp196 = n - 1;
int nctemp198 = nctemp196 - i;
float nctemp187=(float)(nctemp198);
float nctemp200 = nctemp187 * dx;
float nctemp201 = nctemp182 * nctemp200;
float nctemp206=(float)(nb);
float nctemp210 = nctemp206 * dx;
float nctemp211 = nctemp201 / nctemp210;
float nctemp212 = d->a[nctemp144] * nctemp211;
d->a[nctemp138] =nctemp212;
}
int nctemp221 = i + 1;
i =nctemp221;
int nctemp222 = (i < n);
nctemp131=nctemp222;
}
return 1;
}
int Modele (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp231=d->d[0];n =nctemp231;
i =0;
int nctemp239 = (i < n);
while(nctemp239){
{
int nctemp246=i;
d->a[nctemp246] =1.0;
}
int nctemp257 = i + 1;
i =nctemp257;
int nctemp258 = (i < n);
nctemp239=nctemp258;
}
int nctemp273 = n - 1;
int nctemp275 = nctemp273 - nb;
i =nctemp275;
int nctemp276 = (i < n);
while(nctemp276){
{
int nctemp283=i;
int nctemp289=i;
int nctemp313 = n - 1;
int nctemp315 = nctemp313 - i;
float nctemp304=(float)(nctemp315);
float nctemp317 = nctemp304 * dx;
float nctemp322=(float)(nb);
float nctemp326 = nctemp322 * dx;
float nctemp327 = nctemp317 / nctemp326;
int nctemp341 = n - 1;
int nctemp343 = nctemp341 - i;
float nctemp332=(float)(nctemp343);
float nctemp345 = nctemp332 * dx;
float nctemp346 = nctemp327 * nctemp345;
float nctemp351=(float)(nb);
float nctemp355 = nctemp351 * dx;
float nctemp356 = nctemp346 / nctemp355;
float nctemp357 = d->a[nctemp289] * nctemp356;
d->a[nctemp283] =nctemp357;
}
int nctemp366 = i + 1;
i =nctemp366;
int nctemp367 = (i < n);
nctemp276=nctemp367;
}
return 1;
}
nctempfloat2 * Modelcopy (nctempfloat2 *a)
{
int nx;
int ny;
int i;
int j;
nctempfloat2 *b;
int nctemp376=a->d[0];nx =nctemp376;
int nctemp384=a->d[1];ny =nctemp384;
int nctemp394=nx;
nctemp394=nctemp394*ny;
nctempfloat2 *nctemp393;
nctemp393=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp393->d[0]=nx;
nctemp393->d[1]=ny;
nctemp393->a=(float *)RunMalloc(sizeof(float)*nctemp394);
b=nctemp393;
j =0;
int nctemp403 = (j < ny);
while(nctemp403){
{
i =0;
int nctemp411 = (i < nx);
while(nctemp411){
{
int nctemp418=i;
nctemp418=j*b->d[0]+nctemp418;
int nctemp422=i;
nctemp422=j*a->d[0]+nctemp422;
b->a[nctemp418] =a->a[nctemp422];
}
int nctemp433 = i + 1;
i =nctemp433;
int nctemp434 = (i < nx);
nctemp411=nctemp434;
}
}
int nctemp446 = j + 1;
j =nctemp446;
int nctemp447 = (j < ny);
nctemp403=nctemp447;
}
return b;
}
int Modelstaggerx (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp457=a->d[0];nx =nctemp457;
int nctemp465=a->d[1];ny =nctemp465;
j =0;
int nctemp473 = (j < ny);
while(nctemp473){
{
i =0;
int nctemp481 = (i < nx);
while(nctemp481){
{
int nctemp488=i;
nctemp488=j*astagg->d[0]+nctemp488;
int nctemp492=i;
nctemp492=j*a->d[0]+nctemp492;
astagg->a[nctemp488] =a->a[nctemp492];
}
int nctemp503 = i + 1;
i =nctemp503;
int nctemp504 = (i < nx);
nctemp481=nctemp504;
}
}
int nctemp516 = j + 1;
j =nctemp516;
int nctemp517 = (j < ny);
nctemp473=nctemp517;
}
j =0;
int nctemp525 = (j < ny);
while(nctemp525){
{
i =0;
int nctemp541 = nx - 1;
int nctemp533 = (i < nctemp541);
while(nctemp533){
{
int nctemp545=i;
nctemp545=j*astagg->d[0]+nctemp545;
int nctemp556=i;
nctemp556=j*a->d[0]+nctemp556;
int nctemp565 = i + 1;
int nctemp560=nctemp565;
nctemp560=j*a->d[0]+nctemp560;
float nctemp567 = a->a[nctemp556] + a->a[nctemp560];
float nctemp568 = 0.5 * nctemp567;
astagg->a[nctemp545] =nctemp568;
}
int nctemp577 = i + 1;
i =nctemp577;
int nctemp586 = nx - 1;
int nctemp578 = (i < nctemp586);
nctemp533=nctemp578;
}
}
int nctemp595 = j + 1;
j =nctemp595;
int nctemp596 = (j < ny);
nctemp525=nctemp596;
}
return 1;
}
int Modelstaggery (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp605=a->d[0];nx =nctemp605;
int nctemp613=a->d[1];ny =nctemp613;
j =0;
int nctemp621 = (j < ny);
while(nctemp621){
{
i =0;
int nctemp629 = (i < nx);
while(nctemp629){
{
int nctemp636=i;
nctemp636=j*astagg->d[0]+nctemp636;
int nctemp640=i;
nctemp640=j*a->d[0]+nctemp640;
astagg->a[nctemp636] =a->a[nctemp640];
}
int nctemp651 = i + 1;
i =nctemp651;
int nctemp652 = (i < nx);
nctemp629=nctemp652;
}
}
int nctemp664 = j + 1;
j =nctemp664;
int nctemp665 = (j < ny);
nctemp621=nctemp665;
}
j =0;
int nctemp681 = ny - 1;
int nctemp673 = (j < nctemp681);
while(nctemp673){
{
i =0;
int nctemp686 = (i < nx);
while(nctemp686){
{
int nctemp693=i;
nctemp693=j*astagg->d[0]+nctemp693;
int nctemp704=i;
nctemp704=j*a->d[0]+nctemp704;
int nctemp708=i;
int nctemp714 = j + 1;
nctemp708=nctemp714*a->d[0]+nctemp708;
float nctemp715 = a->a[nctemp704] + a->a[nctemp708];
float nctemp716 = 0.5 * nctemp715;
astagg->a[nctemp693] =nctemp716;
}
int nctemp725 = i + 1;
i =nctemp725;
int nctemp726 = (i < nx);
nctemp686=nctemp726;
}
}
int nctemp738 = j + 1;
j =nctemp738;
int nctemp747 = ny - 1;
int nctemp739 = (j < nctemp747);
nctemp673=nctemp739;
}
return 1;
}
int Modelslscoeffs (nctempfloat2 *Qx,nctempfloat2 *Qy,nctempfloat2 *modx,nctempfloat2 *mody,nctempfloat2 *coeff1x,nctempfloat2 *coeff1y,nctempfloat2 *coeff2x,nctempfloat2 *coeff2y,struct model* Model)
{
int Nx;
int Ny;
float tau0;
float tauex;
float tauey;
float tausx;
float tausy;
nctempfloat1 *d1;
nctempfloat1 *d2;
float argx;
float argy;
int i;
int j;
Nx =Model->Nx;
Ny =Model->Ny;
int nctemp763=Nx;
nctempfloat1 *nctemp762;
nctemp762=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp762->d[0]=Nx;
nctemp762->a=(float *)RunMalloc(sizeof(float)*nctemp763);
d1=nctemp762;
int nctemp772=Ny;
nctempfloat1 *nctemp771;
nctemp771=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp771->d[0]=Ny;
nctemp771->a=(float *)RunMalloc(sizeof(float)*nctemp772);
d2=nctemp771;
int nctemp775 = (Model->Freesurface ==1);
if(nctemp775)
{
nctempfloat1* nctemp780= d2;
float nctemp783= Model->Dx;
int nctemp785= Model->Nb;
int nctemp787=Modele(nctemp780,nctemp783,nctemp785);
}
else{
nctempfloat1* nctemp789= d2;
float nctemp792= Model->Dx;
int nctemp794= Model->Nb;
int nctemp796=Modeld(nctemp789,nctemp792,nctemp794);
}
nctempfloat1* nctemp798= d1;
float nctemp801= Model->Dx;
int nctemp803= Model->Nb;
int nctemp805=Modeld(nctemp798,nctemp801,nctemp803);
Model->dx=d1;
Model->dy=d2;
j =0;
int nctemp822 = (j < Ny);
while(nctemp822){
{
i =0;
int nctemp830 = (i < Nx);
while(nctemp830){
{
float nctemp842 = 1.0 / Model->W0;
tau0 =nctemp842;
int nctemp854=i;
nctemp854=j*Qx->d[0]+nctemp854;
float nctemp857 = tau0 / Qx->a[nctemp854];
int nctemp869=i;
nctemp869=j*Qx->d[0]+nctemp869;
int nctemp873=i;
nctemp873=j*Qx->d[0]+nctemp873;
float nctemp876 = Qx->a[nctemp869] * Qx->a[nctemp873];
float nctemp878 = nctemp876 + 1.0;
float nctemp862= nctemp878;
float nctemp879=LibeSqrt(nctemp862);
float nctemp881 = nctemp879 + 1.0;
float nctemp882 = nctemp857 * nctemp881;
tauex =nctemp882;
int nctemp894=i;
nctemp894=j*Qx->d[0]+nctemp894;
float nctemp897 = tau0 / Qx->a[nctemp894];
int nctemp909=i;
nctemp909=j*Qx->d[0]+nctemp909;
int nctemp913=i;
nctemp913=j*Qx->d[0]+nctemp913;
float nctemp916 = Qx->a[nctemp909] * Qx->a[nctemp913];
float nctemp918 = nctemp916 + 1.0;
float nctemp902= nctemp918;
float nctemp919=LibeSqrt(nctemp902);
float nctemp921 = nctemp919 - 1.0;
float nctemp922 = nctemp897 * nctemp921;
tausx =nctemp922;
int nctemp934=i;
nctemp934=j*Qy->d[0]+nctemp934;
float nctemp937 = tau0 / Qy->a[nctemp934];
int nctemp949=i;
nctemp949=j*Qy->d[0]+nctemp949;
int nctemp953=i;
nctemp953=j*Qy->d[0]+nctemp953;
float nctemp956 = Qy->a[nctemp949] * Qy->a[nctemp953];
float nctemp958 = nctemp956 + 1.0;
float nctemp942= nctemp958;
float nctemp959=LibeSqrt(nctemp942);
float nctemp961 = nctemp959 + 1.0;
float nctemp962 = nctemp937 * nctemp961;
tauey =nctemp962;
int nctemp974=i;
nctemp974=j*Qy->d[0]+nctemp974;
float nctemp977 = tau0 / Qy->a[nctemp974];
int nctemp989=i;
nctemp989=j*Qy->d[0]+nctemp989;
int nctemp993=i;
nctemp993=j*Qy->d[0]+nctemp993;
float nctemp996 = Qy->a[nctemp989] * Qy->a[nctemp993];
float nctemp998 = nctemp996 + 1.0;
float nctemp982= nctemp998;
float nctemp999=LibeSqrt(nctemp982);
float nctemp1001 = nctemp999 - 1.0;
float nctemp1002 = nctemp977 * nctemp1001;
tausy =nctemp1002;
float nctemp1011 = 1.0 / tauex;
tauex =nctemp1011;
float nctemp1020 = 1.0 / tauey;
tauey =nctemp1020;
float nctemp1029 = 1.0 / tausx;
tausx =nctemp1029;
float nctemp1038 = 1.0 / tausy;
tausy =nctemp1038;
int nctemp1043=i;
argx =Model->dx->a[nctemp1043];
int nctemp1049=j;
argy =Model->dy->a[nctemp1049];
int nctemp1054=i;
nctemp1054=j*coeff1x->d[0]+nctemp1054;
float nctemp1062= -argx;
float nctemp1061= nctemp1062;
float nctemp1063=LibeExp(nctemp1061);
float nctemp1068= -Model->Dt;
float nctemp1070 = nctemp1068 * tausx;
float nctemp1065= nctemp1070;
float nctemp1071=LibeExp(nctemp1065);
float nctemp1072 = nctemp1063 * nctemp1071;
coeff1x->a[nctemp1054] =nctemp1072;
int nctemp1076=i;
nctemp1076=j*coeff1y->d[0]+nctemp1076;
float nctemp1084= -argy;
float nctemp1083= nctemp1084;
float nctemp1085=LibeExp(nctemp1083);
float nctemp1090= -Model->Dt;
float nctemp1092 = nctemp1090 * tausy;
float nctemp1087= nctemp1092;
float nctemp1093=LibeExp(nctemp1087);
float nctemp1094 = nctemp1085 * nctemp1093;
coeff1y->a[nctemp1076] =nctemp1094;
int nctemp1098=i;
nctemp1098=j*coeff2x->d[0]+nctemp1098;
float nctemp1106 = Model->Dt * tauex;
coeff2x->a[nctemp1098] =nctemp1106;
int nctemp1110=i;
nctemp1110=j*coeff2y->d[0]+nctemp1110;
float nctemp1118 = Model->Dt * tauey;
coeff2y->a[nctemp1110] =nctemp1118;
int nctemp1122=i;
nctemp1122=j*modx->d[0]+nctemp1122;
float nctemp1133= -argx;
float nctemp1132= nctemp1133;
float nctemp1134=LibeExp(nctemp1132);
int nctemp1136=i;
nctemp1136=j*modx->d[0]+nctemp1136;
float nctemp1139 = nctemp1134 * modx->a[nctemp1136];
float nctemp1149 = tausx / tauex;
float nctemp1150 = 1.0 - nctemp1149;
float nctemp1151 = nctemp1139 * nctemp1150;
modx->a[nctemp1122] =nctemp1151;
int nctemp1155=i;
nctemp1155=j*mody->d[0]+nctemp1155;
float nctemp1166= -argy;
float nctemp1165= nctemp1166;
float nctemp1167=LibeExp(nctemp1165);
int nctemp1169=i;
nctemp1169=j*mody->d[0]+nctemp1169;
float nctemp1172 = nctemp1167 * mody->a[nctemp1169];
float nctemp1182 = tausy / tauey;
float nctemp1183 = 1.0 - nctemp1182;
float nctemp1184 = nctemp1172 * nctemp1183;
mody->a[nctemp1155] =nctemp1184;
}
int nctemp1193 = i + 1;
i =nctemp1193;
int nctemp1194 = (i < Nx);
nctemp830=nctemp1194;
}
}
int nctemp1206 = j + 1;
j =nctemp1206;
int nctemp1207 = (j < Ny);
nctemp822=nctemp1207;
}
RunFree(d1->a);
RunFree(d1);
RunFree(d2->a);
RunFree(d2);
return 1;
}
struct model* Modelsls (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Freesurface)
{
struct model* Model;
int Nx;
int Ny;
int i;
int j;
nctempfloat2 *wrk;
nctempfloat2 *wrk2;
struct model *nctemp1222=(struct model*)RunMalloc(sizeof(struct model));
Model =nctemp1222;
Model->Freesurface =Freesurface;
Model->Dx =Dx;
Model->Dt =Dt;
int nctemp1240=vp->d[0];Model->Nx =nctemp1240;
int nctemp1248=vp->d[1];Model->Ny =nctemp1248;
Model->Nb =Nb;
Model->W0 =W0;
Nx =Model->Nx;
Ny =Model->Ny;
Model->Qlx=Qlx;
Model->Qly=Qly;
Model->Qmx=Qmx;
Model->Qmy=Qmy;
Model->Qpx=Qpx;
Model->Qpy=Qpy;
int nctemp1310=Nx;
nctemp1310=nctemp1310*Ny;
nctempfloat2 *nctemp1309;
nctemp1309=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1309->d[0]=Nx;
nctemp1309->d[1]=Ny;
nctemp1309->a=(float *)RunMalloc(sizeof(float)*nctemp1310);
Model->Rho=nctemp1309;
int nctemp1321=Nx;
nctemp1321=nctemp1321*Ny;
nctempfloat2 *nctemp1320;
nctemp1320=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1320->d[0]=Nx;
nctemp1320->d[1]=Ny;
nctemp1320->a=(float *)RunMalloc(sizeof(float)*nctemp1321);
Model->Rhox=nctemp1320;
int nctemp1332=Nx;
nctemp1332=nctemp1332*Ny;
nctempfloat2 *nctemp1331;
nctemp1331=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1331->d[0]=Nx;
nctemp1331->d[1]=Ny;
nctemp1331->a=(float *)RunMalloc(sizeof(float)*nctemp1332);
Model->Rhoy=nctemp1331;
int nctemp1343=Nx;
nctemp1343=nctemp1343*Ny;
nctempfloat2 *nctemp1342;
nctemp1342=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1342->d[0]=Nx;
nctemp1342->d[1]=Ny;
nctemp1342->a=(float *)RunMalloc(sizeof(float)*nctemp1343);
Model->Mu=nctemp1342;
int nctemp1354=Nx;
nctemp1354=nctemp1354*Ny;
nctempfloat2 *nctemp1353;
nctemp1353=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1353->d[0]=Nx;
nctemp1353->d[1]=Ny;
nctemp1353->a=(float *)RunMalloc(sizeof(float)*nctemp1354);
Model->Muxy=nctemp1353;
int nctemp1365=Nx;
nctemp1365=nctemp1365*Ny;
nctempfloat2 *nctemp1364;
nctemp1364=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1364->d[0]=Nx;
nctemp1364->d[1]=Ny;
nctemp1364->a=(float *)RunMalloc(sizeof(float)*nctemp1365);
Model->Lambda=nctemp1364;
int nctemp1376=Nx;
nctemp1376=nctemp1376*Ny;
nctempfloat2 *nctemp1375;
nctemp1375=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1375->d[0]=Nx;
nctemp1375->d[1]=Ny;
nctemp1375->a=(float *)RunMalloc(sizeof(float)*nctemp1376);
Model->Dlambdax=nctemp1375;
int nctemp1387=Nx;
nctemp1387=nctemp1387*Ny;
nctempfloat2 *nctemp1386;
nctemp1386=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1386->d[0]=Nx;
nctemp1386->d[1]=Ny;
nctemp1386->a=(float *)RunMalloc(sizeof(float)*nctemp1387);
Model->Dlambday=nctemp1386;
int nctemp1398=Nx;
nctemp1398=nctemp1398*Ny;
nctempfloat2 *nctemp1397;
nctemp1397=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1397->d[0]=Nx;
nctemp1397->d[1]=Ny;
nctemp1397->a=(float *)RunMalloc(sizeof(float)*nctemp1398);
Model->Dmux=nctemp1397;
int nctemp1409=Nx;
nctemp1409=nctemp1409*Ny;
nctempfloat2 *nctemp1408;
nctemp1408=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1408->d[0]=Nx;
nctemp1408->d[1]=Ny;
nctemp1408->a=(float *)RunMalloc(sizeof(float)*nctemp1409);
Model->Dmuy=nctemp1408;
int nctemp1420=Nx;
nctemp1420=nctemp1420*Ny;
nctempfloat2 *nctemp1419;
nctemp1419=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1419->d[0]=Nx;
nctemp1419->d[1]=Ny;
nctemp1419->a=(float *)RunMalloc(sizeof(float)*nctemp1420);
Model->Dmuxyx=nctemp1419;
int nctemp1431=Nx;
nctemp1431=nctemp1431*Ny;
nctempfloat2 *nctemp1430;
nctemp1430=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1430->d[0]=Nx;
nctemp1430->d[1]=Ny;
nctemp1430->a=(float *)RunMalloc(sizeof(float)*nctemp1431);
Model->Dmuxyy=nctemp1430;
int nctemp1442=Nx;
nctemp1442=nctemp1442*Ny;
nctempfloat2 *nctemp1441;
nctemp1441=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1441->d[0]=Nx;
nctemp1441->d[1]=Ny;
nctemp1441->a=(float *)RunMalloc(sizeof(float)*nctemp1442);
Model->Drhopx=nctemp1441;
int nctemp1453=Nx;
nctemp1453=nctemp1453*Ny;
nctempfloat2 *nctemp1452;
nctemp1452=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1452->d[0]=Nx;
nctemp1452->d[1]=Ny;
nctemp1452->a=(float *)RunMalloc(sizeof(float)*nctemp1453);
Model->Drhopy=nctemp1452;
int nctemp1464=Nx;
nctemp1464=nctemp1464*Ny;
nctempfloat2 *nctemp1463;
nctemp1463=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1463->d[0]=Nx;
nctemp1463->d[1]=Ny;
nctemp1463->a=(float *)RunMalloc(sizeof(float)*nctemp1464);
Model->Alpha1x=nctemp1463;
int nctemp1475=Nx;
nctemp1475=nctemp1475*Ny;
nctempfloat2 *nctemp1474;
nctemp1474=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1474->d[0]=Nx;
nctemp1474->d[1]=Ny;
nctemp1474->a=(float *)RunMalloc(sizeof(float)*nctemp1475);
Model->Alpha1y=nctemp1474;
int nctemp1486=Nx;
nctemp1486=nctemp1486*Ny;
nctempfloat2 *nctemp1485;
nctemp1485=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1485->d[0]=Nx;
nctemp1485->d[1]=Ny;
nctemp1485->a=(float *)RunMalloc(sizeof(float)*nctemp1486);
Model->Alpha2x=nctemp1485;
int nctemp1497=Nx;
nctemp1497=nctemp1497*Ny;
nctempfloat2 *nctemp1496;
nctemp1496=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1496->d[0]=Nx;
nctemp1496->d[1]=Ny;
nctemp1496->a=(float *)RunMalloc(sizeof(float)*nctemp1497);
Model->Alpha2y=nctemp1496;
int nctemp1508=Nx;
nctemp1508=nctemp1508*Ny;
nctempfloat2 *nctemp1507;
nctemp1507=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1507->d[0]=Nx;
nctemp1507->d[1]=Ny;
nctemp1507->a=(float *)RunMalloc(sizeof(float)*nctemp1508);
Model->Beta1x=nctemp1507;
int nctemp1519=Nx;
nctemp1519=nctemp1519*Ny;
nctempfloat2 *nctemp1518;
nctemp1518=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1518->d[0]=Nx;
nctemp1518->d[1]=Ny;
nctemp1518->a=(float *)RunMalloc(sizeof(float)*nctemp1519);
Model->Beta1y=nctemp1518;
int nctemp1530=Nx;
nctemp1530=nctemp1530*Ny;
nctempfloat2 *nctemp1529;
nctemp1529=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1529->d[0]=Nx;
nctemp1529->d[1]=Ny;
nctemp1529->a=(float *)RunMalloc(sizeof(float)*nctemp1530);
Model->Beta2x=nctemp1529;
int nctemp1541=Nx;
nctemp1541=nctemp1541*Ny;
nctempfloat2 *nctemp1540;
nctemp1540=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1540->d[0]=Nx;
nctemp1540->d[1]=Ny;
nctemp1540->a=(float *)RunMalloc(sizeof(float)*nctemp1541);
Model->Beta2y=nctemp1540;
int nctemp1552=Nx;
nctemp1552=nctemp1552*Ny;
nctempfloat2 *nctemp1551;
nctemp1551=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1551->d[0]=Nx;
nctemp1551->d[1]=Ny;
nctemp1551->a=(float *)RunMalloc(sizeof(float)*nctemp1552);
Model->Eta1x=nctemp1551;
int nctemp1563=Nx;
nctemp1563=nctemp1563*Ny;
nctempfloat2 *nctemp1562;
nctemp1562=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1562->d[0]=Nx;
nctemp1562->d[1]=Ny;
nctemp1562->a=(float *)RunMalloc(sizeof(float)*nctemp1563);
Model->Eta1y=nctemp1562;
int nctemp1574=Nx;
nctemp1574=nctemp1574*Ny;
nctempfloat2 *nctemp1573;
nctemp1573=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1573->d[0]=Nx;
nctemp1573->d[1]=Ny;
nctemp1573->a=(float *)RunMalloc(sizeof(float)*nctemp1574);
Model->Eta2x=nctemp1573;
int nctemp1585=Nx;
nctemp1585=nctemp1585*Ny;
nctempfloat2 *nctemp1584;
nctemp1584=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1584->d[0]=Nx;
nctemp1584->d[1]=Ny;
nctemp1584->a=(float *)RunMalloc(sizeof(float)*nctemp1585);
Model->Eta2y=nctemp1584;
j =0;
int nctemp1594 = (j < Ny);
while(nctemp1594){
{
i =0;
int nctemp1602 = (i < Nx);
while(nctemp1602){
{
int nctemp1609=i;
nctemp1609=j*Model->Rho->d[0]+nctemp1609;
int nctemp1617=i;
nctemp1617=j*rho->d[0]+nctemp1617;
float nctemp1620 = 1.0 / rho->a[nctemp1617];
Model->Rho->a[nctemp1609] =nctemp1620;
int nctemp1624=i;
nctemp1624=j*Model->Mu->d[0]+nctemp1624;
int nctemp1634=i;
nctemp1634=j*rho->d[0]+nctemp1634;
int nctemp1638=i;
nctemp1638=j*vs->d[0]+nctemp1638;
float nctemp1641 = rho->a[nctemp1634] * vs->a[nctemp1638];
int nctemp1643=i;
nctemp1643=j*vs->d[0]+nctemp1643;
float nctemp1646 = nctemp1641 * vs->a[nctemp1643];
Model->Mu->a[nctemp1624] =nctemp1646;
int nctemp1653 = (Freesurface ==1);
int nctemp1650 = (nctemp1653 && j);
int nctemp1647 = (nctemp1650 ==0);
if(nctemp1647)
{
int nctemp1662=i;
nctemp1662=j*Model->Mu->d[0]+nctemp1662;
int nctemp1676=i;
nctemp1676=j*rho->d[0]+nctemp1676;
float nctemp1679 = 0.5 * rho->a[nctemp1676];
int nctemp1681=i;
nctemp1681=j*vs->d[0]+nctemp1681;
float nctemp1684 = nctemp1679 * vs->a[nctemp1681];
int nctemp1686=i;
nctemp1686=j*vs->d[0]+nctemp1686;
float nctemp1689 = nctemp1684 * vs->a[nctemp1686];
Model->Mu->a[nctemp1662] =nctemp1689;
}
int nctemp1693=i;
nctemp1693=j*Model->Lambda->d[0]+nctemp1693;
int nctemp1700=i;
nctemp1700=j*rho->d[0]+nctemp1700;
int nctemp1710=i;
nctemp1710=j*vp->d[0]+nctemp1710;
int nctemp1714=i;
nctemp1714=j*vp->d[0]+nctemp1714;
float nctemp1717 = vp->a[nctemp1710] * vp->a[nctemp1714];
int nctemp1726=i;
nctemp1726=j*vs->d[0]+nctemp1726;
float nctemp1729 = 2.0 * vs->a[nctemp1726];
int nctemp1731=i;
nctemp1731=j*vs->d[0]+nctemp1731;
float nctemp1734 = nctemp1729 * vs->a[nctemp1731];
float nctemp1735 = nctemp1717 - nctemp1734;
float nctemp1736 = rho->a[nctemp1700] * nctemp1735;
Model->Lambda->a[nctemp1693] =nctemp1736;
int nctemp1743 = (Freesurface ==1);
int nctemp1740 = (nctemp1743 && j);
int nctemp1737 = (nctemp1740 ==0);
if(nctemp1737)
{
int nctemp1752=i;
nctemp1752=j*Model->Lambda->d[0]+nctemp1752;
Model->Lambda->a[nctemp1752] =0.0;
}
int nctemp1759=i;
nctemp1759=j*Model->Alpha1x->d[0]+nctemp1759;
Model->Alpha1x->a[nctemp1759] =0.0;
int nctemp1766=i;
nctemp1766=j*Model->Alpha1y->d[0]+nctemp1766;
Model->Alpha1y->a[nctemp1766] =0.0;
int nctemp1773=i;
nctemp1773=j*Model->Alpha2x->d[0]+nctemp1773;
Model->Alpha2x->a[nctemp1773] =0.0;
int nctemp1780=i;
nctemp1780=j*Model->Alpha2y->d[0]+nctemp1780;
Model->Alpha2y->a[nctemp1780] =0.0;
int nctemp1787=i;
nctemp1787=j*Model->Beta1x->d[0]+nctemp1787;
Model->Beta1x->a[nctemp1787] =0.0;
int nctemp1794=i;
nctemp1794=j*Model->Beta1y->d[0]+nctemp1794;
Model->Beta1y->a[nctemp1794] =0.0;
int nctemp1801=i;
nctemp1801=j*Model->Beta2x->d[0]+nctemp1801;
Model->Beta2x->a[nctemp1801] =0.0;
int nctemp1808=i;
nctemp1808=j*Model->Beta2y->d[0]+nctemp1808;
Model->Beta2y->a[nctemp1808] =0.0;
int nctemp1815=i;
nctemp1815=j*Model->Eta1x->d[0]+nctemp1815;
Model->Eta1x->a[nctemp1815] =0.0;
int nctemp1822=i;
nctemp1822=j*Model->Eta1y->d[0]+nctemp1822;
Model->Eta1y->a[nctemp1822] =0.0;
int nctemp1829=i;
nctemp1829=j*Model->Eta2x->d[0]+nctemp1829;
Model->Eta2x->a[nctemp1829] =0.0;
int nctemp1836=i;
nctemp1836=j*Model->Eta2y->d[0]+nctemp1836;
Model->Eta2y->a[nctemp1836] =0.0;
int nctemp1843=i;
nctemp1843=j*Model->Dlambdax->d[0]+nctemp1843;
int nctemp1847=i;
nctemp1847=j*Model->Lambda->d[0]+nctemp1847;
Model->Dlambdax->a[nctemp1843] =Model->Lambda->a[nctemp1847];
int nctemp1853=i;
nctemp1853=j*Model->Dlambday->d[0]+nctemp1853;
int nctemp1857=i;
nctemp1857=j*Model->Lambda->d[0]+nctemp1857;
Model->Dlambday->a[nctemp1853] =Model->Lambda->a[nctemp1857];
int nctemp1863=i;
nctemp1863=j*Model->Dmux->d[0]+nctemp1863;
int nctemp1867=i;
nctemp1867=j*Model->Mu->d[0]+nctemp1867;
Model->Dmux->a[nctemp1863] =Model->Mu->a[nctemp1867];
int nctemp1873=i;
nctemp1873=j*Model->Dmuy->d[0]+nctemp1873;
int nctemp1877=i;
nctemp1877=j*Model->Mu->d[0]+nctemp1877;
Model->Dmuy->a[nctemp1873] =Model->Mu->a[nctemp1877];
int nctemp1883=i;
nctemp1883=j*Model->Drhopx->d[0]+nctemp1883;
int nctemp1887=i;
nctemp1887=j*Model->Rho->d[0]+nctemp1887;
Model->Drhopx->a[nctemp1883] =Model->Rho->a[nctemp1887];
int nctemp1893=i;
nctemp1893=j*Model->Drhopy->d[0]+nctemp1893;
int nctemp1897=i;
nctemp1897=j*Model->Rho->d[0]+nctemp1897;
Model->Drhopy->a[nctemp1893] =Model->Rho->a[nctemp1897];
}
int nctemp1908 = i + 1;
i =nctemp1908;
int nctemp1909 = (i < Nx);
nctemp1602=nctemp1909;
}
}
int nctemp1921 = j + 1;
j =nctemp1921;
int nctemp1922 = (j < Ny);
nctemp1594=nctemp1922;
}
nctempfloat2* nctemp1927= Model->Qlx;
nctempfloat2* nctemp1930= Model->Qly;
nctempfloat2* nctemp1933= Model->Dlambdax;
nctempfloat2* nctemp1936= Model->Dlambday;
nctempfloat2* nctemp1939= Model->Alpha1x;
nctempfloat2* nctemp1942= Model->Alpha1y;
nctempfloat2* nctemp1945= Model->Alpha2x;
nctempfloat2* nctemp1948= Model->Alpha2y;
struct model* nctemp1951= Model;
int nctemp1953=Modelslscoeffs(nctemp1927,nctemp1930,nctemp1933,nctemp1936,nctemp1939,nctemp1942,nctemp1945,nctemp1948,nctemp1951);
nctempfloat2* nctemp1955= Model->Qmx;
nctempfloat2* nctemp1958= Model->Qmy;
nctempfloat2* nctemp1961= Model->Dmux;
nctempfloat2* nctemp1964= Model->Dmuy;
nctempfloat2* nctemp1967= Model->Beta1x;
nctempfloat2* nctemp1970= Model->Beta1y;
nctempfloat2* nctemp1973= Model->Beta2x;
nctempfloat2* nctemp1976= Model->Beta2y;
struct model* nctemp1979= Model;
int nctemp1981=Modelslscoeffs(nctemp1955,nctemp1958,nctemp1961,nctemp1964,nctemp1967,nctemp1970,nctemp1973,nctemp1976,nctemp1979);
nctempfloat2* nctemp1983= Model->Qpx;
nctempfloat2* nctemp1986= Model->Qpy;
nctempfloat2* nctemp1989= Model->Drhopx;
nctempfloat2* nctemp1992= Model->Drhopy;
nctempfloat2* nctemp1995= Model->Eta1x;
nctempfloat2* nctemp1998= Model->Eta1y;
nctempfloat2* nctemp2001= Model->Eta2x;
nctempfloat2* nctemp2004= Model->Eta2y;
struct model* nctemp2007= Model;
int nctemp2009=Modelslscoeffs(nctemp1983,nctemp1986,nctemp1989,nctemp1992,nctemp1995,nctemp1998,nctemp2001,nctemp2004,nctemp2007);
nctempfloat2* nctemp2011= Model->Rho;
nctempfloat2* nctemp2014= Model->Rhox;
int nctemp2017=Modelstaggerx(nctemp2011,nctemp2014);
nctempfloat2* nctemp2019= Model->Rho;
nctempfloat2* nctemp2022= Model->Rhoy;
int nctemp2025=Modelstaggery(nctemp2019,nctemp2022);
nctempfloat2* nctemp2031= Model->Drhopx;
nctempfloat2* nctemp2034=Modelcopy(nctemp2031);
wrk=nctemp2034;
nctempfloat2* nctemp2036= wrk;
nctempfloat2* nctemp2039= Model->Drhopx;
int nctemp2042=Modelstaggerx(nctemp2036,nctemp2039);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2051= Model->Drhopy;
nctempfloat2* nctemp2054=Modelcopy(nctemp2051);
wrk=nctemp2054;
nctempfloat2* nctemp2056= wrk;
nctempfloat2* nctemp2059= Model->Drhopy;
int nctemp2062=Modelstaggery(nctemp2056,nctemp2059);
nctempfloat2* nctemp2064= Model->Mu;
nctempfloat2* nctemp2067= wrk;
int nctemp2070=Modelstaggerx(nctemp2064,nctemp2067);
nctempfloat2* nctemp2072= wrk;
nctempfloat2* nctemp2075= Model->Muxy;
int nctemp2078=Modelstaggery(nctemp2072,nctemp2075);
nctempfloat2* nctemp2080= Model->Dmux;
nctempfloat2* nctemp2083= wrk;
int nctemp2086=Modelstaggerx(nctemp2080,nctemp2083);
nctempfloat2* nctemp2088= wrk;
nctempfloat2* nctemp2091= Model->Dmuxyx;
int nctemp2094=Modelstaggery(nctemp2088,nctemp2091);
nctempfloat2* nctemp2096= Model->Dmuy;
nctempfloat2* nctemp2099= wrk;
int nctemp2102=Modelstaggerx(nctemp2096,nctemp2099);
nctempfloat2* nctemp2104= wrk;
nctempfloat2* nctemp2107= Model->Dmuxyy;
int nctemp2110=Modelstaggery(nctemp2104,nctemp2107);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2119= Model->Beta1x;
nctempfloat2* nctemp2122=Modelcopy(nctemp2119);
wrk=nctemp2122;
int nctemp2129=Model->Nx;
nctemp2129=nctemp2129*Model->Ny;
nctempfloat2 *nctemp2128;
nctemp2128=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2128->d[0]=Model->Nx;
nctemp2128->d[1]=Model->Ny;
nctemp2128->a=(float *)RunMalloc(sizeof(float)*nctemp2129);
wrk2=nctemp2128;
nctempfloat2* nctemp2135= wrk;
nctempfloat2* nctemp2138= wrk2;
int nctemp2141=Modelstaggery(nctemp2135,nctemp2138);
nctempfloat2* nctemp2143= wrk2;
nctempfloat2* nctemp2146= Model->Beta1x;
int nctemp2149=Modelstaggerx(nctemp2143,nctemp2146);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2158= Model->Beta2x;
nctempfloat2* nctemp2161=Modelcopy(nctemp2158);
wrk=nctemp2161;
int nctemp2168=Model->Nx;
nctemp2168=nctemp2168*Model->Ny;
nctempfloat2 *nctemp2167;
nctemp2167=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2167->d[0]=Model->Nx;
nctemp2167->d[1]=Model->Ny;
nctemp2167->a=(float *)RunMalloc(sizeof(float)*nctemp2168);
wrk2=nctemp2167;
nctempfloat2* nctemp2174= wrk;
nctempfloat2* nctemp2177= wrk2;
int nctemp2180=Modelstaggery(nctemp2174,nctemp2177);
nctempfloat2* nctemp2182= wrk2;
nctempfloat2* nctemp2185= Model->Beta2x;
int nctemp2188=Modelstaggerx(nctemp2182,nctemp2185);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2200= Model->Beta1y;
nctempfloat2* nctemp2203=Modelcopy(nctemp2200);
wrk=nctemp2203;
int nctemp2210=Model->Nx;
nctemp2210=nctemp2210*Model->Ny;
nctempfloat2 *nctemp2209;
nctemp2209=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2209->d[0]=Model->Nx;
nctemp2209->d[1]=Model->Ny;
nctemp2209->a=(float *)RunMalloc(sizeof(float)*nctemp2210);
wrk2=nctemp2209;
nctempfloat2* nctemp2216= wrk;
nctempfloat2* nctemp2219= wrk2;
int nctemp2222=Modelstaggery(nctemp2216,nctemp2219);
nctempfloat2* nctemp2224= wrk2;
nctempfloat2* nctemp2227= Model->Beta1y;
int nctemp2230=Modelstaggerx(nctemp2224,nctemp2227);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2239= Model->Beta2y;
nctempfloat2* nctemp2242=Modelcopy(nctemp2239);
wrk=nctemp2242;
int nctemp2249=Model->Nx;
nctemp2249=nctemp2249*Model->Ny;
nctempfloat2 *nctemp2248;
nctemp2248=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2248->d[0]=Model->Nx;
nctemp2248->d[1]=Model->Ny;
nctemp2248->a=(float *)RunMalloc(sizeof(float)*nctemp2249);
wrk2=nctemp2248;
nctempfloat2* nctemp2255= wrk;
nctempfloat2* nctemp2258= wrk2;
int nctemp2261=Modelstaggery(nctemp2255,nctemp2258);
nctempfloat2* nctemp2263= wrk2;
nctempfloat2* nctemp2266= Model->Beta2y;
int nctemp2269=Modelstaggerx(nctemp2263,nctemp2266);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2281= Model->Eta1x;
nctempfloat2* nctemp2284=Modelcopy(nctemp2281);
wrk=nctemp2284;
nctempfloat2* nctemp2286= wrk;
nctempfloat2* nctemp2289= Model->Eta1x;
int nctemp2292=Modelstaggerx(nctemp2286,nctemp2289);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2301= Model->Eta2x;
nctempfloat2* nctemp2304=Modelcopy(nctemp2301);
wrk=nctemp2304;
nctempfloat2* nctemp2306= wrk;
nctempfloat2* nctemp2309= Model->Eta2x;
int nctemp2312=Modelstaggerx(nctemp2306,nctemp2309);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2321= Model->Eta1y;
nctempfloat2* nctemp2324=Modelcopy(nctemp2321);
wrk=nctemp2324;
nctempfloat2* nctemp2326= wrk;
nctempfloat2* nctemp2329= Model->Eta1y;
int nctemp2332=Modelstaggery(nctemp2326,nctemp2329);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2341= Model->Eta2y;
nctempfloat2* nctemp2344=Modelcopy(nctemp2341);
wrk=nctemp2344;
nctempfloat2* nctemp2346= wrk;
nctempfloat2* nctemp2349= Model->Eta2y;
int nctemp2352=Modelstaggery(nctemp2346,nctemp2349);
RunFree(wrk->a);
RunFree(wrk);
return Model;
}
struct model* ModelNew (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Rheol,int Freesurface)
{
struct model* m;
int nctemp2357 = (Rheol ==2);
if(nctemp2357)
{
nctempfloat2* nctemp2365= vp;
nctempfloat2* nctemp2368= vs;
nctempfloat2* nctemp2371= rho;
nctempfloat2* nctemp2374= Qlx;
nctempfloat2* nctemp2377= Qly;
nctempfloat2* nctemp2380= Qmx;
nctempfloat2* nctemp2383= Qmy;
nctempfloat2* nctemp2386= Qpx;
nctempfloat2* nctemp2389= Qpy;
float nctemp2392= Dx;
float nctemp2394= Dt;
float nctemp2396= W0;
int nctemp2398= Nb;
int nctemp2400= Freesurface;
struct model* nctemp2402=Modelsls(nctemp2365,nctemp2368,nctemp2371,nctemp2374,nctemp2377,nctemp2380,nctemp2383,nctemp2386,nctemp2389,nctemp2392,nctemp2394,nctemp2396,nctemp2398,nctemp2400);
m =nctemp2402;
}
else{
int nctemp2404= 4;
struct nctempchar1 *nctemp2408;
static struct nctempchar1 nctemp2409 = {{ 18}, (char*)"Unknown Q-model\n\0"};
nctemp2408=&nctemp2409;
nctempchar1* nctemp2406= nctemp2408;
int nctemp2410=LibePuts(nctemp2404,nctemp2406);
int nctemp2412= 4;
int nctemp2414=LibeFlush(nctemp2412);
int nctemp2416=LibeExit();
}
return m;
}
float ModelStability (struct model* Model)
{
int nx;
int ny;
int i;
int j;
float vp;
float stab;
nx =Model->Nx;
ny =Model->Ny;
j =0;
int nctemp2430 = (j < ny);
while(nctemp2430){
{
i =0;
int nctemp2438 = (i < nx);
while(nctemp2438){
{
int nctemp2453=i;
nctemp2453=j*Model->Lambda->d[0]+nctemp2453;
int nctemp2461=i;
nctemp2461=j*Model->Mu->d[0]+nctemp2461;
float nctemp2464 = 2.0 * Model->Mu->a[nctemp2461];
float nctemp2465 = Model->Lambda->a[nctemp2453] + nctemp2464;
int nctemp2467=i;
nctemp2467=j*Model->Rho->d[0]+nctemp2467;
float nctemp2470 = nctemp2465 / Model->Rho->a[nctemp2467];
float nctemp2446= nctemp2470;
float nctemp2471=LibeSqrt(nctemp2446);
vp =nctemp2471;
float nctemp2483 = vp * Model->Dt;
float nctemp2485 = nctemp2483 / Model->Dx;
stab =nctemp2485;
float nctemp2494= 2.0;
float nctemp2496=LibeSqrt(nctemp2494);
float nctemp2497 = 1.0 / nctemp2496;
int nctemp2486 = (stab > nctemp2497);
if(nctemp2486)
{
int nctemp2499= 4;
struct nctempchar1 *nctemp2503;
static struct nctempchar1 nctemp2504 = {{ 28}, (char*)"Stability index too large! \0"};
nctemp2503=&nctemp2504;
nctempchar1* nctemp2501= nctemp2503;
int nctemp2505=LibePuts(nctemp2499,nctemp2501);
int nctemp2507= 4;
float nctemp2509= stab;
struct nctempchar1 *nctemp2513;
static struct nctempchar1 nctemp2514 = {{ 2}, (char*)"g\0"};
nctemp2513=&nctemp2514;
nctempchar1* nctemp2511= nctemp2513;
int nctemp2515=LibePutf(nctemp2507,nctemp2509,nctemp2511);
int nctemp2517= 4;
struct nctempchar1 *nctemp2521;
static struct nctempchar1 nctemp2522 = {{ 3}, (char*)"\n\0"};
nctemp2521=&nctemp2522;
nctempchar1* nctemp2519= nctemp2521;
int nctemp2523=LibePuts(nctemp2517,nctemp2519);
int nctemp2525= 4;
struct nctempchar1 *nctemp2529;
static struct nctempchar1 nctemp2530 = {{ 7}, (char*)"vp: \n\0"};
nctemp2529=&nctemp2530;
nctempchar1* nctemp2527= nctemp2529;
int nctemp2531=LibePuts(nctemp2525,nctemp2527);
int nctemp2533= 4;
float nctemp2535= vp;
struct nctempchar1 *nctemp2539;
static struct nctempchar1 nctemp2540 = {{ 2}, (char*)"g\0"};
nctemp2539=&nctemp2540;
nctempchar1* nctemp2537= nctemp2539;
int nctemp2541=LibePutf(nctemp2533,nctemp2535,nctemp2537);
int nctemp2543= 4;
struct nctempchar1 *nctemp2547;
static struct nctempchar1 nctemp2548 = {{ 3}, (char*)"\n\0"};
nctemp2547=&nctemp2548;
nctempchar1* nctemp2545= nctemp2547;
int nctemp2549=LibePuts(nctemp2543,nctemp2545);
int nctemp2551= 4;
struct nctempchar1 *nctemp2555;
static struct nctempchar1 nctemp2556 = {{ 7}, (char*)"dt: \n\0"};
nctemp2555=&nctemp2556;
nctempchar1* nctemp2553= nctemp2555;
int nctemp2557=LibePuts(nctemp2551,nctemp2553);
int nctemp2559= 4;
float nctemp2561= Model->Dt;
struct nctempchar1 *nctemp2565;
static struct nctempchar1 nctemp2566 = {{ 2}, (char*)"g\0"};
nctemp2565=&nctemp2566;
nctempchar1* nctemp2563= nctemp2565;
int nctemp2567=LibePutf(nctemp2559,nctemp2561,nctemp2563);
int nctemp2569= 4;
struct nctempchar1 *nctemp2573;
static struct nctempchar1 nctemp2574 = {{ 3}, (char*)"\n\0"};
nctemp2573=&nctemp2574;
nctempchar1* nctemp2571= nctemp2573;
int nctemp2575=LibePuts(nctemp2569,nctemp2571);
int nctemp2577= 4;
struct nctempchar1 *nctemp2581;
static struct nctempchar1 nctemp2582 = {{ 7}, (char*)"dx: \n\0"};
nctemp2581=&nctemp2582;
nctempchar1* nctemp2579= nctemp2581;
int nctemp2583=LibePuts(nctemp2577,nctemp2579);
int nctemp2585= 4;
float nctemp2587= Model->Dx;
struct nctempchar1 *nctemp2591;
static struct nctempchar1 nctemp2592 = {{ 2}, (char*)"g\0"};
nctemp2591=&nctemp2592;
nctempchar1* nctemp2589= nctemp2591;
int nctemp2593=LibePutf(nctemp2585,nctemp2587,nctemp2589);
int nctemp2595= 4;
struct nctempchar1 *nctemp2599;
static struct nctempchar1 nctemp2600 = {{ 3}, (char*)"\n\0"};
nctemp2599=&nctemp2600;
nctempchar1* nctemp2597= nctemp2599;
int nctemp2601=LibePuts(nctemp2595,nctemp2597);
int nctemp2603= 4;
int nctemp2605=LibeFlush(nctemp2603);
}
}
int nctemp2614 = i + 1;
i =nctemp2614;
int nctemp2615 = (i < nx);
nctemp2438=nctemp2615;
}
}
int nctemp2627 = j + 1;
j =nctemp2627;
int nctemp2628 = (j < ny);
nctemp2430=nctemp2628;
}
return stab;
}
