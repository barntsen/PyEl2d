//  Translated by epsc  version today  
#include <stddef.h>
typedef struct { float r; float i;} complex; 
typedef struct nctempfloat1 { int d[1]; float *a;} nctempfloat1; 
typedef struct nctempint1 { int d[1]; int *a;} nctempint1; 
typedef struct nctempchar1 { int d[1]; char *a;} nctempchar1; 
typedef struct nctempcomplex1 { int d[1]; complex *a;} nctempcomplex1; 
typedef struct nctempfloat2 { int d[2]; float *a;} nctempfloat2; 
typedef struct nctempint2 { int d[2]; int *a;} nctempint2; 
typedef struct nctempchar2 { int d[2]; char *a;} nctempchar2; 
typedef struct nctempcomplex2 { int d[2]; complex *a;} nctempcomplex2; 
typedef struct nctempfloat3 { int d[3]; float *a;} nctempfloat3; 
typedef struct nctempint3 { int d[3]; int *a;} nctempint3; 
typedef struct nctempchar3 { int d[3]; char *a;} nctempchar3; 
typedef struct nctempcomplex3 { int d[3]; complex *a;} nctempcomplex3; 
typedef struct nctempfloat4 { int d[4]; float *a;} nctempfloat4; 
typedef struct nctempint4 { int d[4]; int *a;} nctempint4; 
typedef struct nctempchar4 { int d[4]; char *a;} nctempchar4; 
typedef struct nctempcomplex4 { int d[4]; complex *a;} nctempcomplex4; 
#include <stdlib.h>
#include <string.h>
void *RunMalloc(int n); 
int RunFree(void *n); 
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
struct MainArg {nctempchar1 *arg;
};
typedef struct nctempMainArg1 {int d[1]; struct MainArg *a; } nctempMainArg1;
struct nctempMainArg2 {int d[2]; struct MainArg *a; } ;
struct nctempMainArg3 {int d[3]; struct MainArg *a; } ;
struct nctempMainArg4 {int d[4]; struct MainArg *a; } ;
int LibeErrno;
nctempchar1 *LibeErrstr;
int LibeErrinit ();
int LibeGeterrno ();
int LibeClearerr ();
nctempchar1 * LibeGeterrstr ();
nctempchar1 * LibeGetenv (nctempchar1 *name);
;
;
;
;
;
float LibeMach (int flag);
float LibeFabs (float x);
float LibeFscale2 (float x,int n);
float LibeGetfman2 (float x);
int LibeGetfexp2 (float x);
float LibeFscale (float x,int n);
int LibeGetfman (float f,int maxdig);
float LibeGetffman (float f);
int LibeGetmaxdig (float f);
int LibeGetfexp (float f);
float LibeClock ();
;
;
;
;
;
;
;
float LibeSincosmax;
float LibeSincoslim;
float LibeLnmax;
float LibeLnmin;
int LibeMod (int n,int r);
float LibeSqrt (float x);
float LibeLn (float x);
float LibeExp (float x);
float LibeSincos (float x,float y,float sign);
float LibeSin (float x);
float LibeCos (float x);
float LibeTan (float x);
float LibeArcsin (float x);
float LibeArccos (float x);
float LibeAtan (float f);
float LibeArctan (float x);
float LibePow (float base,float exponent);
int LibeMathinit ();
int LibeStrlen (nctempchar1 *s);
int LibeStrcmp (nctempchar1 *s,nctempchar1 *t);
int LibeStrev (nctempchar1 *s);
int LibeStrcpy (nctempchar1 *s,nctempchar1 *t);
int LibeStrcat (nctempchar1 *s,nctempchar1 *t);
nctempchar1 * LibeStradd (nctempchar1 *t,nctempchar1 *s);
nctempchar1 * LibeStrsave (nctempchar1 *s);
int LibeIsalhpa (int c);
int LibeIsdigit (int c);
int LibeIsalnum (int c);
int LibeAtoi (nctempchar1 *s);
int LibeItoa (int n,nctempchar1 *s);
int LibeItoh (int n,nctempchar1 *s);
float LibeAtof (nctempchar1 *s);
int LibeFtoaf (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoae (int mant,int nexp,int nfield,int nfrac,nctempchar1 *s);
int LibeFtoa (float f,nctempchar1 *fmt,nctempchar1 *s);
struct LibeFdescr {int cnt;
int ptr;
int bufsize;
nctempchar1 *base;
int readflg;
int writflg;
int unbflg;
int errflg;
int eoflg;
int fd;
};
typedef struct nctempLibeFdescr1 {int d[1]; struct LibeFdescr *a; } nctempLibeFdescr1;
struct nctempLibeFdescr2 {int d[2]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr3 {int d[3]; struct LibeFdescr *a; } ;
struct nctempLibeFdescr4 {int d[4]; struct LibeFdescr *a; } ;
;
struct nctempLibeFdescr1 *LibeFarr;
;
nctempchar1 *LibeTmpstr;
int LibeIoinit ();
int LibeFlushbuff (int fp);
int LibeFillbuff (int fp);
int LibeFlush (int fp);
int LibeOpen (nctempchar1 *name,nctempchar1 *mode);
int LibeClose (int fp);
int LibeGetc (int fp);
int LibeUngetc (int fp);
int LibeGetw (int fp,nctempchar1 *text);
int LibePutc (int fp,int c);
int LibePuts (int fp,nctempchar1 *s);
int LibePuti (int fp,int ival);
int LibePutf (int fp,float fval,nctempchar1 *form);
int LibePs (nctempchar1 *s);
int LibePi (int n);
int LibePf (float r);
int LibeRead (int fp,int n,nctempchar1 *buffer);
int LibeWrite (int fp,int n,nctempchar1 *buffer);
int LibeSeek (int fp,int pos,int flag);
int LibeIodelete ();
int NBLOCKS;
int NTHREADS;
int LibeSetnb (int nb);
int LibeSetnt (int nt);
int LibeGetnb ();
int LibeGetnt ();
int LibeArrayex (int line,nctempchar1 *name,int ival,int index,int bound);
int LibeSystem (nctempchar1 *cmd);
int LibeInit ();
int LibeExit ();
struct model {int Nx;
int Ny;
int Nb;
float W0;
nctempfloat2 *Qlx;
nctempfloat2 *Qly;
nctempfloat2 *Qmx;
nctempfloat2 *Qmy;
nctempfloat2 *Qpx;
nctempfloat2 *Qpy;
nctempfloat2 *Lambda;
nctempfloat2 *Mu;
nctempfloat2 *Muxy;
nctempfloat2 *Dmuxyx;
nctempfloat2 *Dmuxyy;
nctempfloat2 *Dlambdax;
nctempfloat2 *Dlambday;
nctempfloat2 *Dmux;
nctempfloat2 *Dmuy;
nctempfloat2 *Drhopx;
nctempfloat2 *Drhopy;
nctempfloat2 *Rho;
nctempfloat2 *Rhox;
nctempfloat2 *Rhoy;
nctempfloat2 *Alpha1x;
nctempfloat2 *Alpha1y;
nctempfloat2 *Alpha2x;
nctempfloat2 *Alpha2y;
nctempfloat2 *Beta1x;
nctempfloat2 *Beta2x;
nctempfloat2 *Beta1y;
nctempfloat2 *Beta2y;
nctempfloat2 *Eta1x;
nctempfloat2 *Eta1y;
nctempfloat2 *Eta2x;
nctempfloat2 *Eta2y;
nctempfloat1 *dx;
nctempfloat1 *dy;
nctempfloat1 *dx1;
nctempfloat1 *dy1;
nctempfloat1 *dx2;
nctempfloat1 *dy2;
float Dx;
float Dt;
int Freesurface;
};
typedef struct nctempmodel1 {int d[1]; struct model *a; } nctempmodel1;
struct nctempmodel2 {int d[2]; struct model *a; } ;
struct nctempmodel3 {int d[3]; struct model *a; } ;
struct nctempmodel4 {int d[4]; struct model *a; } ;
int Modeld (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp5=d->d[0];n =nctemp5;
i =0;
int nctemp13 = (i < n);
while(nctemp13){
{
int nctemp20=i;
d->a[nctemp20] =1.0;
}
int nctemp31 = i + 1;
i =nctemp31;
int nctemp32 = (i < n);
nctemp13=nctemp32;
}
i =0;
int nctemp40 = (i < nb);
while(nctemp40){
{
int nctemp47=i;
int nctemp53=i;
float nctemp68=(float)(i);
float nctemp72 = nctemp68 * dx;
float nctemp77=(float)(nb);
float nctemp81 = nctemp77 * dx;
float nctemp82 = nctemp72 / nctemp81;
float nctemp87=(float)(i);
float nctemp91 = nctemp87 * dx;
float nctemp92 = nctemp82 * nctemp91;
float nctemp97=(float)(nb);
float nctemp101 = nctemp97 * dx;
float nctemp102 = nctemp92 / nctemp101;
float nctemp103 = d->a[nctemp53] * nctemp102;
d->a[nctemp47] =nctemp103;
}
int nctemp112 = i + 1;
i =nctemp112;
int nctemp113 = (i < nb);
nctemp40=nctemp113;
}
int nctemp128 = n - 1;
int nctemp130 = nctemp128 - nb;
i =nctemp130;
int nctemp131 = (i < n);
while(nctemp131){
{
int nctemp138=i;
int nctemp144=i;
int nctemp168 = n - 1;
int nctemp170 = nctemp168 - i;
float nctemp159=(float)(nctemp170);
float nctemp172 = nctemp159 * dx;
float nctemp177=(float)(nb);
float nctemp181 = nctemp177 * dx;
float nctemp182 = nctemp172 / nctemp181;
int nctemp196 = n - 1;
int nctemp198 = nctemp196 - i;
float nctemp187=(float)(nctemp198);
float nctemp200 = nctemp187 * dx;
float nctemp201 = nctemp182 * nctemp200;
float nctemp206=(float)(nb);
float nctemp210 = nctemp206 * dx;
float nctemp211 = nctemp201 / nctemp210;
float nctemp212 = d->a[nctemp144] * nctemp211;
d->a[nctemp138] =nctemp212;
}
int nctemp221 = i + 1;
i =nctemp221;
int nctemp222 = (i < n);
nctemp131=nctemp222;
}
return 1;
}
int Modele (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp231=d->d[0];n =nctemp231;
i =0;
int nctemp239 = (i < n);
while(nctemp239){
{
int nctemp246=i;
d->a[nctemp246] =1.0;
}
int nctemp257 = i + 1;
i =nctemp257;
int nctemp258 = (i < n);
nctemp239=nctemp258;
}
int nctemp273 = n - 1;
int nctemp275 = nctemp273 - nb;
i =nctemp275;
int nctemp276 = (i < n);
while(nctemp276){
{
int nctemp283=i;
int nctemp289=i;
int nctemp313 = n - 1;
int nctemp315 = nctemp313 - i;
float nctemp304=(float)(nctemp315);
float nctemp317 = nctemp304 * dx;
float nctemp322=(float)(nb);
float nctemp326 = nctemp322 * dx;
float nctemp327 = nctemp317 / nctemp326;
int nctemp341 = n - 1;
int nctemp343 = nctemp341 - i;
float nctemp332=(float)(nctemp343);
float nctemp345 = nctemp332 * dx;
float nctemp346 = nctemp327 * nctemp345;
float nctemp351=(float)(nb);
float nctemp355 = nctemp351 * dx;
float nctemp356 = nctemp346 / nctemp355;
float nctemp357 = d->a[nctemp289] * nctemp356;
d->a[nctemp283] =nctemp357;
}
int nctemp366 = i + 1;
i =nctemp366;
int nctemp367 = (i < n);
nctemp276=nctemp367;
}
return 1;
}
nctempfloat2 * Modelcopy (nctempfloat2 *a)
{
int nx;
int ny;
int i;
int j;
nctempfloat2 *b;
int nctemp376=a->d[0];nx =nctemp376;
int nctemp384=a->d[1];ny =nctemp384;
int nctemp394=nx;
nctemp394=nctemp394*ny;
nctempfloat2 *nctemp393;
nctemp393=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp393->d[0]=nx;
nctemp393->d[1]=ny;
nctemp393->a=(float *)RunMalloc(sizeof(float)*nctemp394);
b=nctemp393;
j =0;
int nctemp403 = (j < ny);
while(nctemp403){
{
i =0;
int nctemp411 = (i < nx);
while(nctemp411){
{
int nctemp418=i;
nctemp418=j*b->d[0]+nctemp418;
int nctemp422=i;
nctemp422=j*a->d[0]+nctemp422;
b->a[nctemp418] =a->a[nctemp422];
}
int nctemp433 = i + 1;
i =nctemp433;
int nctemp434 = (i < nx);
nctemp411=nctemp434;
}
}
int nctemp446 = j + 1;
j =nctemp446;
int nctemp447 = (j < ny);
nctemp403=nctemp447;
}
return b;
}
int Modelstaggerx (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp457=a->d[0];nx =nctemp457;
int nctemp465=a->d[1];ny =nctemp465;
j =0;
int nctemp473 = (j < ny);
while(nctemp473){
{
i =0;
int nctemp481 = (i < nx);
while(nctemp481){
{
int nctemp488=i;
nctemp488=j*astagg->d[0]+nctemp488;
int nctemp492=i;
nctemp492=j*a->d[0]+nctemp492;
astagg->a[nctemp488] =a->a[nctemp492];
}
int nctemp503 = i + 1;
i =nctemp503;
int nctemp504 = (i < nx);
nctemp481=nctemp504;
}
}
int nctemp516 = j + 1;
j =nctemp516;
int nctemp517 = (j < ny);
nctemp473=nctemp517;
}
j =0;
int nctemp525 = (j < ny);
while(nctemp525){
{
i =0;
int nctemp541 = nx - 1;
int nctemp533 = (i < nctemp541);
while(nctemp533){
{
int nctemp545=i;
nctemp545=j*astagg->d[0]+nctemp545;
int nctemp556=i;
nctemp556=j*a->d[0]+nctemp556;
int nctemp565 = i + 1;
int nctemp560=nctemp565;
nctemp560=j*a->d[0]+nctemp560;
float nctemp567 = a->a[nctemp556] + a->a[nctemp560];
float nctemp568 = 0.5 * nctemp567;
astagg->a[nctemp545] =nctemp568;
}
int nctemp577 = i + 1;
i =nctemp577;
int nctemp586 = nx - 1;
int nctemp578 = (i < nctemp586);
nctemp533=nctemp578;
}
}
int nctemp595 = j + 1;
j =nctemp595;
int nctemp596 = (j < ny);
nctemp525=nctemp596;
}
return 1;
}
int Modelstaggery (nctempfloat2 *a,nctempfloat2 *astagg)
{
int nx;
int ny;
int i;
int j;
int nctemp605=a->d[0];nx =nctemp605;
int nctemp613=a->d[1];ny =nctemp613;
j =0;
int nctemp621 = (j < ny);
while(nctemp621){
{
i =0;
int nctemp629 = (i < nx);
while(nctemp629){
{
int nctemp636=i;
nctemp636=j*astagg->d[0]+nctemp636;
int nctemp640=i;
nctemp640=j*a->d[0]+nctemp640;
astagg->a[nctemp636] =a->a[nctemp640];
}
int nctemp651 = i + 1;
i =nctemp651;
int nctemp652 = (i < nx);
nctemp629=nctemp652;
}
}
int nctemp664 = j + 1;
j =nctemp664;
int nctemp665 = (j < ny);
nctemp621=nctemp665;
}
j =0;
int nctemp681 = ny - 1;
int nctemp673 = (j < nctemp681);
while(nctemp673){
{
i =0;
int nctemp686 = (i < nx);
while(nctemp686){
{
int nctemp693=i;
nctemp693=j*astagg->d[0]+nctemp693;
int nctemp704=i;
nctemp704=j*a->d[0]+nctemp704;
int nctemp708=i;
int nctemp714 = j + 1;
nctemp708=nctemp714*a->d[0]+nctemp708;
float nctemp715 = a->a[nctemp704] + a->a[nctemp708];
float nctemp716 = 0.5 * nctemp715;
astagg->a[nctemp693] =nctemp716;
}
int nctemp725 = i + 1;
i =nctemp725;
int nctemp726 = (i < nx);
nctemp686=nctemp726;
}
}
int nctemp738 = j + 1;
j =nctemp738;
int nctemp747 = ny - 1;
int nctemp739 = (j < nctemp747);
nctemp673=nctemp739;
}
return 1;
}
int Modelslscoeffs (nctempfloat2 *Qx,nctempfloat2 *Qy,nctempfloat2 *modx,nctempfloat2 *mody,nctempfloat2 *coeff1x,nctempfloat2 *coeff1y,nctempfloat2 *coeff2x,nctempfloat2 *coeff2y,struct model* Model)
{
int Nx;
int Ny;
float tau0;
float tauex;
float tauey;
float tausx;
float tausy;
nctempfloat1 *d1;
nctempfloat1 *d2;
float argx;
float argy;
int i;
int j;
Nx =Model->Nx;
Ny =Model->Ny;
int nctemp763=Nx;
nctempfloat1 *nctemp762;
nctemp762=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp762->d[0]=Nx;
nctemp762->a=(float *)RunMalloc(sizeof(float)*nctemp763);
d1=nctemp762;
int nctemp772=Ny;
nctempfloat1 *nctemp771;
nctemp771=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp771->d[0]=Ny;
nctemp771->a=(float *)RunMalloc(sizeof(float)*nctemp772);
d2=nctemp771;
int nctemp775 = (Model->Freesurface ==1);
if(nctemp775)
{
nctempfloat1* nctemp780= d2;
float nctemp783= Model->Dx;
int nctemp785= Model->Nb;
int nctemp787=Modele(nctemp780,nctemp783,nctemp785);
}
else{
nctempfloat1* nctemp789= d2;
float nctemp792= Model->Dx;
int nctemp794= Model->Nb;
int nctemp796=Modeld(nctemp789,nctemp792,nctemp794);
}
nctempfloat1* nctemp798= d1;
float nctemp801= Model->Dx;
int nctemp803= Model->Nb;
int nctemp805=Modeld(nctemp798,nctemp801,nctemp803);
Model->dx=d1;
Model->dy=d2;
j =0;
int nctemp822 = (j < Ny);
while(nctemp822){
{
i =0;
int nctemp830 = (i < Nx);
while(nctemp830){
{
float nctemp842 = 1.0 / Model->W0;
tau0 =nctemp842;
int nctemp854=i;
nctemp854=j*Qx->d[0]+nctemp854;
float nctemp857 = tau0 / Qx->a[nctemp854];
int nctemp869=i;
nctemp869=j*Qx->d[0]+nctemp869;
int nctemp873=i;
nctemp873=j*Qx->d[0]+nctemp873;
float nctemp876 = Qx->a[nctemp869] * Qx->a[nctemp873];
float nctemp878 = nctemp876 + 1.0;
float nctemp862= nctemp878;
float nctemp879=LibeSqrt(nctemp862);
float nctemp881 = nctemp879 + 1.0;
float nctemp882 = nctemp857 * nctemp881;
tauex =nctemp882;
int nctemp894=i;
nctemp894=j*Qx->d[0]+nctemp894;
float nctemp897 = tau0 / Qx->a[nctemp894];
int nctemp909=i;
nctemp909=j*Qx->d[0]+nctemp909;
int nctemp913=i;
nctemp913=j*Qx->d[0]+nctemp913;
float nctemp916 = Qx->a[nctemp909] * Qx->a[nctemp913];
float nctemp918 = nctemp916 + 1.0;
float nctemp902= nctemp918;
float nctemp919=LibeSqrt(nctemp902);
float nctemp921 = nctemp919 - 1.0;
float nctemp922 = nctemp897 * nctemp921;
tausx =nctemp922;
int nctemp934=i;
nctemp934=j*Qy->d[0]+nctemp934;
float nctemp937 = tau0 / Qy->a[nctemp934];
int nctemp949=i;
nctemp949=j*Qy->d[0]+nctemp949;
int nctemp953=i;
nctemp953=j*Qy->d[0]+nctemp953;
float nctemp956 = Qy->a[nctemp949] * Qy->a[nctemp953];
float nctemp958 = nctemp956 + 1.0;
float nctemp942= nctemp958;
float nctemp959=LibeSqrt(nctemp942);
float nctemp961 = nctemp959 + 1.0;
float nctemp962 = nctemp937 * nctemp961;
tauey =nctemp962;
int nctemp974=i;
nctemp974=j*Qy->d[0]+nctemp974;
float nctemp977 = tau0 / Qy->a[nctemp974];
int nctemp989=i;
nctemp989=j*Qy->d[0]+nctemp989;
int nctemp993=i;
nctemp993=j*Qy->d[0]+nctemp993;
float nctemp996 = Qy->a[nctemp989] * Qy->a[nctemp993];
float nctemp998 = nctemp996 + 1.0;
float nctemp982= nctemp998;
float nctemp999=LibeSqrt(nctemp982);
float nctemp1001 = nctemp999 - 1.0;
float nctemp1002 = nctemp977 * nctemp1001;
tausy =nctemp1002;
float nctemp1011 = 1.0 / tauex;
tauex =nctemp1011;
float nctemp1020 = 1.0 / tauey;
tauey =nctemp1020;
float nctemp1029 = 1.0 / tausx;
tausx =nctemp1029;
float nctemp1038 = 1.0 / tausy;
tausy =nctemp1038;
int nctemp1043=i;
argx =Model->dx->a[nctemp1043];
int nctemp1049=j;
argy =Model->dy->a[nctemp1049];
int nctemp1054=i;
nctemp1054=j*coeff1x->d[0]+nctemp1054;
float nctemp1062= -argx;
float nctemp1061= nctemp1062;
float nctemp1063=LibeExp(nctemp1061);
float nctemp1068= -Model->Dt;
float nctemp1070 = nctemp1068 * tausx;
float nctemp1065= nctemp1070;
float nctemp1071=LibeExp(nctemp1065);
float nctemp1072 = nctemp1063 * nctemp1071;
coeff1x->a[nctemp1054] =nctemp1072;
int nctemp1076=i;
nctemp1076=j*coeff1y->d[0]+nctemp1076;
float nctemp1084= -argy;
float nctemp1083= nctemp1084;
float nctemp1085=LibeExp(nctemp1083);
float nctemp1090= -Model->Dt;
float nctemp1092 = nctemp1090 * tausy;
float nctemp1087= nctemp1092;
float nctemp1093=LibeExp(nctemp1087);
float nctemp1094 = nctemp1085 * nctemp1093;
coeff1y->a[nctemp1076] =nctemp1094;
int nctemp1098=i;
nctemp1098=j*coeff2x->d[0]+nctemp1098;
float nctemp1106 = Model->Dt * tauex;
coeff2x->a[nctemp1098] =nctemp1106;
int nctemp1110=i;
nctemp1110=j*coeff2y->d[0]+nctemp1110;
float nctemp1118 = Model->Dt * tauey;
coeff2y->a[nctemp1110] =nctemp1118;
int nctemp1122=i;
nctemp1122=j*modx->d[0]+nctemp1122;
float nctemp1133= -argx;
float nctemp1132= nctemp1133;
float nctemp1134=LibeExp(nctemp1132);
int nctemp1136=i;
nctemp1136=j*modx->d[0]+nctemp1136;
float nctemp1139 = nctemp1134 * modx->a[nctemp1136];
float nctemp1149 = tausx / tauex;
float nctemp1150 = 1.0 - nctemp1149;
float nctemp1151 = nctemp1139 * nctemp1150;
modx->a[nctemp1122] =nctemp1151;
int nctemp1155=i;
nctemp1155=j*mody->d[0]+nctemp1155;
float nctemp1166= -argy;
float nctemp1165= nctemp1166;
float nctemp1167=LibeExp(nctemp1165);
int nctemp1169=i;
nctemp1169=j*mody->d[0]+nctemp1169;
float nctemp1172 = nctemp1167 * mody->a[nctemp1169];
float nctemp1182 = tausy / tauey;
float nctemp1183 = 1.0 - nctemp1182;
float nctemp1184 = nctemp1172 * nctemp1183;
mody->a[nctemp1155] =nctemp1184;
}
int nctemp1193 = i + 1;
i =nctemp1193;
int nctemp1194 = (i < Nx);
nctemp830=nctemp1194;
}
}
int nctemp1206 = j + 1;
j =nctemp1206;
int nctemp1207 = (j < Ny);
nctemp822=nctemp1207;
}
RunFree(d1->a);
RunFree(d1);
RunFree(d2->a);
RunFree(d2);
return 1;
}
struct model* Modelsls (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Freesurface)
{
struct model* Model;
int Nx;
int Ny;
int i;
int j;
nctempfloat2 *wrk;
nctempfloat2 *wrk2;
int fd;
int nb;
struct model *nctemp1222=(struct model*)RunMalloc(sizeof(struct model));
Model =nctemp1222;
Model->Freesurface =Freesurface;
Model->Dx =Dx;
Model->Dt =Dt;
int nctemp1240=vp->d[0];Model->Nx =nctemp1240;
int nctemp1248=vp->d[1];Model->Ny =nctemp1248;
Model->Nb =Nb;
Model->W0 =W0;
Nx =Model->Nx;
Ny =Model->Ny;
Model->Qlx=Qlx;
Model->Qly=Qly;
Model->Qmx=Qmx;
Model->Qmy=Qmy;
Model->Qpx=Qpx;
Model->Qpy=Qpy;
int nctemp1310=Nx;
nctemp1310=nctemp1310*Ny;
nctempfloat2 *nctemp1309;
nctemp1309=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1309->d[0]=Nx;
nctemp1309->d[1]=Ny;
nctemp1309->a=(float *)RunMalloc(sizeof(float)*nctemp1310);
Model->Rho=nctemp1309;
int nctemp1321=Nx;
nctemp1321=nctemp1321*Ny;
nctempfloat2 *nctemp1320;
nctemp1320=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1320->d[0]=Nx;
nctemp1320->d[1]=Ny;
nctemp1320->a=(float *)RunMalloc(sizeof(float)*nctemp1321);
Model->Rhox=nctemp1320;
int nctemp1332=Nx;
nctemp1332=nctemp1332*Ny;
nctempfloat2 *nctemp1331;
nctemp1331=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1331->d[0]=Nx;
nctemp1331->d[1]=Ny;
nctemp1331->a=(float *)RunMalloc(sizeof(float)*nctemp1332);
Model->Rhoy=nctemp1331;
int nctemp1343=Nx;
nctemp1343=nctemp1343*Ny;
nctempfloat2 *nctemp1342;
nctemp1342=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1342->d[0]=Nx;
nctemp1342->d[1]=Ny;
nctemp1342->a=(float *)RunMalloc(sizeof(float)*nctemp1343);
Model->Mu=nctemp1342;
int nctemp1354=Nx;
nctemp1354=nctemp1354*Ny;
nctempfloat2 *nctemp1353;
nctemp1353=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1353->d[0]=Nx;
nctemp1353->d[1]=Ny;
nctemp1353->a=(float *)RunMalloc(sizeof(float)*nctemp1354);
Model->Muxy=nctemp1353;
int nctemp1365=Nx;
nctemp1365=nctemp1365*Ny;
nctempfloat2 *nctemp1364;
nctemp1364=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1364->d[0]=Nx;
nctemp1364->d[1]=Ny;
nctemp1364->a=(float *)RunMalloc(sizeof(float)*nctemp1365);
Model->Lambda=nctemp1364;
int nctemp1376=Nx;
nctemp1376=nctemp1376*Ny;
nctempfloat2 *nctemp1375;
nctemp1375=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1375->d[0]=Nx;
nctemp1375->d[1]=Ny;
nctemp1375->a=(float *)RunMalloc(sizeof(float)*nctemp1376);
Model->Dlambdax=nctemp1375;
int nctemp1387=Nx;
nctemp1387=nctemp1387*Ny;
nctempfloat2 *nctemp1386;
nctemp1386=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1386->d[0]=Nx;
nctemp1386->d[1]=Ny;
nctemp1386->a=(float *)RunMalloc(sizeof(float)*nctemp1387);
Model->Dlambday=nctemp1386;
int nctemp1398=Nx;
nctemp1398=nctemp1398*Ny;
nctempfloat2 *nctemp1397;
nctemp1397=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1397->d[0]=Nx;
nctemp1397->d[1]=Ny;
nctemp1397->a=(float *)RunMalloc(sizeof(float)*nctemp1398);
Model->Dmux=nctemp1397;
int nctemp1409=Nx;
nctemp1409=nctemp1409*Ny;
nctempfloat2 *nctemp1408;
nctemp1408=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1408->d[0]=Nx;
nctemp1408->d[1]=Ny;
nctemp1408->a=(float *)RunMalloc(sizeof(float)*nctemp1409);
Model->Dmuy=nctemp1408;
int nctemp1420=Nx;
nctemp1420=nctemp1420*Ny;
nctempfloat2 *nctemp1419;
nctemp1419=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1419->d[0]=Nx;
nctemp1419->d[1]=Ny;
nctemp1419->a=(float *)RunMalloc(sizeof(float)*nctemp1420);
Model->Dmuxyx=nctemp1419;
int nctemp1431=Nx;
nctemp1431=nctemp1431*Ny;
nctempfloat2 *nctemp1430;
nctemp1430=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1430->d[0]=Nx;
nctemp1430->d[1]=Ny;
nctemp1430->a=(float *)RunMalloc(sizeof(float)*nctemp1431);
Model->Dmuxyy=nctemp1430;
int nctemp1442=Nx;
nctemp1442=nctemp1442*Ny;
nctempfloat2 *nctemp1441;
nctemp1441=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1441->d[0]=Nx;
nctemp1441->d[1]=Ny;
nctemp1441->a=(float *)RunMalloc(sizeof(float)*nctemp1442);
Model->Drhopx=nctemp1441;
int nctemp1453=Nx;
nctemp1453=nctemp1453*Ny;
nctempfloat2 *nctemp1452;
nctemp1452=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1452->d[0]=Nx;
nctemp1452->d[1]=Ny;
nctemp1452->a=(float *)RunMalloc(sizeof(float)*nctemp1453);
Model->Drhopy=nctemp1452;
int nctemp1464=Nx;
nctemp1464=nctemp1464*Ny;
nctempfloat2 *nctemp1463;
nctemp1463=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1463->d[0]=Nx;
nctemp1463->d[1]=Ny;
nctemp1463->a=(float *)RunMalloc(sizeof(float)*nctemp1464);
Model->Alpha1x=nctemp1463;
int nctemp1475=Nx;
nctemp1475=nctemp1475*Ny;
nctempfloat2 *nctemp1474;
nctemp1474=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1474->d[0]=Nx;
nctemp1474->d[1]=Ny;
nctemp1474->a=(float *)RunMalloc(sizeof(float)*nctemp1475);
Model->Alpha1y=nctemp1474;
int nctemp1486=Nx;
nctemp1486=nctemp1486*Ny;
nctempfloat2 *nctemp1485;
nctemp1485=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1485->d[0]=Nx;
nctemp1485->d[1]=Ny;
nctemp1485->a=(float *)RunMalloc(sizeof(float)*nctemp1486);
Model->Alpha2x=nctemp1485;
int nctemp1497=Nx;
nctemp1497=nctemp1497*Ny;
nctempfloat2 *nctemp1496;
nctemp1496=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1496->d[0]=Nx;
nctemp1496->d[1]=Ny;
nctemp1496->a=(float *)RunMalloc(sizeof(float)*nctemp1497);
Model->Alpha2y=nctemp1496;
int nctemp1508=Nx;
nctemp1508=nctemp1508*Ny;
nctempfloat2 *nctemp1507;
nctemp1507=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1507->d[0]=Nx;
nctemp1507->d[1]=Ny;
nctemp1507->a=(float *)RunMalloc(sizeof(float)*nctemp1508);
Model->Beta1x=nctemp1507;
int nctemp1519=Nx;
nctemp1519=nctemp1519*Ny;
nctempfloat2 *nctemp1518;
nctemp1518=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1518->d[0]=Nx;
nctemp1518->d[1]=Ny;
nctemp1518->a=(float *)RunMalloc(sizeof(float)*nctemp1519);
Model->Beta1y=nctemp1518;
int nctemp1530=Nx;
nctemp1530=nctemp1530*Ny;
nctempfloat2 *nctemp1529;
nctemp1529=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1529->d[0]=Nx;
nctemp1529->d[1]=Ny;
nctemp1529->a=(float *)RunMalloc(sizeof(float)*nctemp1530);
Model->Beta2x=nctemp1529;
int nctemp1541=Nx;
nctemp1541=nctemp1541*Ny;
nctempfloat2 *nctemp1540;
nctemp1540=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1540->d[0]=Nx;
nctemp1540->d[1]=Ny;
nctemp1540->a=(float *)RunMalloc(sizeof(float)*nctemp1541);
Model->Beta2y=nctemp1540;
int nctemp1552=Nx;
nctemp1552=nctemp1552*Ny;
nctempfloat2 *nctemp1551;
nctemp1551=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1551->d[0]=Nx;
nctemp1551->d[1]=Ny;
nctemp1551->a=(float *)RunMalloc(sizeof(float)*nctemp1552);
Model->Eta1x=nctemp1551;
int nctemp1563=Nx;
nctemp1563=nctemp1563*Ny;
nctempfloat2 *nctemp1562;
nctemp1562=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1562->d[0]=Nx;
nctemp1562->d[1]=Ny;
nctemp1562->a=(float *)RunMalloc(sizeof(float)*nctemp1563);
Model->Eta1y=nctemp1562;
int nctemp1574=Nx;
nctemp1574=nctemp1574*Ny;
nctempfloat2 *nctemp1573;
nctemp1573=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1573->d[0]=Nx;
nctemp1573->d[1]=Ny;
nctemp1573->a=(float *)RunMalloc(sizeof(float)*nctemp1574);
Model->Eta2x=nctemp1573;
int nctemp1585=Nx;
nctemp1585=nctemp1585*Ny;
nctempfloat2 *nctemp1584;
nctemp1584=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1584->d[0]=Nx;
nctemp1584->d[1]=Ny;
nctemp1584->a=(float *)RunMalloc(sizeof(float)*nctemp1585);
Model->Eta2y=nctemp1584;
j =0;
int nctemp1594 = (j < Ny);
while(nctemp1594){
{
i =0;
int nctemp1602 = (i < Nx);
while(nctemp1602){
{
int nctemp1609=i;
nctemp1609=j*Model->Rho->d[0]+nctemp1609;
int nctemp1617=i;
nctemp1617=j*rho->d[0]+nctemp1617;
float nctemp1620 = 1.0 / rho->a[nctemp1617];
Model->Rho->a[nctemp1609] =nctemp1620;
int nctemp1624=i;
nctemp1624=j*Model->Mu->d[0]+nctemp1624;
int nctemp1634=i;
nctemp1634=j*rho->d[0]+nctemp1634;
int nctemp1638=i;
nctemp1638=j*vs->d[0]+nctemp1638;
float nctemp1641 = rho->a[nctemp1634] * vs->a[nctemp1638];
int nctemp1643=i;
nctemp1643=j*vs->d[0]+nctemp1643;
float nctemp1646 = nctemp1641 * vs->a[nctemp1643];
Model->Mu->a[nctemp1624] =nctemp1646;
int nctemp1653 = (Freesurface ==1);
int nctemp1650 = (nctemp1653 && j);
int nctemp1647 = (nctemp1650 ==0);
if(nctemp1647)
{
int nctemp1662=i;
nctemp1662=j*Model->Mu->d[0]+nctemp1662;
int nctemp1676=i;
nctemp1676=j*rho->d[0]+nctemp1676;
float nctemp1679 = 0.5 * rho->a[nctemp1676];
int nctemp1681=i;
nctemp1681=j*vs->d[0]+nctemp1681;
float nctemp1684 = nctemp1679 * vs->a[nctemp1681];
int nctemp1686=i;
nctemp1686=j*vs->d[0]+nctemp1686;
float nctemp1689 = nctemp1684 * vs->a[nctemp1686];
Model->Mu->a[nctemp1662] =nctemp1689;
}
int nctemp1693=i;
nctemp1693=j*Model->Lambda->d[0]+nctemp1693;
int nctemp1700=i;
nctemp1700=j*rho->d[0]+nctemp1700;
int nctemp1710=i;
nctemp1710=j*vp->d[0]+nctemp1710;
int nctemp1714=i;
nctemp1714=j*vp->d[0]+nctemp1714;
float nctemp1717 = vp->a[nctemp1710] * vp->a[nctemp1714];
int nctemp1726=i;
nctemp1726=j*vs->d[0]+nctemp1726;
float nctemp1729 = 2.0 * vs->a[nctemp1726];
int nctemp1731=i;
nctemp1731=j*vs->d[0]+nctemp1731;
float nctemp1734 = nctemp1729 * vs->a[nctemp1731];
float nctemp1735 = nctemp1717 - nctemp1734;
float nctemp1736 = rho->a[nctemp1700] * nctemp1735;
Model->Lambda->a[nctemp1693] =nctemp1736;
int nctemp1743 = (Freesurface ==1);
int nctemp1740 = (nctemp1743 && j);
int nctemp1737 = (nctemp1740 ==0);
if(nctemp1737)
{
int nctemp1752=i;
nctemp1752=j*Model->Lambda->d[0]+nctemp1752;
Model->Lambda->a[nctemp1752] =0.0;
}
int nctemp1759=i;
nctemp1759=j*Model->Alpha1x->d[0]+nctemp1759;
Model->Alpha1x->a[nctemp1759] =0.0;
int nctemp1766=i;
nctemp1766=j*Model->Alpha1y->d[0]+nctemp1766;
Model->Alpha1y->a[nctemp1766] =0.0;
int nctemp1773=i;
nctemp1773=j*Model->Alpha2x->d[0]+nctemp1773;
Model->Alpha2x->a[nctemp1773] =0.0;
int nctemp1780=i;
nctemp1780=j*Model->Alpha2y->d[0]+nctemp1780;
Model->Alpha2y->a[nctemp1780] =0.0;
int nctemp1787=i;
nctemp1787=j*Model->Beta1x->d[0]+nctemp1787;
Model->Beta1x->a[nctemp1787] =0.0;
int nctemp1794=i;
nctemp1794=j*Model->Beta1y->d[0]+nctemp1794;
Model->Beta1y->a[nctemp1794] =0.0;
int nctemp1801=i;
nctemp1801=j*Model->Beta2x->d[0]+nctemp1801;
Model->Beta2x->a[nctemp1801] =0.0;
int nctemp1808=i;
nctemp1808=j*Model->Beta2y->d[0]+nctemp1808;
Model->Beta2y->a[nctemp1808] =0.0;
int nctemp1815=i;
nctemp1815=j*Model->Eta1x->d[0]+nctemp1815;
Model->Eta1x->a[nctemp1815] =0.0;
int nctemp1822=i;
nctemp1822=j*Model->Eta1y->d[0]+nctemp1822;
Model->Eta1y->a[nctemp1822] =0.0;
int nctemp1829=i;
nctemp1829=j*Model->Eta2x->d[0]+nctemp1829;
Model->Eta2x->a[nctemp1829] =0.0;
int nctemp1836=i;
nctemp1836=j*Model->Eta2y->d[0]+nctemp1836;
Model->Eta2y->a[nctemp1836] =0.0;
int nctemp1843=i;
nctemp1843=j*Model->Dlambdax->d[0]+nctemp1843;
int nctemp1847=i;
nctemp1847=j*Model->Lambda->d[0]+nctemp1847;
Model->Dlambdax->a[nctemp1843] =Model->Lambda->a[nctemp1847];
int nctemp1853=i;
nctemp1853=j*Model->Dlambday->d[0]+nctemp1853;
int nctemp1857=i;
nctemp1857=j*Model->Lambda->d[0]+nctemp1857;
Model->Dlambday->a[nctemp1853] =Model->Lambda->a[nctemp1857];
int nctemp1863=i;
nctemp1863=j*Model->Dmux->d[0]+nctemp1863;
int nctemp1867=i;
nctemp1867=j*Model->Mu->d[0]+nctemp1867;
Model->Dmux->a[nctemp1863] =Model->Mu->a[nctemp1867];
int nctemp1873=i;
nctemp1873=j*Model->Dmuy->d[0]+nctemp1873;
int nctemp1877=i;
nctemp1877=j*Model->Mu->d[0]+nctemp1877;
Model->Dmuy->a[nctemp1873] =Model->Mu->a[nctemp1877];
int nctemp1883=i;
nctemp1883=j*Model->Drhopx->d[0]+nctemp1883;
int nctemp1887=i;
nctemp1887=j*Model->Rho->d[0]+nctemp1887;
Model->Drhopx->a[nctemp1883] =Model->Rho->a[nctemp1887];
int nctemp1893=i;
nctemp1893=j*Model->Drhopy->d[0]+nctemp1893;
int nctemp1897=i;
nctemp1897=j*Model->Rho->d[0]+nctemp1897;
Model->Drhopy->a[nctemp1893] =Model->Rho->a[nctemp1897];
}
int nctemp1908 = i + 1;
i =nctemp1908;
int nctemp1909 = (i < Nx);
nctemp1602=nctemp1909;
}
}
int nctemp1921 = j + 1;
j =nctemp1921;
int nctemp1922 = (j < Ny);
nctemp1594=nctemp1922;
}
nctempfloat2* nctemp1927= Model->Qlx;
nctempfloat2* nctemp1930= Model->Qly;
nctempfloat2* nctemp1933= Model->Dlambdax;
nctempfloat2* nctemp1936= Model->Dlambday;
nctempfloat2* nctemp1939= Model->Alpha1x;
nctempfloat2* nctemp1942= Model->Alpha1y;
nctempfloat2* nctemp1945= Model->Alpha2x;
nctempfloat2* nctemp1948= Model->Alpha2y;
struct model* nctemp1951= Model;
int nctemp1953=Modelslscoeffs(nctemp1927,nctemp1930,nctemp1933,nctemp1936,nctemp1939,nctemp1942,nctemp1945,nctemp1948,nctemp1951);
nctempfloat2* nctemp1955= Model->Qmx;
nctempfloat2* nctemp1958= Model->Qmy;
nctempfloat2* nctemp1961= Model->Dmux;
nctempfloat2* nctemp1964= Model->Dmuy;
nctempfloat2* nctemp1967= Model->Beta1x;
nctempfloat2* nctemp1970= Model->Beta1y;
nctempfloat2* nctemp1973= Model->Beta2x;
nctempfloat2* nctemp1976= Model->Beta2y;
struct model* nctemp1979= Model;
int nctemp1981=Modelslscoeffs(nctemp1955,nctemp1958,nctemp1961,nctemp1964,nctemp1967,nctemp1970,nctemp1973,nctemp1976,nctemp1979);
nctempfloat2* nctemp1983= Model->Qpx;
nctempfloat2* nctemp1986= Model->Qpy;
nctempfloat2* nctemp1989= Model->Drhopx;
nctempfloat2* nctemp1992= Model->Drhopy;
nctempfloat2* nctemp1995= Model->Eta1x;
nctempfloat2* nctemp1998= Model->Eta1y;
nctempfloat2* nctemp2001= Model->Eta2x;
nctempfloat2* nctemp2004= Model->Eta2y;
struct model* nctemp2007= Model;
int nctemp2009=Modelslscoeffs(nctemp1983,nctemp1986,nctemp1989,nctemp1992,nctemp1995,nctemp1998,nctemp2001,nctemp2004,nctemp2007);
struct nctempchar1 *nctemp2016;
static struct nctempchar1 nctemp2017 = {{ 8}, (char*)"ax1.bin\0"};
nctemp2016=&nctemp2017;
nctempchar1* nctemp2014= nctemp2016;
struct nctempchar1 *nctemp2020;
static struct nctempchar1 nctemp2021 = {{ 2}, (char*)"w\0"};
nctemp2020=&nctemp2021;
nctempchar1* nctemp2018= nctemp2020;
int nctemp2022=LibeOpen(nctemp2014,nctemp2018);
fd =nctemp2022;
int nctemp2034 = Model->Nx * Model->Ny;
int nctemp2036 = nctemp2034 * 4;
nb =nctemp2036;
int nctemp2038= fd;
int nctemp2040= nb;
nctempchar1 nctemp2045;
nctempchar1 *nctemp2044;
nctemp2045=*(nctempchar1*)(Model->Alpha1x);
nctemp2045.d[0]=nb;
nctemp2044=&nctemp2045;
nctempchar1* nctemp2042= nctemp2044;
int nctemp2049=LibeWrite(nctemp2038,nctemp2040,nctemp2042);
int nctemp2051= fd;
int nctemp2053=LibeClose(nctemp2051);
struct nctempchar1 *nctemp2060;
static struct nctempchar1 nctemp2061 = {{ 8}, (char*)"ax2.bin\0"};
nctemp2060=&nctemp2061;
nctempchar1* nctemp2058= nctemp2060;
struct nctempchar1 *nctemp2064;
static struct nctempchar1 nctemp2065 = {{ 2}, (char*)"w\0"};
nctemp2064=&nctemp2065;
nctempchar1* nctemp2062= nctemp2064;
int nctemp2066=LibeOpen(nctemp2058,nctemp2062);
fd =nctemp2066;
int nctemp2078 = Model->Nx * Model->Ny;
int nctemp2080 = nctemp2078 * 4;
nb =nctemp2080;
int nctemp2082= fd;
int nctemp2084= nb;
nctempchar1 nctemp2089;
nctempchar1 *nctemp2088;
nctemp2089=*(nctempchar1*)(Model->Alpha2x);
nctemp2089.d[0]=nb;
nctemp2088=&nctemp2089;
nctempchar1* nctemp2086= nctemp2088;
int nctemp2093=LibeWrite(nctemp2082,nctemp2084,nctemp2086);
int nctemp2095= fd;
int nctemp2097=LibeClose(nctemp2095);
struct nctempchar1 *nctemp2104;
static struct nctempchar1 nctemp2105 = {{ 8}, (char*)"bx1.bin\0"};
nctemp2104=&nctemp2105;
nctempchar1* nctemp2102= nctemp2104;
struct nctempchar1 *nctemp2108;
static struct nctempchar1 nctemp2109 = {{ 2}, (char*)"w\0"};
nctemp2108=&nctemp2109;
nctempchar1* nctemp2106= nctemp2108;
int nctemp2110=LibeOpen(nctemp2102,nctemp2106);
fd =nctemp2110;
int nctemp2122 = Model->Nx * Model->Ny;
int nctemp2124 = nctemp2122 * 4;
nb =nctemp2124;
int nctemp2126= fd;
int nctemp2128= nb;
nctempchar1 nctemp2133;
nctempchar1 *nctemp2132;
nctemp2133=*(nctempchar1*)(Model->Beta1x);
nctemp2133.d[0]=nb;
nctemp2132=&nctemp2133;
nctempchar1* nctemp2130= nctemp2132;
int nctemp2137=LibeWrite(nctemp2126,nctemp2128,nctemp2130);
int nctemp2139= fd;
int nctemp2141=LibeClose(nctemp2139);
struct nctempchar1 *nctemp2148;
static struct nctempchar1 nctemp2149 = {{ 8}, (char*)"bx2.bin\0"};
nctemp2148=&nctemp2149;
nctempchar1* nctemp2146= nctemp2148;
struct nctempchar1 *nctemp2152;
static struct nctempchar1 nctemp2153 = {{ 2}, (char*)"w\0"};
nctemp2152=&nctemp2153;
nctempchar1* nctemp2150= nctemp2152;
int nctemp2154=LibeOpen(nctemp2146,nctemp2150);
fd =nctemp2154;
int nctemp2166 = Model->Nx * Model->Ny;
int nctemp2168 = nctemp2166 * 4;
nb =nctemp2168;
int nctemp2170= fd;
int nctemp2172= nb;
nctempchar1 nctemp2177;
nctempchar1 *nctemp2176;
nctemp2177=*(nctempchar1*)(Model->Beta2x);
nctemp2177.d[0]=nb;
nctemp2176=&nctemp2177;
nctempchar1* nctemp2174= nctemp2176;
int nctemp2181=LibeWrite(nctemp2170,nctemp2172,nctemp2174);
int nctemp2183= fd;
int nctemp2185=LibeClose(nctemp2183);
struct nctempchar1 *nctemp2192;
static struct nctempchar1 nctemp2193 = {{ 7}, (char*)"lx.bin\0"};
nctemp2192=&nctemp2193;
nctempchar1* nctemp2190= nctemp2192;
struct nctempchar1 *nctemp2196;
static struct nctempchar1 nctemp2197 = {{ 2}, (char*)"w\0"};
nctemp2196=&nctemp2197;
nctempchar1* nctemp2194= nctemp2196;
int nctemp2198=LibeOpen(nctemp2190,nctemp2194);
fd =nctemp2198;
int nctemp2210 = Model->Nx * Model->Ny;
int nctemp2212 = nctemp2210 * 4;
nb =nctemp2212;
int nctemp2214= fd;
int nctemp2216= nb;
nctempchar1 nctemp2221;
nctempchar1 *nctemp2220;
nctemp2221=*(nctempchar1*)(Model->Dlambdax);
nctemp2221.d[0]=nb;
nctemp2220=&nctemp2221;
nctempchar1* nctemp2218= nctemp2220;
int nctemp2225=LibeWrite(nctemp2214,nctemp2216,nctemp2218);
int nctemp2227= fd;
int nctemp2229=LibeClose(nctemp2227);
nctempfloat2* nctemp2231= Model->Rho;
nctempfloat2* nctemp2234= Model->Rhox;
int nctemp2237=Modelstaggerx(nctemp2231,nctemp2234);
nctempfloat2* nctemp2239= Model->Rho;
nctempfloat2* nctemp2242= Model->Rhoy;
int nctemp2245=Modelstaggery(nctemp2239,nctemp2242);
nctempfloat2* nctemp2251= Model->Drhopx;
nctempfloat2* nctemp2254=Modelcopy(nctemp2251);
wrk=nctemp2254;
nctempfloat2* nctemp2256= wrk;
nctempfloat2* nctemp2259= Model->Drhopx;
int nctemp2262=Modelstaggerx(nctemp2256,nctemp2259);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2271= Model->Drhopy;
nctempfloat2* nctemp2274=Modelcopy(nctemp2271);
wrk=nctemp2274;
nctempfloat2* nctemp2276= wrk;
nctempfloat2* nctemp2279= Model->Drhopy;
int nctemp2282=Modelstaggery(nctemp2276,nctemp2279);
nctempfloat2* nctemp2284= Model->Mu;
nctempfloat2* nctemp2287= wrk;
int nctemp2290=Modelstaggerx(nctemp2284,nctemp2287);
nctempfloat2* nctemp2292= wrk;
nctempfloat2* nctemp2295= Model->Muxy;
int nctemp2298=Modelstaggery(nctemp2292,nctemp2295);
nctempfloat2* nctemp2300= Model->Dmux;
nctempfloat2* nctemp2303= wrk;
int nctemp2306=Modelstaggerx(nctemp2300,nctemp2303);
nctempfloat2* nctemp2308= wrk;
nctempfloat2* nctemp2311= Model->Dmuxyx;
int nctemp2314=Modelstaggery(nctemp2308,nctemp2311);
nctempfloat2* nctemp2316= Model->Dmuy;
nctempfloat2* nctemp2319= wrk;
int nctemp2322=Modelstaggerx(nctemp2316,nctemp2319);
nctempfloat2* nctemp2324= wrk;
nctempfloat2* nctemp2327= Model->Dmuxyy;
int nctemp2330=Modelstaggery(nctemp2324,nctemp2327);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2339= Model->Beta1x;
nctempfloat2* nctemp2342=Modelcopy(nctemp2339);
wrk=nctemp2342;
int nctemp2349=Model->Nx;
nctemp2349=nctemp2349*Model->Ny;
nctempfloat2 *nctemp2348;
nctemp2348=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2348->d[0]=Model->Nx;
nctemp2348->d[1]=Model->Ny;
nctemp2348->a=(float *)RunMalloc(sizeof(float)*nctemp2349);
wrk2=nctemp2348;
nctempfloat2* nctemp2355= wrk;
nctempfloat2* nctemp2358= wrk2;
int nctemp2361=Modelstaggery(nctemp2355,nctemp2358);
nctempfloat2* nctemp2363= wrk2;
nctempfloat2* nctemp2366= Model->Beta1x;
int nctemp2369=Modelstaggerx(nctemp2363,nctemp2366);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2378= Model->Beta2x;
nctempfloat2* nctemp2381=Modelcopy(nctemp2378);
wrk=nctemp2381;
int nctemp2388=Model->Nx;
nctemp2388=nctemp2388*Model->Ny;
nctempfloat2 *nctemp2387;
nctemp2387=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2387->d[0]=Model->Nx;
nctemp2387->d[1]=Model->Ny;
nctemp2387->a=(float *)RunMalloc(sizeof(float)*nctemp2388);
wrk2=nctemp2387;
nctempfloat2* nctemp2394= wrk;
nctempfloat2* nctemp2397= wrk2;
int nctemp2400=Modelstaggery(nctemp2394,nctemp2397);
nctempfloat2* nctemp2402= wrk2;
nctempfloat2* nctemp2405= Model->Beta2x;
int nctemp2408=Modelstaggerx(nctemp2402,nctemp2405);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2420= Model->Beta1y;
nctempfloat2* nctemp2423=Modelcopy(nctemp2420);
wrk=nctemp2423;
int nctemp2430=Model->Nx;
nctemp2430=nctemp2430*Model->Ny;
nctempfloat2 *nctemp2429;
nctemp2429=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2429->d[0]=Model->Nx;
nctemp2429->d[1]=Model->Ny;
nctemp2429->a=(float *)RunMalloc(sizeof(float)*nctemp2430);
wrk2=nctemp2429;
nctempfloat2* nctemp2436= wrk;
nctempfloat2* nctemp2439= wrk2;
int nctemp2442=Modelstaggery(nctemp2436,nctemp2439);
nctempfloat2* nctemp2444= wrk2;
nctempfloat2* nctemp2447= Model->Beta1y;
int nctemp2450=Modelstaggerx(nctemp2444,nctemp2447);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2459= Model->Beta2y;
nctempfloat2* nctemp2462=Modelcopy(nctemp2459);
wrk=nctemp2462;
int nctemp2469=Model->Nx;
nctemp2469=nctemp2469*Model->Ny;
nctempfloat2 *nctemp2468;
nctemp2468=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2468->d[0]=Model->Nx;
nctemp2468->d[1]=Model->Ny;
nctemp2468->a=(float *)RunMalloc(sizeof(float)*nctemp2469);
wrk2=nctemp2468;
nctempfloat2* nctemp2475= wrk;
nctempfloat2* nctemp2478= wrk2;
int nctemp2481=Modelstaggery(nctemp2475,nctemp2478);
nctempfloat2* nctemp2483= wrk2;
nctempfloat2* nctemp2486= Model->Beta2y;
int nctemp2489=Modelstaggerx(nctemp2483,nctemp2486);
RunFree(wrk->a);
RunFree(wrk);
RunFree(wrk2->a);
RunFree(wrk2);
nctempfloat2* nctemp2501= Model->Eta1x;
nctempfloat2* nctemp2504=Modelcopy(nctemp2501);
wrk=nctemp2504;
nctempfloat2* nctemp2506= wrk;
nctempfloat2* nctemp2509= Model->Eta1x;
int nctemp2512=Modelstaggerx(nctemp2506,nctemp2509);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2521= Model->Eta2x;
nctempfloat2* nctemp2524=Modelcopy(nctemp2521);
wrk=nctemp2524;
nctempfloat2* nctemp2526= wrk;
nctempfloat2* nctemp2529= Model->Eta2x;
int nctemp2532=Modelstaggerx(nctemp2526,nctemp2529);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2541= Model->Eta1y;
nctempfloat2* nctemp2544=Modelcopy(nctemp2541);
wrk=nctemp2544;
nctempfloat2* nctemp2546= wrk;
nctempfloat2* nctemp2549= Model->Eta1y;
int nctemp2552=Modelstaggery(nctemp2546,nctemp2549);
RunFree(wrk->a);
RunFree(wrk);
nctempfloat2* nctemp2561= Model->Eta2y;
nctempfloat2* nctemp2564=Modelcopy(nctemp2561);
wrk=nctemp2564;
nctempfloat2* nctemp2566= wrk;
nctempfloat2* nctemp2569= Model->Eta2y;
int nctemp2572=Modelstaggery(nctemp2566,nctemp2569);
RunFree(wrk->a);
RunFree(wrk);
return Model;
}
struct model* ModelNew (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Rheol,int Freesurface)
{
struct model* m;
int fd;
int nb;
int Nx;
int Ny;
int nctemp2581=Qlx->d[0];Nx =nctemp2581;
int nctemp2589=Qlx->d[1];Ny =nctemp2589;
struct nctempchar1 *nctemp2596;
static struct nctempchar1 nctemp2597 = {{ 8}, (char*)"Nx,Ny: \0"};
nctemp2596=&nctemp2597;
nctempchar1* nctemp2594= nctemp2596;
int nctemp2598=LibePs(nctemp2594);
int nctemp2600= Nx;
int nctemp2602=LibePi(nctemp2600);
struct nctempchar1 *nctemp2606;
static struct nctempchar1 nctemp2607 = {{ 2}, (char*)" \0"};
nctemp2606=&nctemp2607;
nctempchar1* nctemp2604= nctemp2606;
int nctemp2608=LibePs(nctemp2604);
int nctemp2610= Ny;
int nctemp2612=LibePi(nctemp2610);
struct nctempchar1 *nctemp2616;
static struct nctempchar1 nctemp2617 = {{ 3}, (char*)"\n\0"};
nctemp2616=&nctemp2617;
nctempchar1* nctemp2614= nctemp2616;
int nctemp2618=LibePs(nctemp2614);
struct nctempchar1 *nctemp2625;
static struct nctempchar1 nctemp2626 = {{ 8}, (char*)"qlx.bin\0"};
nctemp2625=&nctemp2626;
nctempchar1* nctemp2623= nctemp2625;
struct nctempchar1 *nctemp2629;
static struct nctempchar1 nctemp2630 = {{ 2}, (char*)"w\0"};
nctemp2629=&nctemp2630;
nctempchar1* nctemp2627= nctemp2629;
int nctemp2631=LibeOpen(nctemp2623,nctemp2627);
fd =nctemp2631;
int nctemp2643 = Nx * Ny;
int nctemp2645 = nctemp2643 * 4;
nb =nctemp2645;
int nctemp2647= fd;
int nctemp2649= nb;
nctempchar1 nctemp2654;
nctempchar1 *nctemp2653;
nctemp2654=*(nctempchar1*)(Qlx);
nctemp2654.d[0]=nb;
nctemp2653=&nctemp2654;
nctempchar1* nctemp2651= nctemp2653;
int nctemp2658=LibeWrite(nctemp2647,nctemp2649,nctemp2651);
int nctemp2660= fd;
int nctemp2662=LibeClose(nctemp2660);
struct nctempchar1 *nctemp2669;
static struct nctempchar1 nctemp2670 = {{ 8}, (char*)"qly.bin\0"};
nctemp2669=&nctemp2670;
nctempchar1* nctemp2667= nctemp2669;
struct nctempchar1 *nctemp2673;
static struct nctempchar1 nctemp2674 = {{ 2}, (char*)"w\0"};
nctemp2673=&nctemp2674;
nctempchar1* nctemp2671= nctemp2673;
int nctemp2675=LibeOpen(nctemp2667,nctemp2671);
fd =nctemp2675;
int nctemp2687 = Nx * Ny;
int nctemp2689 = nctemp2687 * 4;
nb =nctemp2689;
int nctemp2691= fd;
int nctemp2693= nb;
nctempchar1 nctemp2698;
nctempchar1 *nctemp2697;
nctemp2698=*(nctempchar1*)(Qly);
nctemp2698.d[0]=nb;
nctemp2697=&nctemp2698;
nctempchar1* nctemp2695= nctemp2697;
int nctemp2702=LibeWrite(nctemp2691,nctemp2693,nctemp2695);
int nctemp2704= fd;
int nctemp2706=LibeClose(nctemp2704);
struct nctempchar1 *nctemp2713;
static struct nctempchar1 nctemp2714 = {{ 8}, (char*)"vvp.bin\0"};
nctemp2713=&nctemp2714;
nctempchar1* nctemp2711= nctemp2713;
struct nctempchar1 *nctemp2717;
static struct nctempchar1 nctemp2718 = {{ 2}, (char*)"w\0"};
nctemp2717=&nctemp2718;
nctempchar1* nctemp2715= nctemp2717;
int nctemp2719=LibeOpen(nctemp2711,nctemp2715);
fd =nctemp2719;
int nctemp2731 = Nx * Ny;
int nctemp2733 = nctemp2731 * 4;
nb =nctemp2733;
int nctemp2735= fd;
int nctemp2737= nb;
nctempchar1 nctemp2742;
nctempchar1 *nctemp2741;
nctemp2742=*(nctempchar1*)(vp);
nctemp2742.d[0]=nb;
nctemp2741=&nctemp2742;
nctempchar1* nctemp2739= nctemp2741;
int nctemp2746=LibeWrite(nctemp2735,nctemp2737,nctemp2739);
int nctemp2748= fd;
int nctemp2750=LibeClose(nctemp2748);
int nctemp2751 = (Rheol ==2);
if(nctemp2751)
{
nctempfloat2* nctemp2759= vp;
nctempfloat2* nctemp2762= vs;
nctempfloat2* nctemp2765= rho;
nctempfloat2* nctemp2768= Qlx;
nctempfloat2* nctemp2771= Qly;
nctempfloat2* nctemp2774= Qmx;
nctempfloat2* nctemp2777= Qmy;
nctempfloat2* nctemp2780= Qpx;
nctempfloat2* nctemp2783= Qpy;
float nctemp2786= Dx;
float nctemp2788= Dt;
float nctemp2790= W0;
int nctemp2792= Nb;
int nctemp2794= Freesurface;
struct model* nctemp2796=Modelsls(nctemp2759,nctemp2762,nctemp2765,nctemp2768,nctemp2771,nctemp2774,nctemp2777,nctemp2780,nctemp2783,nctemp2786,nctemp2788,nctemp2790,nctemp2792,nctemp2794);
m =nctemp2796;
}
else{
int nctemp2798= 4;
struct nctempchar1 *nctemp2802;
static struct nctempchar1 nctemp2803 = {{ 18}, (char*)"Unknown Q-model\n\0"};
nctemp2802=&nctemp2803;
nctempchar1* nctemp2800= nctemp2802;
int nctemp2804=LibePuts(nctemp2798,nctemp2800);
int nctemp2806= 4;
int nctemp2808=LibeFlush(nctemp2806);
int nctemp2810=LibeExit();
}
return m;
}
float ModelStability (struct model* Model)
{
int nx;
int ny;
int i;
int j;
float vp;
float stab;
nx =Model->Nx;
ny =Model->Ny;
j =0;
int nctemp2824 = (j < ny);
while(nctemp2824){
{
i =0;
int nctemp2832 = (i < nx);
while(nctemp2832){
{
int nctemp2847=i;
nctemp2847=j*Model->Lambda->d[0]+nctemp2847;
int nctemp2855=i;
nctemp2855=j*Model->Mu->d[0]+nctemp2855;
float nctemp2858 = 2.0 * Model->Mu->a[nctemp2855];
float nctemp2859 = Model->Lambda->a[nctemp2847] + nctemp2858;
int nctemp2861=i;
nctemp2861=j*Model->Rho->d[0]+nctemp2861;
float nctemp2864 = nctemp2859 / Model->Rho->a[nctemp2861];
float nctemp2840= nctemp2864;
float nctemp2865=LibeSqrt(nctemp2840);
vp =nctemp2865;
float nctemp2877 = vp * Model->Dt;
float nctemp2879 = nctemp2877 / Model->Dx;
stab =nctemp2879;
float nctemp2888= 2.0;
float nctemp2890=LibeSqrt(nctemp2888);
float nctemp2891 = 1.0 / nctemp2890;
int nctemp2880 = (stab > nctemp2891);
if(nctemp2880)
{
int nctemp2893= 4;
struct nctempchar1 *nctemp2897;
static struct nctempchar1 nctemp2898 = {{ 28}, (char*)"Stability index too large! \0"};
nctemp2897=&nctemp2898;
nctempchar1* nctemp2895= nctemp2897;
int nctemp2899=LibePuts(nctemp2893,nctemp2895);
int nctemp2901= 4;
float nctemp2903= stab;
struct nctempchar1 *nctemp2907;
static struct nctempchar1 nctemp2908 = {{ 2}, (char*)"g\0"};
nctemp2907=&nctemp2908;
nctempchar1* nctemp2905= nctemp2907;
int nctemp2909=LibePutf(nctemp2901,nctemp2903,nctemp2905);
int nctemp2911= 4;
struct nctempchar1 *nctemp2915;
static struct nctempchar1 nctemp2916 = {{ 3}, (char*)"\n\0"};
nctemp2915=&nctemp2916;
nctempchar1* nctemp2913= nctemp2915;
int nctemp2917=LibePuts(nctemp2911,nctemp2913);
int nctemp2919= 4;
struct nctempchar1 *nctemp2923;
static struct nctempchar1 nctemp2924 = {{ 7}, (char*)"vp: \n\0"};
nctemp2923=&nctemp2924;
nctempchar1* nctemp2921= nctemp2923;
int nctemp2925=LibePuts(nctemp2919,nctemp2921);
int nctemp2927= 4;
float nctemp2929= vp;
struct nctempchar1 *nctemp2933;
static struct nctempchar1 nctemp2934 = {{ 2}, (char*)"g\0"};
nctemp2933=&nctemp2934;
nctempchar1* nctemp2931= nctemp2933;
int nctemp2935=LibePutf(nctemp2927,nctemp2929,nctemp2931);
int nctemp2937= 4;
struct nctempchar1 *nctemp2941;
static struct nctempchar1 nctemp2942 = {{ 3}, (char*)"\n\0"};
nctemp2941=&nctemp2942;
nctempchar1* nctemp2939= nctemp2941;
int nctemp2943=LibePuts(nctemp2937,nctemp2939);
int nctemp2945= 4;
struct nctempchar1 *nctemp2949;
static struct nctempchar1 nctemp2950 = {{ 7}, (char*)"dt: \n\0"};
nctemp2949=&nctemp2950;
nctempchar1* nctemp2947= nctemp2949;
int nctemp2951=LibePuts(nctemp2945,nctemp2947);
int nctemp2953= 4;
float nctemp2955= Model->Dt;
struct nctempchar1 *nctemp2959;
static struct nctempchar1 nctemp2960 = {{ 2}, (char*)"g\0"};
nctemp2959=&nctemp2960;
nctempchar1* nctemp2957= nctemp2959;
int nctemp2961=LibePutf(nctemp2953,nctemp2955,nctemp2957);
int nctemp2963= 4;
struct nctempchar1 *nctemp2967;
static struct nctempchar1 nctemp2968 = {{ 3}, (char*)"\n\0"};
nctemp2967=&nctemp2968;
nctempchar1* nctemp2965= nctemp2967;
int nctemp2969=LibePuts(nctemp2963,nctemp2965);
int nctemp2971= 4;
struct nctempchar1 *nctemp2975;
static struct nctempchar1 nctemp2976 = {{ 7}, (char*)"dx: \n\0"};
nctemp2975=&nctemp2976;
nctempchar1* nctemp2973= nctemp2975;
int nctemp2977=LibePuts(nctemp2971,nctemp2973);
int nctemp2979= 4;
float nctemp2981= Model->Dx;
struct nctempchar1 *nctemp2985;
static struct nctempchar1 nctemp2986 = {{ 2}, (char*)"g\0"};
nctemp2985=&nctemp2986;
nctempchar1* nctemp2983= nctemp2985;
int nctemp2987=LibePutf(nctemp2979,nctemp2981,nctemp2983);
int nctemp2989= 4;
struct nctempchar1 *nctemp2993;
static struct nctempchar1 nctemp2994 = {{ 3}, (char*)"\n\0"};
nctemp2993=&nctemp2994;
nctempchar1* nctemp2991= nctemp2993;
int nctemp2995=LibePuts(nctemp2989,nctemp2991);
int nctemp2997= 4;
int nctemp2999=LibeFlush(nctemp2997);
}
}
int nctemp3008 = i + 1;
i =nctemp3008;
int nctemp3009 = (i < nx);
nctemp2832=nctemp3009;
}
}
int nctemp3021 = j + 1;
j =nctemp3021;
int nctemp3022 = (j < ny);
nctemp2824=nctemp3022;
}
return stab;
}
