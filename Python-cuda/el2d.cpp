//  Translated by epsc  version December 2021  
extern "C" {
typedef struct { float r; float i;} complex; 
typedef struct nctempfloat1 { int d[1]; float *a;} nctempfloat1; 
typedef struct nctempint1 { int d[1]; int *a;} nctempint1; 
typedef struct nctempchar1 { int d[1]; char *a;} nctempchar1; 
typedef struct nctempcomplex1 { int d[1]; complex *a;} nctempcomplex1; 
typedef struct nctempfloat2 { int d[2]; float *a;} nctempfloat2; 
typedef struct nctempint2 { int d[2]; int *a;} nctempint2; 
typedef struct nctempchar2 { int d[2]; char *a;} nctempchar2; 
typedef struct nctempcomplex2 { int d[2]; complex *a;} nctempcomplex2; 
typedef struct nctempfloat3 { int d[3]; float *a;} nctempfloat3; 
typedef struct nctempint3 { int d[3]; int *a;} nctempint3; 
typedef struct nctempchar3 { int d[3]; char *a;} nctempchar3; 
typedef struct nctempcomplex3 { int d[3]; complex *a;} nctempcomplex3; 
typedef struct nctempfloat4 { int d[4]; float *a;} nctempfloat4; 
typedef struct nctempint4 { int d[4]; int *a;} nctempint4; 
typedef struct nctempchar4 { int d[4]; char *a;} nctempchar4; 
typedef struct nctempcomplex4 { int d[4]; complex *a;} nctempcomplex4; 
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void *GpuNew(int n);
void *GpuDelete(void *f);
void *GpuError();
void *RunMalloc(int n);
int RunFree(void * );
int RunSync();
int RunGetnt();
int RunGetnb();
int LibeArrayex (int line,nctempchar1 *name,int ival,int index,int bound);
int LibeClearerr ();
int LibeGeterrno ();
nctempchar1* LibeGeterrstr ();
struct MainArg {nctempchar1 *arg;
};
typedef struct nctempMainArg1 {int d[1]; struct MainArg *a; } nctempMainArg1;
struct nctempMainArg2 {int d[2]; struct MainArg *a; } ;
struct nctempMainArg3 {int d[3]; struct MainArg *a; } ;
struct nctempMainArg4 {int d[4]; struct MainArg *a; } ;
int Main (struct nctempMainArg1 *MainArgs);
int LibeInit ();
int LibeDelete ();
int LibeExit ();
nctempchar1* LibeGetenv (nctempchar1 *name);
int LibeOpen (nctempchar1 *name,nctempchar1 *mode);
int LibeClose (int fp);
int LibeGetc (int fp);
int LibeUngetc (int fp);
int LibeGetw (int fp,nctempchar1 *text);
int LibePs (nctempchar1 *s);
int LibePi (int n);
int LibePf (float r);
int LibePutf (int fp,float r,nctempchar1 *form);
int LibePutc (int fp,int c);
int LibePuts (int fp,nctempchar1 *s);
int LibePuti (int fp,int ival);
int LibeRead (int fp,int n,nctempchar1 *array);
int LibeWrite (int fp,int n,nctempchar1 *array);
int LibeSeek (int fp,int pos,int flag);
int LibeFlush (int fp);
int LibeStrlen (nctempchar1 *s);
int LibeStrcmp (nctempchar1 *s,nctempchar1 *t);
int LibeStrev (nctempchar1 *s);
nctempchar1* LibeStrsave (nctempchar1 *s);
int LibeStrcpy (nctempchar1 *s,nctempchar1 *t);
int LibeStrcat (nctempchar1 *s,nctempchar1 *t);
nctempchar1* LibeStradd (nctempchar1 *t,nctempchar1 *s);
int LibeIsalpha (int c);
int LibeIsdigit (int c);
int LibeIsalnum (int c);
int LibeAtoi (nctempchar1 *s);
int LibeItoa (int n,nctempchar1 *s);
int LibeItoh (int n,nctempchar1 *s);
float LibeAtof (nctempchar1 *s);
int LibeFtoa (float f,nctempchar1 *fmt,nctempchar1 *s);
float LibeMach (int flag);
float LibeFabs (float x);
float LibeFscale2 (float x,int n);
float LibeGetfman2 (float x);
int LibeGetfexp2 (float x);
float LibeFscale (float x,int n);
int LibeGetfman (float f,int maxdig);
float LibeGetffman (float f);
int LibeGetmaxdig (float f);
int LibeGetfexp (float f);
float LibeClock ();
int LibeSetnb (int n);
int LibeSetnt (int n);
int LibeGetnb ();
int LibeGetnt ();
int LibeMod (int n,int r);
float LibeSqrt (float x);
float LibeLn (float x);
float LibeExp (float x);
float LibeSin (float x);
float LibeCos (float x);
float LibeTan (float x);
float LibeArcsin (float x);
float LibeArccos (float x);
float LibeArctan (float x);
float LibePow (float base,float exponent);
int LibeSystem (nctempchar1 *cmd);
struct diff {int l;
int lmax;
nctempfloat2 *coeffs;
nctempfloat1 *w;
};
typedef struct nctempdiff1 {int d[1]; struct diff *a; } nctempdiff1;
struct nctempdiff2 {int d[2]; struct diff *a; } ;
struct nctempdiff3 {int d[3]; struct diff *a; } ;
struct nctempdiff4 {int d[4]; struct diff *a; } ;
struct diff* DiffNew (int l);
int DiffDxminus (struct diff* Diff,nctempfloat2 *A,nctempfloat2 *dA,float dx);
int DiffDyminus (struct diff* Diff,nctempfloat2 *A,nctempfloat2 *dA,float dx);
int DiffDxplus (struct diff* Diff,nctempfloat2 *A,nctempfloat2 *dA,float dx);
int DiffDyplus (struct diff* Diff,nctempfloat2 *A,nctempfloat2 *dA,float dx);
struct rec {int nr;
nctempint1 *rx;
nctempint1 *ry;
int fd;
int nt;
nctempfloat2 *p;
nctempfloat2 *sxx;
nctempfloat2 *syy;
nctempfloat2 *vx;
nctempfloat2 *vy;
nctempfloat2 *wrk;
int resamp;
int pit;
};
typedef struct nctemprec1 {int d[1]; struct rec *a; } nctemprec1;
struct nctemprec2 {int d[2]; struct rec *a; } ;
struct nctemprec3 {int d[3]; struct rec *a; } ;
struct nctemprec4 {int d[4]; struct rec *a; } ;
struct rec* RecNew (nctempint1 *rx,nctempint1 *ry,int nt,int resamp);
int RecReceiver (struct rec* Rec,int it,nctempfloat2 *sxx,nctempfloat2 *syy,nctempfloat2 *vx,nctempfloat2 *vy);
int RecSave (struct rec* Rec,nctempchar1 *file);
nctempfloat2* RecGetrec (struct rec* Rec,int dtype);
struct src {nctempint1 *Sx;
nctempint1 *Sy;
nctempfloat2 *Sqyy;
nctempfloat2 *Sqxx;
nctempfloat2 *Sfx;
nctempfloat2 *Sfy;
int Ns;
};
typedef struct nctempsrc1 {int d[1]; struct src *a; } nctempsrc1;
struct nctempsrc2 {int d[2]; struct src *a; } ;
struct nctempsrc3 {int d[3]; struct src *a; } ;
struct nctempsrc4 {int d[4]; struct src *a; } ;
struct src* SrcNew (nctempint1 *sx,nctempint1 *sy,nctempfloat2 *sqxx,nctempfloat2 *sqyy,nctempfloat2 *sfx,nctempfloat2 *sfy);
int SrcDel (struct src* Src);
struct model {int Nx;
int Ny;
int Nb;
float W0;
nctempfloat2 *Qlx;
nctempfloat2 *Qly;
nctempfloat2 *Qmx;
nctempfloat2 *Qmy;
nctempfloat2 *Qpx;
nctempfloat2 *Qpy;
nctempfloat2 *Lambda;
nctempfloat2 *Mu;
nctempfloat2 *Muxy;
nctempfloat2 *Dmuxyx;
nctempfloat2 *Dmuxyy;
nctempfloat2 *Dlambdax;
nctempfloat2 *Dlambday;
nctempfloat2 *Dmux;
nctempfloat2 *Dmuy;
nctempfloat2 *Drhopx;
nctempfloat2 *Drhopy;
nctempfloat2 *Rho;
nctempfloat2 *Rhox;
nctempfloat2 *Rhoy;
nctempfloat2 *Alpha1x;
nctempfloat2 *Alpha1y;
nctempfloat2 *Alpha2x;
nctempfloat2 *Alpha2y;
nctempfloat2 *Beta1x;
nctempfloat2 *Beta2x;
nctempfloat2 *Beta1y;
nctempfloat2 *Beta2y;
nctempfloat2 *Eta1x;
nctempfloat2 *Eta1y;
nctempfloat2 *Eta2x;
nctempfloat2 *Eta2y;
nctempfloat1 *dx;
nctempfloat1 *dy;
nctempfloat1 *dx1;
nctempfloat1 *dy1;
nctempfloat1 *dx2;
nctempfloat1 *dy2;
float Dx;
float Dt;
};
typedef struct nctempmodel1 {int d[1]; struct model *a; } nctempmodel1;
struct nctempmodel2 {int d[2]; struct model *a; } ;
struct nctempmodel3 {int d[3]; struct model *a; } ;
struct nctempmodel4 {int d[4]; struct model *a; } ;
struct model* ModelNew (nctempfloat2 *vp,nctempfloat2 *vs,nctempfloat2 *rho,nctempfloat2 *Qlx,nctempfloat2 *Qly,nctempfloat2 *Qmx,nctempfloat2 *Qmy,nctempfloat2 *Qpx,nctempfloat2 *Qpy,float Dx,float Dt,float W0,int Nb,int Rheol);
float ModelStability (struct model* Model);
struct el2d {nctempfloat2 *p;
nctempfloat2 *sigmaxx;
nctempfloat2 *sigmayy;
nctempfloat2 *sigmaxy;
nctempfloat2 *sigmayx;
nctempfloat2 *vx;
nctempfloat2 *vy;
nctempfloat2 *exx;
nctempfloat2 *eyy;
nctempfloat2 *exy;
nctempfloat2 *eyx;
nctempfloat2 *gammaxx;
nctempfloat2 *gammayy;
nctempfloat2 *gammaxy;
nctempfloat2 *gammayx;
nctempfloat2 *thetaxxx;
nctempfloat2 *thetayyy;
nctempfloat2 *thetaxyx;
nctempfloat2 *thetayxy;
int ts;
int fdsxx;
int fdsyy;
int fdvx;
int fdvy;
int sresamp;
nctempint1 *snpflags;
};
typedef struct nctempel2d1 {int d[1]; struct el2d *a; } nctempel2d1;
struct nctempel2d2 {int d[2]; struct el2d *a; } ;
struct nctempel2d3 {int d[3]; struct el2d *a; } ;
struct nctempel2d4 {int d[4]; struct el2d *a; } ;
struct el2d* El2dNew (struct model* Model,int sresamp,nctempint1 *snpflags);
int El2dSolve (struct el2d* El2d,struct model* Model,struct src* Src,struct rec* Rec,int nt,int l);
int El2dvx (struct el2d* El2d,struct model* Model);
int El2dvy (struct el2d* El2d,struct model* Model);
int El2dexy (struct el2d* El2d,struct model* Model,nctempfloat2 *vx,nctempfloat2 *vy);
int El2deyx (struct el2d* El2d,struct model* Model,nctempfloat2 *vx,nctempfloat2 *vy);
int El2dstress (struct el2d* El2d,struct model* Model);
int El2dSnap (struct el2d* El2d,int it);
struct el2d* El2dNew (struct model* Model,int sresamp,nctempint1 *snpflags)
{
struct el2d* El2d;
int i;
int j;
struct el2d *nctemp5=(struct el2d*)RunMalloc(sizeof(struct el2d));
El2d =nctemp5;
El2d->sresamp =sresamp;
El2d->snpflags=snpflags;
int nctemp23=Model->Nx;
nctemp23=nctemp23*Model->Ny;
nctempfloat2 *nctemp22;
nctemp22=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp22->d[0]=Model->Nx;
nctemp22->d[1]=Model->Ny;
nctemp22->a=(float *)RunMalloc(sizeof(float)*nctemp23);
El2d->p=nctemp22;
int nctemp34=Model->Nx;
nctemp34=nctemp34*Model->Ny;
nctempfloat2 *nctemp33;
nctemp33=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp33->d[0]=Model->Nx;
nctemp33->d[1]=Model->Ny;
nctemp33->a=(float *)RunMalloc(sizeof(float)*nctemp34);
El2d->sigmaxx=nctemp33;
int nctemp45=Model->Nx;
nctemp45=nctemp45*Model->Ny;
nctempfloat2 *nctemp44;
nctemp44=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp44->d[0]=Model->Nx;
nctemp44->d[1]=Model->Ny;
nctemp44->a=(float *)RunMalloc(sizeof(float)*nctemp45);
El2d->sigmayy=nctemp44;
int nctemp56=Model->Nx;
nctemp56=nctemp56*Model->Ny;
nctempfloat2 *nctemp55;
nctemp55=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp55->d[0]=Model->Nx;
nctemp55->d[1]=Model->Ny;
nctemp55->a=(float *)RunMalloc(sizeof(float)*nctemp56);
El2d->sigmaxy=nctemp55;
int nctemp67=Model->Nx;
nctemp67=nctemp67*Model->Ny;
nctempfloat2 *nctemp66;
nctemp66=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp66->d[0]=Model->Nx;
nctemp66->d[1]=Model->Ny;
nctemp66->a=(float *)RunMalloc(sizeof(float)*nctemp67);
El2d->sigmayx=nctemp66;
int nctemp78=Model->Nx;
nctemp78=nctemp78*Model->Ny;
nctempfloat2 *nctemp77;
nctemp77=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp77->d[0]=Model->Nx;
nctemp77->d[1]=Model->Ny;
nctemp77->a=(float *)RunMalloc(sizeof(float)*nctemp78);
El2d->vx=nctemp77;
int nctemp89=Model->Nx;
nctemp89=nctemp89*Model->Ny;
nctempfloat2 *nctemp88;
nctemp88=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp88->d[0]=Model->Nx;
nctemp88->d[1]=Model->Ny;
nctemp88->a=(float *)RunMalloc(sizeof(float)*nctemp89);
El2d->vy=nctemp88;
int nctemp100=Model->Nx;
nctemp100=nctemp100*Model->Ny;
nctempfloat2 *nctemp99;
nctemp99=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp99->d[0]=Model->Nx;
nctemp99->d[1]=Model->Ny;
nctemp99->a=(float *)RunMalloc(sizeof(float)*nctemp100);
El2d->exx=nctemp99;
int nctemp111=Model->Nx;
nctemp111=nctemp111*Model->Ny;
nctempfloat2 *nctemp110;
nctemp110=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp110->d[0]=Model->Nx;
nctemp110->d[1]=Model->Ny;
nctemp110->a=(float *)RunMalloc(sizeof(float)*nctemp111);
El2d->eyy=nctemp110;
int nctemp122=Model->Nx;
nctemp122=nctemp122*Model->Ny;
nctempfloat2 *nctemp121;
nctemp121=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp121->d[0]=Model->Nx;
nctemp121->d[1]=Model->Ny;
nctemp121->a=(float *)RunMalloc(sizeof(float)*nctemp122);
El2d->exy=nctemp121;
int nctemp133=Model->Nx;
nctemp133=nctemp133*Model->Ny;
nctempfloat2 *nctemp132;
nctemp132=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp132->d[0]=Model->Nx;
nctemp132->d[1]=Model->Ny;
nctemp132->a=(float *)RunMalloc(sizeof(float)*nctemp133);
El2d->eyx=nctemp132;
int nctemp144=Model->Nx;
nctemp144=nctemp144*Model->Ny;
nctempfloat2 *nctemp143;
nctemp143=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp143->d[0]=Model->Nx;
nctemp143->d[1]=Model->Ny;
nctemp143->a=(float *)RunMalloc(sizeof(float)*nctemp144);
El2d->gammaxx=nctemp143;
int nctemp155=Model->Nx;
nctemp155=nctemp155*Model->Ny;
nctempfloat2 *nctemp154;
nctemp154=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp154->d[0]=Model->Nx;
nctemp154->d[1]=Model->Ny;
nctemp154->a=(float *)RunMalloc(sizeof(float)*nctemp155);
El2d->gammayy=nctemp154;
int nctemp166=Model->Nx;
nctemp166=nctemp166*Model->Ny;
nctempfloat2 *nctemp165;
nctemp165=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp165->d[0]=Model->Nx;
nctemp165->d[1]=Model->Ny;
nctemp165->a=(float *)RunMalloc(sizeof(float)*nctemp166);
El2d->gammaxy=nctemp165;
int nctemp177=Model->Nx;
nctemp177=nctemp177*Model->Ny;
nctempfloat2 *nctemp176;
nctemp176=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp176->d[0]=Model->Nx;
nctemp176->d[1]=Model->Ny;
nctemp176->a=(float *)RunMalloc(sizeof(float)*nctemp177);
El2d->gammayx=nctemp176;
int nctemp188=Model->Nx;
nctemp188=nctemp188*Model->Ny;
nctempfloat2 *nctemp187;
nctemp187=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp187->d[0]=Model->Nx;
nctemp187->d[1]=Model->Ny;
nctemp187->a=(float *)RunMalloc(sizeof(float)*nctemp188);
El2d->thetaxxx=nctemp187;
int nctemp199=Model->Nx;
nctemp199=nctemp199*Model->Ny;
nctempfloat2 *nctemp198;
nctemp198=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp198->d[0]=Model->Nx;
nctemp198->d[1]=Model->Ny;
nctemp198->a=(float *)RunMalloc(sizeof(float)*nctemp199);
El2d->thetayyy=nctemp198;
int nctemp210=Model->Nx;
nctemp210=nctemp210*Model->Ny;
nctempfloat2 *nctemp209;
nctemp209=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp209->d[0]=Model->Nx;
nctemp209->d[1]=Model->Ny;
nctemp209->a=(float *)RunMalloc(sizeof(float)*nctemp210);
El2d->thetayxy=nctemp209;
int nctemp221=Model->Nx;
nctemp221=nctemp221*Model->Ny;
nctempfloat2 *nctemp220;
nctemp220=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp220->d[0]=Model->Nx;
nctemp220->d[1]=Model->Ny;
nctemp220->a=(float *)RunMalloc(sizeof(float)*nctemp221);
El2d->thetaxyx=nctemp220;
i =0;
int nctemp230 = (i < Model->Nx);
while(nctemp230){
{
j =0;
int nctemp238 = (j < Model->Ny);
while(nctemp238){
{
int nctemp245=i;
nctemp245=j*El2d->p->d[0]+nctemp245;
El2d->p->a[nctemp245] =0.0;
int nctemp252=i;
nctemp252=j*El2d->sigmaxx->d[0]+nctemp252;
El2d->sigmaxx->a[nctemp252] =0.0;
int nctemp259=i;
nctemp259=j*El2d->sigmayy->d[0]+nctemp259;
El2d->sigmayy->a[nctemp259] =0.0;
int nctemp266=i;
nctemp266=j*El2d->sigmaxy->d[0]+nctemp266;
El2d->sigmaxy->a[nctemp266] =0.0;
int nctemp273=i;
nctemp273=j*El2d->sigmayx->d[0]+nctemp273;
El2d->sigmayx->a[nctemp273] =0.0;
int nctemp280=i;
nctemp280=j*El2d->vx->d[0]+nctemp280;
El2d->vx->a[nctemp280] =0.0;
int nctemp287=i;
nctemp287=j*El2d->vy->d[0]+nctemp287;
El2d->vy->a[nctemp287] =0.0;
int nctemp294=i;
nctemp294=j*El2d->exx->d[0]+nctemp294;
El2d->exx->a[nctemp294] =0.0;
int nctemp301=i;
nctemp301=j*El2d->eyy->d[0]+nctemp301;
El2d->eyy->a[nctemp301] =0.0;
int nctemp308=i;
nctemp308=j*El2d->exy->d[0]+nctemp308;
El2d->exy->a[nctemp308] =0.0;
int nctemp315=i;
nctemp315=j*El2d->eyx->d[0]+nctemp315;
El2d->eyx->a[nctemp315] =0.0;
int nctemp322=i;
nctemp322=j*El2d->gammaxx->d[0]+nctemp322;
El2d->gammaxx->a[nctemp322] =0.0;
int nctemp329=i;
nctemp329=j*El2d->gammayy->d[0]+nctemp329;
El2d->gammayy->a[nctemp329] =0.0;
int nctemp336=i;
nctemp336=j*El2d->gammaxy->d[0]+nctemp336;
El2d->gammaxy->a[nctemp336] =0.0;
int nctemp343=i;
nctemp343=j*El2d->gammayx->d[0]+nctemp343;
El2d->gammayx->a[nctemp343] =0.0;
int nctemp350=i;
nctemp350=j*El2d->thetaxxx->d[0]+nctemp350;
El2d->thetaxxx->a[nctemp350] =0.0;
int nctemp357=i;
nctemp357=j*El2d->thetayyy->d[0]+nctemp357;
El2d->thetayyy->a[nctemp357] =0.0;
int nctemp364=i;
nctemp364=j*El2d->thetayxy->d[0]+nctemp364;
El2d->thetayxy->a[nctemp364] =0.0;
int nctemp371=i;
nctemp371=j*El2d->thetaxyx->d[0]+nctemp371;
El2d->thetaxyx->a[nctemp371] =0.0;
El2d->ts =0;
}
int nctemp387 = j + 1;
j =nctemp387;
int nctemp388 = (j < Model->Ny);
nctemp238=nctemp388;
}
}
int nctemp400 = i + 1;
i =nctemp400;
int nctemp401 = (i < Model->Nx);
nctemp230=nctemp401;
}
int nctemp408=0;
int nctemp405 = (El2d->snpflags->a[nctemp408] ==1);
if(nctemp405)
{
struct nctempchar1 *nctemp417;
static struct nctempchar1 nctemp418 = {{ 12}, (char*)"snp-sxx.bin\0"};
nctemp417=&nctemp418;
nctempchar1* nctemp415= nctemp417;
struct nctempchar1 *nctemp421;
static struct nctempchar1 nctemp422 = {{ 2}, (char*)"w\0"};
nctemp421=&nctemp422;
nctempchar1* nctemp419= nctemp421;
int nctemp423=LibeOpen(nctemp415,nctemp419);
El2d->fdsxx =nctemp423;
}
int nctemp427=1;
int nctemp424 = (El2d->snpflags->a[nctemp427] ==1);
if(nctemp424)
{
struct nctempchar1 *nctemp436;
static struct nctempchar1 nctemp437 = {{ 12}, (char*)"snp-syy.bin\0"};
nctemp436=&nctemp437;
nctempchar1* nctemp434= nctemp436;
struct nctempchar1 *nctemp440;
static struct nctempchar1 nctemp441 = {{ 2}, (char*)"w\0"};
nctemp440=&nctemp441;
nctempchar1* nctemp438= nctemp440;
int nctemp442=LibeOpen(nctemp434,nctemp438);
El2d->fdsyy =nctemp442;
}
int nctemp446=2;
int nctemp443 = (El2d->snpflags->a[nctemp446] ==1);
if(nctemp443)
{
struct nctempchar1 *nctemp455;
static struct nctempchar1 nctemp456 = {{ 11}, (char*)"snp-vx.bin\0"};
nctemp455=&nctemp456;
nctempchar1* nctemp453= nctemp455;
struct nctempchar1 *nctemp459;
static struct nctempchar1 nctemp460 = {{ 2}, (char*)"w\0"};
nctemp459=&nctemp460;
nctempchar1* nctemp457= nctemp459;
int nctemp461=LibeOpen(nctemp453,nctemp457);
El2d->fdvx =nctemp461;
}
int nctemp465=3;
int nctemp462 = (El2d->snpflags->a[nctemp465] ==1);
if(nctemp462)
{
struct nctempchar1 *nctemp474;
static struct nctempchar1 nctemp475 = {{ 11}, (char*)"snp-vy.bin\0"};
nctemp474=&nctemp475;
nctempchar1* nctemp472= nctemp474;
struct nctempchar1 *nctemp478;
static struct nctempchar1 nctemp479 = {{ 2}, (char*)"w\0"};
nctemp478=&nctemp479;
nctempchar1* nctemp476= nctemp478;
int nctemp480=LibeOpen(nctemp472,nctemp476);
El2d->fdvy =nctemp480;
}
return El2d;
}
int El2dSolve (struct el2d* El2d,struct model* Model,struct src* Src,struct rec* Rec,int nt,int l)
{
int sx;
int sy;
struct diff* Diff;
int ns;
int ne;
nctempfloat2 *tmp1;
nctempfloat2 *tmp2;
int i;
int k;
nctempfloat2 *p;
float perc;
float oldperc;
int iperc;
int nctemp486= l;
struct diff* nctemp488=DiffNew(nctemp486);
Diff =nctemp488;
int nctemp495=Model->Nx;
nctemp495=nctemp495*Model->Ny;
nctempfloat2 *nctemp494;
nctemp494=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp494->d[0]=Model->Nx;
nctemp494->d[1]=Model->Ny;
nctemp494->a=(float *)RunMalloc(sizeof(float)*nctemp495);
tmp1=nctemp494;
int nctemp506=Model->Nx;
nctemp506=nctemp506*Model->Ny;
nctempfloat2 *nctemp505;
nctemp505=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp505->d[0]=Model->Nx;
nctemp505->d[1]=Model->Ny;
nctemp505->a=(float *)RunMalloc(sizeof(float)*nctemp506);
tmp2=nctemp505;
oldperc =0.0;
ns =El2d->ts;
int nctemp527 = ns + nt;
ne =nctemp527;
i =ns;
int nctemp532 = (i < ne);
while(nctemp532){
{
struct diff* nctemp537= Diff;
nctempfloat2* nctemp539= El2d->sigmaxx;
nctempfloat2* nctemp542= El2d->exx;
float nctemp545= Model->Dx;
int nctemp547=DiffDxplus(nctemp537,nctemp539,nctemp542,nctemp545);
struct diff* nctemp549= Diff;
nctempfloat2* nctemp551= El2d->sigmaxy;
nctempfloat2* nctemp554= El2d->exy;
float nctemp557= Model->Dx;
int nctemp559=DiffDyminus(nctemp549,nctemp551,nctemp554,nctemp557);
struct el2d* nctemp561= El2d;
struct model* nctemp563= Model;
int nctemp565=El2dvx(nctemp561,nctemp563);
struct diff* nctemp567= Diff;
nctempfloat2* nctemp569= El2d->sigmayy;
nctempfloat2* nctemp572= El2d->eyy;
float nctemp575= Model->Dx;
int nctemp577=DiffDyplus(nctemp567,nctemp569,nctemp572,nctemp575);
struct diff* nctemp579= Diff;
nctempfloat2* nctemp581= El2d->sigmaxy;
nctempfloat2* nctemp584= El2d->eyx;
float nctemp587= Model->Dx;
int nctemp589=DiffDxminus(nctemp579,nctemp581,nctemp584,nctemp587);
struct el2d* nctemp591= El2d;
struct model* nctemp593= Model;
int nctemp595=El2dvy(nctemp591,nctemp593);
struct diff* nctemp597= Diff;
nctempfloat2* nctemp599= El2d->vx;
nctempfloat2* nctemp602= El2d->exx;
float nctemp605= Model->Dx;
int nctemp607=DiffDxminus(nctemp597,nctemp599,nctemp602,nctemp605);
struct diff* nctemp609= Diff;
nctempfloat2* nctemp611= El2d->vy;
nctempfloat2* nctemp614= El2d->eyy;
float nctemp617= Model->Dx;
int nctemp619=DiffDyminus(nctemp609,nctemp611,nctemp614,nctemp617);
struct diff* nctemp621= Diff;
nctempfloat2* nctemp623= El2d->vy;
nctempfloat2* nctemp626= tmp1;
float nctemp629= Model->Dx;
int nctemp631=DiffDxplus(nctemp621,nctemp623,nctemp626,nctemp629);
struct diff* nctemp633= Diff;
nctempfloat2* nctemp635= El2d->vx;
nctempfloat2* nctemp638= tmp2;
float nctemp641= Model->Dx;
int nctemp643=DiffDyplus(nctemp633,nctemp635,nctemp638,nctemp641);
struct el2d* nctemp645= El2d;
struct model* nctemp647= Model;
nctempfloat2* nctemp649= tmp1;
nctempfloat2* nctemp652= tmp2;
int nctemp655=El2dexy(nctemp645,nctemp647,nctemp649,nctemp652);
struct el2d* nctemp657= El2d;
struct model* nctemp659= Model;
nctempfloat2* nctemp661= tmp1;
nctempfloat2* nctemp664= tmp2;
int nctemp667=El2deyx(nctemp657,nctemp659,nctemp661,nctemp664);
struct el2d* nctemp669= El2d;
struct model* nctemp671= Model;
int nctemp673=El2dstress(nctemp669,nctemp671);
k =0;
int nctemp678 = (k < Src->Ns);
while(nctemp678){
{
int nctemp686=k;
sx =Src->Sx->a[nctemp686];
int nctemp692=k;
sy =Src->Sy->a[nctemp692];
int nctemp697=sx;
nctemp697=sy*El2d->sigmaxx->d[0]+nctemp697;
int nctemp704=sx;
nctemp704=sy*El2d->sigmaxx->d[0]+nctemp704;
int nctemp715=i;
nctemp715=k*Src->Sqxx->d[0]+nctemp715;
float nctemp723 = Model->Dx * Model->Dx;
float nctemp724 = Src->Sqxx->a[nctemp715] / nctemp723;
float nctemp725 = Model->Dt * nctemp724;
float nctemp726 = El2d->sigmaxx->a[nctemp704] + nctemp725;
El2d->sigmaxx->a[nctemp697] =nctemp726;
int nctemp730=sx;
nctemp730=sy*El2d->sigmayy->d[0]+nctemp730;
int nctemp737=sx;
nctemp737=sy*El2d->sigmayy->d[0]+nctemp737;
int nctemp748=i;
nctemp748=k*Src->Sqyy->d[0]+nctemp748;
float nctemp756 = Model->Dx * Model->Dx;
float nctemp757 = Src->Sqyy->a[nctemp748] / nctemp756;
float nctemp758 = Model->Dt * nctemp757;
float nctemp759 = El2d->sigmayy->a[nctemp737] + nctemp758;
El2d->sigmayy->a[nctemp730] =nctemp759;
int nctemp763=sx;
nctemp763=sy*El2d->vx->d[0]+nctemp763;
int nctemp770=sx;
nctemp770=sy*El2d->vx->d[0]+nctemp770;
int nctemp781=i;
nctemp781=k*Src->Sfx->d[0]+nctemp781;
float nctemp789 = Model->Dx * Model->Dx;
float nctemp790 = Src->Sfx->a[nctemp781] / nctemp789;
float nctemp791 = Model->Dt * nctemp790;
float nctemp792 = El2d->vx->a[nctemp770] + nctemp791;
El2d->vx->a[nctemp763] =nctemp792;
int nctemp796=sx;
nctemp796=sy*El2d->vy->d[0]+nctemp796;
int nctemp803=sx;
nctemp803=sy*El2d->vy->d[0]+nctemp803;
int nctemp814=i;
nctemp814=k*Src->Sfy->d[0]+nctemp814;
float nctemp822 = Model->Dx * Model->Dx;
float nctemp823 = Src->Sfy->a[nctemp814] / nctemp822;
float nctemp824 = Model->Dt * nctemp823;
float nctemp825 = El2d->vy->a[nctemp803] + nctemp824;
El2d->vy->a[nctemp796] =nctemp825;
}
int nctemp834 = k + 1;
k =nctemp834;
int nctemp835 = (k < Src->Ns);
nctemp678=nctemp835;
}
float nctemp850=(float)(i);
int nctemp863 = ne - ns;
int nctemp865 = nctemp863 - 1;
float nctemp854=(float)(nctemp865);
float nctemp866 = nctemp850 / nctemp854;
float nctemp867 = 1000.0 * nctemp866;
perc =nctemp867;
float nctemp875 = perc - oldperc;
int nctemp868 = (nctemp875 >= 10.0);
if(nctemp868)
{
int nctemp884=(int)(perc);
int nctemp888 = nctemp884 / 10;
iperc =nctemp888;
int nctemp892= iperc;
int nctemp894= 10;
int nctemp896=LibeMod(nctemp892,nctemp894);
int nctemp889 = (nctemp896 ==0);
if(nctemp889)
{
int nctemp899= 4;
int nctemp901= iperc;
int nctemp903=LibePuti(nctemp899,nctemp901);
int nctemp905= 4;
struct nctempchar1 *nctemp909;
static struct nctempchar1 nctemp910 = {{ 3}, (char*)"\n\0"};
nctemp909=&nctemp910;
nctempchar1* nctemp907= nctemp909;
int nctemp911=LibePuts(nctemp905,nctemp907);
int nctemp913= 4;
int nctemp915=LibeFlush(nctemp913);
}
oldperc =perc;
}
struct rec* nctemp921= Rec;
int nctemp923= i;
nctempfloat2* nctemp925= El2d->sigmaxx;
nctempfloat2* nctemp928= El2d->sigmayy;
nctempfloat2* nctemp931= El2d->vx;
nctempfloat2* nctemp934= El2d->vy;
int nctemp937=RecReceiver(nctemp921,nctemp923,nctemp925,nctemp928,nctemp931,nctemp934);
struct el2d* nctemp939= El2d;
int nctemp941= i;
int nctemp943=El2dSnap(nctemp939,nctemp941);
}
int nctemp952 = i + 1;
i =nctemp952;
int nctemp953 = (i < ne);
nctemp532=nctemp953;
}
return 1;
}
__global__ void kernel_El2dvx (struct el2d* El2d,struct model* Model);
__global__ void kernel_El2dvx (struct el2d* El2d,struct model* Model)
{
int nx;
int ny;
int i;
int j;
nx =Model->Nx;
ny =Model->Ny;
int nctemp968=0;
int nctemp970=nx;
int nctemp973=0;
int nctemp975=ny;
int nctemp966=(nctemp970-nctemp968)*(nctemp975-nctemp973);
for(int nctempno=blockIdx.x*blockDim.x + threadIdx.x; nctempno<nctemp966;nctempno+=blockDim.x*gridDim.x){
j=nctemp973+nctempno/(nctemp970-nctemp968);
i=nctemp968+nctempno%(nctemp970-nctemp968);
{
int nctemp980=i;
nctemp980=j*El2d->vx->d[0]+nctemp980;
int nctemp1000=i;
nctemp1000=j*Model->Rhox->d[0]+nctemp1000;
float nctemp1003 = Model->Dt * Model->Rhox->a[nctemp1000];
int nctemp1008=i;
nctemp1008=j*El2d->exx->d[0]+nctemp1008;
int nctemp1012=i;
nctemp1012=j*El2d->exy->d[0]+nctemp1012;
float nctemp1015 = El2d->exx->a[nctemp1008] + El2d->exy->a[nctemp1012];
float nctemp1016 = nctemp1003 * nctemp1015;
int nctemp1025=i;
nctemp1025=j*El2d->thetaxxx->d[0]+nctemp1025;
float nctemp1028 = Model->Dt * El2d->thetaxxx->a[nctemp1025];
int nctemp1030=i;
nctemp1030=j*Model->Drhopx->d[0]+nctemp1030;
float nctemp1033 = nctemp1028 * Model->Drhopx->a[nctemp1030];
float nctemp1034 = nctemp1016 + nctemp1033;
int nctemp1043=i;
nctemp1043=j*El2d->thetayxy->d[0]+nctemp1043;
float nctemp1046 = Model->Dt * El2d->thetayxy->a[nctemp1043];
int nctemp1048=i;
nctemp1048=j*Model->Drhopy->d[0]+nctemp1048;
float nctemp1051 = nctemp1046 * Model->Drhopy->a[nctemp1048];
float nctemp1052 = nctemp1034 + nctemp1051;
int nctemp1054=i;
nctemp1054=j*El2d->vx->d[0]+nctemp1054;
float nctemp1057 = nctemp1052 + El2d->vx->a[nctemp1054];
El2d->vx->a[nctemp980] =nctemp1057;
int nctemp1061=i;
nctemp1061=j*El2d->thetaxxx->d[0]+nctemp1061;
int nctemp1071=i;
nctemp1071=j*Model->Eta1x->d[0]+nctemp1071;
int nctemp1075=i;
nctemp1075=j*El2d->thetaxxx->d[0]+nctemp1075;
float nctemp1078 = Model->Eta1x->a[nctemp1071] * El2d->thetaxxx->a[nctemp1075];
int nctemp1083=i;
nctemp1083=j*Model->Eta2x->d[0]+nctemp1083;
int nctemp1087=i;
nctemp1087=j*El2d->exx->d[0]+nctemp1087;
float nctemp1090 = Model->Eta2x->a[nctemp1083] * El2d->exx->a[nctemp1087];
float nctemp1091 = nctemp1078 + nctemp1090;
El2d->thetaxxx->a[nctemp1061] =nctemp1091;
int nctemp1095=i;
nctemp1095=j*El2d->thetayxy->d[0]+nctemp1095;
int nctemp1105=i;
nctemp1105=j*Model->Eta1y->d[0]+nctemp1105;
int nctemp1109=i;
nctemp1109=j*El2d->thetayxy->d[0]+nctemp1109;
float nctemp1112 = Model->Eta1y->a[nctemp1105] * El2d->thetayxy->a[nctemp1109];
int nctemp1117=i;
nctemp1117=j*Model->Eta2y->d[0]+nctemp1117;
int nctemp1121=i;
nctemp1121=j*El2d->exy->d[0]+nctemp1121;
float nctemp1124 = Model->Eta2y->a[nctemp1117] * El2d->exy->a[nctemp1121];
float nctemp1125 = nctemp1112 + nctemp1124;
El2d->thetayxy->a[nctemp1095] =nctemp1125;
}
}
}
int El2dvx (struct el2d* El2d,struct model* Model)
{
  kernel_El2dvx<<< RunGetnb(),RunGetnt() >>>(El2d,Model);
GpuError();
return(1);
}
__global__ void kernel_El2dvy (struct el2d* El2d,struct model* Model);
__global__ void kernel_El2dvy (struct el2d* El2d,struct model* Model)
{
int nx;
int ny;
int i;
int j;
nx =Model->Nx;
ny =Model->Ny;
int nctemp1136=0;
int nctemp1138=nx;
int nctemp1141=0;
int nctemp1143=ny;
int nctemp1134=(nctemp1138-nctemp1136)*(nctemp1143-nctemp1141);
for(int nctempno=blockIdx.x*blockDim.x + threadIdx.x; nctempno<nctemp1134;nctempno+=blockDim.x*gridDim.x){
j=nctemp1141+nctempno/(nctemp1138-nctemp1136);
i=nctemp1136+nctempno%(nctemp1138-nctemp1136);
{
int nctemp1148=i;
nctemp1148=j*El2d->vy->d[0]+nctemp1148;
int nctemp1168=i;
nctemp1168=j*Model->Rhoy->d[0]+nctemp1168;
float nctemp1171 = Model->Dt * Model->Rhoy->a[nctemp1168];
int nctemp1176=i;
nctemp1176=j*El2d->eyy->d[0]+nctemp1176;
int nctemp1180=i;
nctemp1180=j*El2d->eyx->d[0]+nctemp1180;
float nctemp1183 = El2d->eyy->a[nctemp1176] + El2d->eyx->a[nctemp1180];
float nctemp1184 = nctemp1171 * nctemp1183;
int nctemp1193=i;
nctemp1193=j*El2d->thetayyy->d[0]+nctemp1193;
float nctemp1196 = Model->Dt * El2d->thetayyy->a[nctemp1193];
int nctemp1198=i;
nctemp1198=j*Model->Drhopy->d[0]+nctemp1198;
float nctemp1201 = nctemp1196 * Model->Drhopy->a[nctemp1198];
float nctemp1202 = nctemp1184 + nctemp1201;
int nctemp1211=i;
nctemp1211=j*El2d->thetaxyx->d[0]+nctemp1211;
float nctemp1214 = Model->Dt * El2d->thetaxyx->a[nctemp1211];
int nctemp1216=i;
nctemp1216=j*Model->Drhopx->d[0]+nctemp1216;
float nctemp1219 = nctemp1214 * Model->Drhopx->a[nctemp1216];
float nctemp1220 = nctemp1202 + nctemp1219;
int nctemp1222=i;
nctemp1222=j*El2d->vy->d[0]+nctemp1222;
float nctemp1225 = nctemp1220 + El2d->vy->a[nctemp1222];
El2d->vy->a[nctemp1148] =nctemp1225;
int nctemp1229=i;
nctemp1229=j*El2d->thetayyy->d[0]+nctemp1229;
int nctemp1239=i;
nctemp1239=j*Model->Eta1y->d[0]+nctemp1239;
int nctemp1243=i;
nctemp1243=j*El2d->thetayyy->d[0]+nctemp1243;
float nctemp1246 = Model->Eta1y->a[nctemp1239] * El2d->thetayyy->a[nctemp1243];
int nctemp1251=i;
nctemp1251=j*Model->Eta2y->d[0]+nctemp1251;
int nctemp1255=i;
nctemp1255=j*El2d->eyy->d[0]+nctemp1255;
float nctemp1258 = Model->Eta2y->a[nctemp1251] * El2d->eyy->a[nctemp1255];
float nctemp1259 = nctemp1246 + nctemp1258;
El2d->thetayyy->a[nctemp1229] =nctemp1259;
int nctemp1263=i;
nctemp1263=j*El2d->thetaxyx->d[0]+nctemp1263;
int nctemp1273=i;
nctemp1273=j*Model->Eta1x->d[0]+nctemp1273;
int nctemp1277=i;
nctemp1277=j*El2d->thetaxyx->d[0]+nctemp1277;
float nctemp1280 = Model->Eta1x->a[nctemp1273] * El2d->thetaxyx->a[nctemp1277];
int nctemp1285=i;
nctemp1285=j*Model->Eta2x->d[0]+nctemp1285;
int nctemp1289=i;
nctemp1289=j*El2d->eyx->d[0]+nctemp1289;
float nctemp1292 = Model->Eta2x->a[nctemp1285] * El2d->eyx->a[nctemp1289];
float nctemp1293 = nctemp1280 + nctemp1292;
El2d->thetaxyx->a[nctemp1263] =nctemp1293;
}
}
}
int El2dvy (struct el2d* El2d,struct model* Model)
{
  kernel_El2dvy<<< RunGetnb(),RunGetnt() >>>(El2d,Model);
GpuError();
return(1);
}
__global__ void kernel_El2dexy (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2);
__global__ void kernel_El2dexy (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2)
{
int nx;
int ny;
int i;
int j;
nx =Model->Nx;
ny =Model->Ny;
int nctemp1304=0;
int nctemp1306=nx;
int nctemp1309=0;
int nctemp1311=ny;
int nctemp1302=(nctemp1306-nctemp1304)*(nctemp1311-nctemp1309);
for(int nctempno=blockIdx.x*blockDim.x + threadIdx.x; nctempno<nctemp1302;nctempno+=blockDim.x*gridDim.x){
j=nctemp1309+nctempno/(nctemp1306-nctemp1304);
i=nctemp1304+nctempno%(nctemp1306-nctemp1304);
{
int nctemp1316=i;
nctemp1316=j*El2d->exy->d[0]+nctemp1316;
int nctemp1327=i;
nctemp1327=j*tmp1->d[0]+nctemp1327;
int nctemp1331=i;
nctemp1331=j*tmp2->d[0]+nctemp1331;
float nctemp1334 = tmp1->a[nctemp1327] + tmp2->a[nctemp1331];
float nctemp1335 = 0.5 * nctemp1334;
El2d->exy->a[nctemp1316] =nctemp1335;
}
}
}
int El2dexy (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2)
{
  kernel_El2dexy<<< RunGetnb(),RunGetnt() >>>(El2d,Model,tmp1,tmp2);
GpuError();
return(1);
}
__global__ void kernel_El2deyx (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2);
__global__ void kernel_El2deyx (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2)
{
int nx;
int ny;
int i;
int j;
nx =Model->Nx;
ny =Model->Ny;
int nctemp1346=0;
int nctemp1348=nx;
int nctemp1351=0;
int nctemp1353=ny;
int nctemp1344=(nctemp1348-nctemp1346)*(nctemp1353-nctemp1351);
for(int nctempno=blockIdx.x*blockDim.x + threadIdx.x; nctempno<nctemp1344;nctempno+=blockDim.x*gridDim.x){
j=nctemp1351+nctempno/(nctemp1348-nctemp1346);
i=nctemp1346+nctempno%(nctemp1348-nctemp1346);
{
int nctemp1358=i;
nctemp1358=j*El2d->eyx->d[0]+nctemp1358;
int nctemp1369=i;
nctemp1369=j*tmp1->d[0]+nctemp1369;
int nctemp1373=i;
nctemp1373=j*tmp2->d[0]+nctemp1373;
float nctemp1376 = tmp1->a[nctemp1369] + tmp2->a[nctemp1373];
float nctemp1377 = 0.5 * nctemp1376;
El2d->eyx->a[nctemp1358] =nctemp1377;
}
}
}
int El2deyx (struct el2d* El2d,struct model* Model,nctempfloat2 *tmp1,nctempfloat2 *tmp2)
{
  kernel_El2deyx<<< RunGetnb(),RunGetnt() >>>(El2d,Model,tmp1,tmp2);
GpuError();
return(1);
}
__global__ void kernel_El2dstress (struct el2d* El2d,struct model* Model);
__global__ void kernel_El2dstress (struct el2d* El2d,struct model* Model)
{
int nx;
int ny;
int i;
int j;
int l;
nx =Model->Nx;
ny =Model->Ny;
int nctemp1388=0;
int nctemp1390=nx;
int nctemp1393=0;
int nctemp1395=ny;
int nctemp1386=(nctemp1390-nctemp1388)*(nctemp1395-nctemp1393);
for(int nctempno=blockIdx.x*blockDim.x + threadIdx.x; nctempno<nctemp1386;nctempno+=blockDim.x*gridDim.x){
j=nctemp1393+nctempno/(nctemp1390-nctemp1388);
i=nctemp1388+nctempno%(nctemp1390-nctemp1388);
{
int nctemp1400=i;
nctemp1400=j*El2d->sigmaxx->d[0]+nctemp1400;
int nctemp1423=i;
nctemp1423=j*Model->Lambda->d[0]+nctemp1423;
float nctemp1426 = Model->Dt * Model->Lambda->a[nctemp1423];
int nctemp1431=i;
nctemp1431=j*El2d->exx->d[0]+nctemp1431;
int nctemp1435=i;
nctemp1435=j*El2d->eyy->d[0]+nctemp1435;
float nctemp1438 = El2d->exx->a[nctemp1431] + El2d->eyy->a[nctemp1435];
float nctemp1439 = nctemp1426 * nctemp1438;
float nctemp1451 = 2.0 * Model->Dt;
int nctemp1453=i;
nctemp1453=j*Model->Mu->d[0]+nctemp1453;
float nctemp1456 = nctemp1451 * Model->Mu->a[nctemp1453];
int nctemp1458=i;
nctemp1458=j*El2d->exx->d[0]+nctemp1458;
float nctemp1461 = nctemp1456 * El2d->exx->a[nctemp1458];
float nctemp1462 = nctemp1439 + nctemp1461;
int nctemp1474=i;
nctemp1474=j*El2d->gammaxx->d[0]+nctemp1474;
int nctemp1478=i;
nctemp1478=j*Model->Dlambdax->d[0]+nctemp1478;
float nctemp1481 = El2d->gammaxx->a[nctemp1474] * Model->Dlambdax->a[nctemp1478];
int nctemp1486=i;
nctemp1486=j*El2d->gammayy->d[0]+nctemp1486;
int nctemp1490=i;
nctemp1490=j*Model->Dlambday->d[0]+nctemp1490;
float nctemp1493 = El2d->gammayy->a[nctemp1486] * Model->Dlambday->a[nctemp1490];
float nctemp1494 = nctemp1481 + nctemp1493;
float nctemp1495 = Model->Dt * nctemp1494;
float nctemp1496 = nctemp1462 + nctemp1495;
float nctemp1508 = 2.0 * Model->Dt;
int nctemp1510=i;
nctemp1510=j*El2d->gammaxx->d[0]+nctemp1510;
float nctemp1513 = nctemp1508 * El2d->gammaxx->a[nctemp1510];
int nctemp1515=i;
nctemp1515=j*Model->Dmux->d[0]+nctemp1515;
float nctemp1518 = nctemp1513 * Model->Dmux->a[nctemp1515];
float nctemp1519 = nctemp1496 + nctemp1518;
int nctemp1521=i;
nctemp1521=j*El2d->sigmaxx->d[0]+nctemp1521;
float nctemp1524 = nctemp1519 + El2d->sigmaxx->a[nctemp1521];
El2d->sigmaxx->a[nctemp1400] =nctemp1524;
int nctemp1528=i;
nctemp1528=j*El2d->sigmayy->d[0]+nctemp1528;
int nctemp1551=i;
nctemp1551=j*Model->Lambda->d[0]+nctemp1551;
float nctemp1554 = Model->Dt * Model->Lambda->a[nctemp1551];
int nctemp1559=i;
nctemp1559=j*El2d->exx->d[0]+nctemp1559;
int nctemp1563=i;
nctemp1563=j*El2d->eyy->d[0]+nctemp1563;
float nctemp1566 = El2d->exx->a[nctemp1559] + El2d->eyy->a[nctemp1563];
float nctemp1567 = nctemp1554 * nctemp1566;
float nctemp1579 = 2.0 * Model->Dt;
int nctemp1581=i;
nctemp1581=j*Model->Mu->d[0]+nctemp1581;
float nctemp1584 = nctemp1579 * Model->Mu->a[nctemp1581];
int nctemp1586=i;
nctemp1586=j*El2d->eyy->d[0]+nctemp1586;
float nctemp1589 = nctemp1584 * El2d->eyy->a[nctemp1586];
float nctemp1590 = nctemp1567 + nctemp1589;
int nctemp1602=i;
nctemp1602=j*El2d->gammaxx->d[0]+nctemp1602;
int nctemp1606=i;
nctemp1606=j*Model->Dlambdax->d[0]+nctemp1606;
float nctemp1609 = El2d->gammaxx->a[nctemp1602] * Model->Dlambdax->a[nctemp1606];
int nctemp1614=i;
nctemp1614=j*El2d->gammayy->d[0]+nctemp1614;
int nctemp1618=i;
nctemp1618=j*Model->Dlambday->d[0]+nctemp1618;
float nctemp1621 = El2d->gammayy->a[nctemp1614] * Model->Dlambday->a[nctemp1618];
float nctemp1622 = nctemp1609 + nctemp1621;
float nctemp1623 = Model->Dt * nctemp1622;
float nctemp1624 = nctemp1590 + nctemp1623;
float nctemp1636 = 2.0 * Model->Dt;
int nctemp1638=i;
nctemp1638=j*El2d->gammayy->d[0]+nctemp1638;
float nctemp1641 = nctemp1636 * El2d->gammayy->a[nctemp1638];
int nctemp1643=i;
nctemp1643=j*Model->Dmuy->d[0]+nctemp1643;
float nctemp1646 = nctemp1641 * Model->Dmuy->a[nctemp1643];
float nctemp1647 = nctemp1624 + nctemp1646;
int nctemp1649=i;
nctemp1649=j*El2d->sigmayy->d[0]+nctemp1649;
float nctemp1652 = nctemp1647 + El2d->sigmayy->a[nctemp1649];
El2d->sigmayy->a[nctemp1528] =nctemp1652;
int nctemp1656=i;
nctemp1656=j*El2d->sigmaxy->d[0]+nctemp1656;
float nctemp1676 = 2.0 * Model->Dt;
int nctemp1678=i;
nctemp1678=j*Model->Muxy->d[0]+nctemp1678;
float nctemp1681 = nctemp1676 * Model->Muxy->a[nctemp1678];
int nctemp1683=i;
nctemp1683=j*El2d->exy->d[0]+nctemp1683;
float nctemp1686 = nctemp1681 * El2d->exy->a[nctemp1683];
float nctemp1698 = 2.0 * Model->Dt;
int nctemp1700=i;
nctemp1700=j*El2d->gammaxy->d[0]+nctemp1700;
float nctemp1703 = nctemp1698 * El2d->gammaxy->a[nctemp1700];
int nctemp1705=i;
nctemp1705=j*Model->Dmuxyy->d[0]+nctemp1705;
float nctemp1708 = nctemp1703 * Model->Dmuxyy->a[nctemp1705];
float nctemp1709 = nctemp1686 + nctemp1708;
int nctemp1711=i;
nctemp1711=j*El2d->sigmaxy->d[0]+nctemp1711;
float nctemp1714 = nctemp1709 + El2d->sigmaxy->a[nctemp1711];
El2d->sigmaxy->a[nctemp1656] =nctemp1714;
int nctemp1718=i;
nctemp1718=j*El2d->sigmayx->d[0]+nctemp1718;
float nctemp1738 = 2.0 * Model->Dt;
int nctemp1740=i;
nctemp1740=j*Model->Muxy->d[0]+nctemp1740;
float nctemp1743 = nctemp1738 * Model->Muxy->a[nctemp1740];
int nctemp1745=i;
nctemp1745=j*El2d->exy->d[0]+nctemp1745;
float nctemp1748 = nctemp1743 * El2d->exy->a[nctemp1745];
float nctemp1760 = 2.0 * Model->Dt;
int nctemp1762=i;
nctemp1762=j*El2d->gammayx->d[0]+nctemp1762;
float nctemp1765 = nctemp1760 * El2d->gammayx->a[nctemp1762];
int nctemp1767=i;
nctemp1767=j*Model->Dmuxyx->d[0]+nctemp1767;
float nctemp1770 = nctemp1765 * Model->Dmuxyx->a[nctemp1767];
float nctemp1771 = nctemp1748 + nctemp1770;
int nctemp1773=i;
nctemp1773=j*El2d->sigmayx->d[0]+nctemp1773;
float nctemp1776 = nctemp1771 + El2d->sigmayx->a[nctemp1773];
El2d->sigmayx->a[nctemp1718] =nctemp1776;
int nctemp1780=i;
nctemp1780=j*El2d->gammaxx->d[0]+nctemp1780;
int nctemp1790=i;
nctemp1790=j*Model->Alpha1x->d[0]+nctemp1790;
int nctemp1794=i;
nctemp1794=j*El2d->gammaxx->d[0]+nctemp1794;
float nctemp1797 = Model->Alpha1x->a[nctemp1790] * El2d->gammaxx->a[nctemp1794];
int nctemp1802=i;
nctemp1802=j*Model->Alpha2x->d[0]+nctemp1802;
int nctemp1806=i;
nctemp1806=j*El2d->exx->d[0]+nctemp1806;
float nctemp1809 = Model->Alpha2x->a[nctemp1802] * El2d->exx->a[nctemp1806];
float nctemp1810 = nctemp1797 + nctemp1809;
El2d->gammaxx->a[nctemp1780] =nctemp1810;
int nctemp1814=i;
nctemp1814=j*El2d->gammayy->d[0]+nctemp1814;
int nctemp1824=i;
nctemp1824=j*Model->Alpha1y->d[0]+nctemp1824;
int nctemp1828=i;
nctemp1828=j*El2d->gammayy->d[0]+nctemp1828;
float nctemp1831 = Model->Alpha1y->a[nctemp1824] * El2d->gammayy->a[nctemp1828];
int nctemp1836=i;
nctemp1836=j*Model->Alpha2y->d[0]+nctemp1836;
int nctemp1840=i;
nctemp1840=j*El2d->eyy->d[0]+nctemp1840;
float nctemp1843 = Model->Alpha2y->a[nctemp1836] * El2d->eyy->a[nctemp1840];
float nctemp1844 = nctemp1831 + nctemp1843;
El2d->gammayy->a[nctemp1814] =nctemp1844;
int nctemp1848=i;
nctemp1848=j*El2d->gammaxy->d[0]+nctemp1848;
int nctemp1858=i;
nctemp1858=j*Model->Beta1y->d[0]+nctemp1858;
int nctemp1862=i;
nctemp1862=j*El2d->gammaxy->d[0]+nctemp1862;
float nctemp1865 = Model->Beta1y->a[nctemp1858] * El2d->gammaxy->a[nctemp1862];
int nctemp1870=i;
nctemp1870=j*Model->Beta2y->d[0]+nctemp1870;
int nctemp1874=i;
nctemp1874=j*El2d->exy->d[0]+nctemp1874;
float nctemp1877 = Model->Beta2y->a[nctemp1870] * El2d->exy->a[nctemp1874];
float nctemp1878 = nctemp1865 + nctemp1877;
El2d->gammaxy->a[nctemp1848] =nctemp1878;
int nctemp1882=i;
nctemp1882=j*El2d->gammayx->d[0]+nctemp1882;
int nctemp1892=i;
nctemp1892=j*Model->Beta1x->d[0]+nctemp1892;
int nctemp1896=i;
nctemp1896=j*El2d->gammayx->d[0]+nctemp1896;
float nctemp1899 = Model->Beta1x->a[nctemp1892] * El2d->gammayx->a[nctemp1896];
int nctemp1904=i;
nctemp1904=j*Model->Beta2x->d[0]+nctemp1904;
int nctemp1908=i;
nctemp1908=j*El2d->eyx->d[0]+nctemp1908;
float nctemp1911 = Model->Beta2x->a[nctemp1904] * El2d->eyx->a[nctemp1908];
float nctemp1912 = nctemp1899 + nctemp1911;
El2d->gammayx->a[nctemp1882] =nctemp1912;
}
}
}
int El2dstress (struct el2d* El2d,struct model* Model)
{
  kernel_El2dstress<<< RunGetnb(),RunGetnt() >>>(El2d,Model);
GpuError();
return(1);
}
int El2dSnap (struct el2d* El2d,int it)
{
int n;
int Nx;
int Ny;
nctempchar1 *tmp;
int nctemp1913 = (El2d->sresamp <= 0);
if(nctemp1913)
{
return 1;
}
int nctemp1922=El2d->sigmaxx->d[0];Nx =nctemp1922;
int nctemp1930=El2d->sigmaxx->d[1];Ny =nctemp1930;
int nctemp1942 = Nx * Ny;
n =nctemp1942;
int nctemp1946= it;
int nctemp1948= El2d->sresamp;
int nctemp1950=LibeMod(nctemp1946,nctemp1948);
int nctemp1943 = (nctemp1950 ==0);
if(nctemp1943)
{
int nctemp1955=0;
int nctemp1952 = (El2d->snpflags->a[nctemp1955] ==1);
if(nctemp1952)
{
nctempchar1 nctemp1964;
nctempchar1 *nctemp1963;
nctemp1964=*(nctempchar1*)(El2d->sigmaxx);
int nctemp1971 = 4 * n;
nctemp1964.d[0]=nctemp1971;
nctemp1963=&nctemp1964;
tmp=nctemp1963;
int nctemp1973= El2d->fdsxx;
int nctemp1980 = 4 * n;
int nctemp1975= nctemp1980;
nctempchar1* nctemp1981= tmp;
int nctemp1984=LibeWrite(nctemp1973,nctemp1975,nctemp1981);
}
int nctemp1988=1;
int nctemp1985 = (El2d->snpflags->a[nctemp1988] ==1);
if(nctemp1985)
{
nctempchar1 nctemp1997;
nctempchar1 *nctemp1996;
nctemp1997=*(nctempchar1*)(El2d->sigmayy);
int nctemp2004 = 4 * n;
nctemp1997.d[0]=nctemp2004;
nctemp1996=&nctemp1997;
tmp=nctemp1996;
int nctemp2006= El2d->fdsyy;
int nctemp2013 = 4 * n;
int nctemp2008= nctemp2013;
nctempchar1* nctemp2014= tmp;
int nctemp2017=LibeWrite(nctemp2006,nctemp2008,nctemp2014);
}
int nctemp2021=2;
int nctemp2018 = (El2d->snpflags->a[nctemp2021] ==1);
if(nctemp2018)
{
nctempchar1 nctemp2030;
nctempchar1 *nctemp2029;
nctemp2030=*(nctempchar1*)(El2d->vx);
int nctemp2037 = 4 * n;
nctemp2030.d[0]=nctemp2037;
nctemp2029=&nctemp2030;
tmp=nctemp2029;
int nctemp2039= El2d->fdvx;
int nctemp2046 = 4 * n;
int nctemp2041= nctemp2046;
nctempchar1* nctemp2047= tmp;
int nctemp2050=LibeWrite(nctemp2039,nctemp2041,nctemp2047);
}
int nctemp2054=3;
int nctemp2051 = (El2d->snpflags->a[nctemp2054] ==1);
if(nctemp2051)
{
nctempchar1 nctemp2063;
nctempchar1 *nctemp2062;
nctemp2063=*(nctempchar1*)(El2d->vy);
int nctemp2070 = 4 * n;
nctemp2063.d[0]=nctemp2070;
nctemp2062=&nctemp2063;
tmp=nctemp2062;
int nctemp2072= El2d->fdvy;
int nctemp2079 = 4 * n;
int nctemp2074= nctemp2079;
nctempchar1* nctemp2080= tmp;
int nctemp2083=LibeWrite(nctemp2072,nctemp2074,nctemp2080);
}
}
return 1;
}
}
