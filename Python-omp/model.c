/*  Translated by epsc  version today */
#include <stddef.h>
typedef struct { float r; float i;} complex; 
typedef struct nctempfloat1 { int d[1]; float *a;} nctempfloat1; 
typedef struct nctempint1 { int d[1]; int *a;} nctempint1; 
typedef struct nctempchar1 { int d[1]; char *a;} nctempchar1; 
typedef struct nctempcomplex1 { int d[1]; complex *a;} nctempcomplex1; 
typedef struct nctempfloat2 { int d[2]; float *a;} nctempfloat2; 
typedef struct nctempint2 { int d[2]; int *a;} nctempint2; 
typedef struct nctempchar2 { int d[2]; char *a;} nctempchar2; 
typedef struct nctempcomplex2 { int d[2]; complex *a;} nctempcomplex2; 
typedef struct nctempfloat3 { int d[3]; float *a;} nctempfloat3; 
typedef struct nctempint3 { int d[3]; int *a;} nctempint3; 
typedef struct nctempchar3 { int d[3]; char *a;} nctempchar3; 
typedef struct nctempcomplex3 { int d[3]; complex *a;} nctempcomplex3; 
typedef struct nctempfloat4 { int d[4]; float *a;} nctempfloat4; 
typedef struct nctempint4 { int d[4]; int *a;} nctempint4; 
typedef struct nctempchar4 { int d[4]; char *a;} nctempchar4; 
typedef struct nctempcomplex4 { int d[4]; complex *a;} nctempcomplex4; 
#include <stdlib.h>
#include <string.h>
void *RunMalloc(int n); 
int RunFree(void *n); 
int LibeArrayex (int line,nctempchar1 *name,int ival,int index,int bound);
int LibeClearerr ();
int LibeGeterrno ();
nctempchar1* LibeGeterrstr ();
struct MainArg {nctempchar1 *arg;
};
typedef struct nctempMainArg1 {int d[1]; struct MainArg *a; } nctempMainArg1;
struct nctempMainArg2 {int d[2]; struct MainArg *a; } ;
struct nctempMainArg3 {int d[3]; struct MainArg *a; } ;
struct nctempMainArg4 {int d[4]; struct MainArg *a; } ;
int Main (struct nctempMainArg1 *MainArgs);
int LibeInit ();
int LibeDelete ();
int LibeExit ();
nctempchar1* LibeGetenv (nctempchar1 *name);
int LibeOpen (nctempchar1 *name,nctempchar1 *mode);
int LibeClose (int fp);
int LibeGetc (int fp);
int LibeUngetc (int fp);
int LibeGetw (int fp,nctempchar1 *text);
int LibePs (nctempchar1 *s);
int LibePi (int n);
int LibePf (float r);
int LibePutf (int fp,float r,nctempchar1 *form);
int LibePutc (int fp,int c);
int LibePuts (int fp,nctempchar1 *s);
int LibePuti (int fp,int ival);
int LibeRead (int fp,int n,nctempchar1 *array);
int LibeWrite (int fp,int n,nctempchar1 *array);
int LibeSeek (int fp,int pos,int flag);
int LibeFlush (int fp);
int LibeStrlen (nctempchar1 *s);
int LibeStrcmp (nctempchar1 *s,nctempchar1 *t);
int LibeStrev (nctempchar1 *s);
nctempchar1* LibeStrsave (nctempchar1 *s);
int LibeStrcpy (nctempchar1 *s,nctempchar1 *t);
int LibeStrcat (nctempchar1 *s,nctempchar1 *t);
nctempchar1* LibeStradd (nctempchar1 *t,nctempchar1 *s);
int LibeIsalpha (int c);
int LibeIsdigit (int c);
int LibeIsalnum (int c);
int LibeAtoi (nctempchar1 *s);
int LibeItoa (int n,nctempchar1 *s);
int LibeItoh (int n,nctempchar1 *s);
float LibeAtof (nctempchar1 *s);
int LibeFtoa (float f,nctempchar1 *fmt,nctempchar1 *s);
float LibeMach (int flag);
float LibeFabs (float x);
float LibeFscale2 (float x,int n);
float LibeGetfman2 (float x);
int LibeGetfexp2 (float x);
float LibeFscale (float x,int n);
int LibeGetfman (float f,int maxdig);
float LibeGetffman (float f);
int LibeGetmaxdig (float f);
int LibeGetfexp (float f);
float LibeClock ();
int LibeSetnb (int n);
int LibeSetnt (int n);
int LibeGetnb ();
int LibeGetnt ();
int LibeMod (int n,int r);
float LibeSqrt (float x);
float LibeLn (float x);
float LibeExp (float x);
float LibeSin (float x);
float LibeCos (float x);
float LibeTan (float x);
float LibeArcsin (float x);
float LibeArccos (float x);
float LibeArctan (float x);
float LibePow (float base,float exponent);
int LibeSystem (nctempchar1 *cmd);
struct model {int Nx;
int Ny;
int Nb;
float W0;
nctempfloat2 *Qp;
nctempfloat2 *Qr;
nctempfloat2 *Kappa;
nctempfloat2 *Dkappax;
nctempfloat2 *Dkappay;
nctempfloat2 *Drhox;
nctempfloat2 *Drhoy;
nctempfloat2 *Rho;
nctempfloat2 *Alpha1x;
nctempfloat2 *Alpha1y;
nctempfloat2 *Alpha2x;
nctempfloat2 *Alpha2y;
nctempfloat2 *Eta1x;
nctempfloat2 *Eta1y;
nctempfloat2 *Eta2x;
nctempfloat2 *Eta2y;
nctempfloat1 *dx;
nctempfloat1 *dy;
float Dx;
float Dt;
};
typedef struct nctempmodel1 {int d[1]; struct model *a; } nctempmodel1;
struct nctempmodel2 {int d[2]; struct model *a; } ;
struct nctempmodel3 {int d[3]; struct model *a; } ;
struct nctempmodel4 {int d[4]; struct model *a; } ;
struct model* ModelNew (nctempfloat2 *kappa,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb,int Rheol);
float ModelStability (struct model* Model);
struct model* Modelmaxwell (nctempfloat2 *vp,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb);
struct model* Modelsls (nctempfloat2 *vp,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb);
int Modeld (nctempfloat1 *d,float dx,int nb);
float Modeltaus (float Q,float w0);
float Modeltaue (float Q,float w0);
int Modelalphamax (struct model* Model);
int Modelthetamax (struct model* Model);
int Modelalphasls (struct model* Model);
int Modelthetasls (struct model* Model);
struct model* ModelNew (nctempfloat2 *vp,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb,int Rheol)
{
struct model* m;
int nctemp1 = (Rheol ==1);
if(nctemp1)
{
nctempfloat2* nctemp9= vp;
nctempfloat2* nctemp12= rho;
nctempfloat2* nctemp15= Qp;
nctempfloat2* nctemp18= Qr;
float nctemp21= Dx;
float nctemp23= Dt;
float nctemp25= W0;
int nctemp27= Nb;
struct model* nctemp29=Modelmaxwell(nctemp9,nctemp12,nctemp15,nctemp18,nctemp21,nctemp23,nctemp25,nctemp27);
m =nctemp29;
}
else{
int nctemp30 = (Rheol ==2);
if(nctemp30)
{
nctempfloat2* nctemp38= vp;
nctempfloat2* nctemp41= rho;
nctempfloat2* nctemp44= Qp;
nctempfloat2* nctemp47= Qr;
float nctemp50= Dx;
float nctemp52= Dt;
float nctemp54= W0;
int nctemp56= Nb;
struct model* nctemp58=Modelsls(nctemp38,nctemp41,nctemp44,nctemp47,nctemp50,nctemp52,nctemp54,nctemp56);
m =nctemp58;
}
else{
int nctemp60= 4;
struct nctempchar1 *nctemp64;
static struct nctempchar1 nctemp65 = {{ 18}, (char*)"Unknown Q-model\n\0"};
nctemp64=&nctemp65;
nctempchar1* nctemp62= nctemp64;
int nctemp66=LibePuts(nctemp60,nctemp62);
int nctemp68= 4;
int nctemp70=LibeFlush(nctemp68);
int nctemp72=LibeExit();
}
}
return m;
}
int Modelalphasls (struct model* Model)
{
int Nx;
int Ny;
int i;
int j;
float Qmin;
float Qmax;
float argx;
float argy;
float tau0;
float tauemax;
float tauemin;
float tausmax;
float tausmin;
float tauex;
float tausx;
float tauey;
float tausy;
Nx =Model->Nx;
Ny =Model->Ny;
j =0;
int nctemp86 = (j < Ny);
while(nctemp86){
{
i =0;
int nctemp94 = (i < Nx);
while(nctemp94){
{
float nctemp106 = 1.0 / Model->W0;
tau0 =nctemp106;
Qmin =1.1;
float nctemp122 = tau0 / Qmin;
float nctemp135 = Qmin * Qmin;
float nctemp137 = nctemp135 + 1.0;
float nctemp127= nctemp137;
float nctemp138=LibeSqrt(nctemp127);
float nctemp140 = nctemp138 + 1.0;
float nctemp141 = nctemp122 * nctemp140;
tauemin =nctemp141;
float nctemp150 = 1.0 / tauemin;
tauemin =nctemp150;
float nctemp162 = tau0 / Qmin;
float nctemp175 = Qmin * Qmin;
float nctemp177 = nctemp175 + 1.0;
float nctemp167= nctemp177;
float nctemp178=LibeSqrt(nctemp167);
float nctemp180 = nctemp178 - 1.0;
float nctemp181 = nctemp162 * nctemp180;
tausmin =nctemp181;
float nctemp190 = 1.0 / tausmin;
tausmin =nctemp190;
int nctemp195=Model->Nb;
nctemp195=j*Model->Qp->d[0]+nctemp195;
Qmax =Model->Qp->a[nctemp195];
float nctemp209 = tau0 / Qmin;
float nctemp222 = Qmax * Qmax;
float nctemp224 = nctemp222 + 1.0;
float nctemp214= nctemp224;
float nctemp225=LibeSqrt(nctemp214);
float nctemp227 = nctemp225 + 1.0;
float nctemp228 = nctemp209 * nctemp227;
tauemax =nctemp228;
float nctemp237 = 1.0 / tauemax;
tauemax =nctemp237;
float nctemp249 = tau0 / Qmin;
float nctemp262 = Qmax * Qmax;
float nctemp264 = nctemp262 + 1.0;
float nctemp254= nctemp264;
float nctemp265=LibeSqrt(nctemp254);
float nctemp267 = nctemp265 - 1.0;
float nctemp268 = nctemp249 * nctemp267;
tausmax =nctemp268;
float nctemp277 = 1.0 / tausmax;
tausmax =nctemp277;
float nctemp293 = tauemax - tauemin;
int nctemp295=i;
float nctemp297 = nctemp293 * Model->dx->a[nctemp295];
float nctemp298 = tauemin + nctemp297;
tauex =nctemp298;
float nctemp314 = tausmax - tausmin;
int nctemp316=i;
float nctemp318 = nctemp314 * Model->dx->a[nctemp316];
float nctemp319 = tausmin + nctemp318;
tausx =nctemp319;
int nctemp324=i;
nctemp324=Model->Nb*Model->Qp->d[0]+nctemp324;
Qmax =Model->Qp->a[nctemp324];
float nctemp338 = tau0 / Qmin;
float nctemp351 = Qmax * Qmax;
float nctemp353 = nctemp351 + 1.0;
float nctemp343= nctemp353;
float nctemp354=LibeSqrt(nctemp343);
float nctemp356 = nctemp354 + 1.0;
float nctemp357 = nctemp338 * nctemp356;
tauemax =nctemp357;
float nctemp366 = 1.0 / tauemax;
tauemax =nctemp366;
float nctemp378 = tau0 / Qmin;
float nctemp391 = Qmax * Qmax;
float nctemp393 = nctemp391 + 1.0;
float nctemp383= nctemp393;
float nctemp394=LibeSqrt(nctemp383);
float nctemp396 = nctemp394 - 1.0;
float nctemp397 = nctemp378 * nctemp396;
tausmax =nctemp397;
float nctemp406 = 1.0 / tausmax;
tausmax =nctemp406;
float nctemp422 = tauemax - tauemin;
int nctemp424=j;
float nctemp426 = nctemp422 * Model->dy->a[nctemp424];
float nctemp427 = tauemin + nctemp426;
tauey =nctemp427;
float nctemp443 = tausmax - tausmin;
int nctemp445=j;
float nctemp447 = nctemp443 * Model->dy->a[nctemp445];
float nctemp448 = tausmin + nctemp447;
tausy =nctemp448;
int nctemp453=i;
argx =Model->dx->a[nctemp453];
int nctemp459=j;
argy =Model->dy->a[nctemp459];
int nctemp464=i;
nctemp464=j*Model->Alpha1x->d[0]+nctemp464;
float nctemp472= -argx;
float nctemp471= nctemp472;
float nctemp473=LibeExp(nctemp471);
float nctemp478= -Model->Dt;
float nctemp480 = nctemp478 * tausx;
float nctemp475= nctemp480;
float nctemp481=LibeExp(nctemp475);
float nctemp482 = nctemp473 * nctemp481;
Model->Alpha1x->a[nctemp464] =nctemp482;
int nctemp486=i;
nctemp486=j*Model->Alpha1y->d[0]+nctemp486;
float nctemp494= -argy;
float nctemp493= nctemp494;
float nctemp495=LibeExp(nctemp493);
float nctemp500= -Model->Dt;
float nctemp502 = nctemp500 * tausy;
float nctemp497= nctemp502;
float nctemp503=LibeExp(nctemp497);
float nctemp504 = nctemp495 * nctemp503;
Model->Alpha1y->a[nctemp486] =nctemp504;
int nctemp508=i;
nctemp508=j*Model->Alpha2x->d[0]+nctemp508;
float nctemp516 = Model->Dt * tauex;
Model->Alpha2x->a[nctemp508] =nctemp516;
int nctemp520=i;
nctemp520=j*Model->Alpha2y->d[0]+nctemp520;
float nctemp528 = Model->Dt * tauey;
Model->Alpha2y->a[nctemp520] =nctemp528;
int nctemp532=i;
nctemp532=j*Model->Dkappax->d[0]+nctemp532;
int nctemp539=i;
nctemp539=j*Model->Kappa->d[0]+nctemp539;
float nctemp551 = tausx / tauex;
float nctemp552 = 1.0 - nctemp551;
float nctemp553 = Model->Kappa->a[nctemp539] * nctemp552;
Model->Dkappax->a[nctemp532] =nctemp553;
int nctemp557=i;
nctemp557=j*Model->Dkappay->d[0]+nctemp557;
int nctemp564=i;
nctemp564=j*Model->Kappa->d[0]+nctemp564;
float nctemp576 = tausy / tauey;
float nctemp577 = 1.0 - nctemp576;
float nctemp578 = Model->Kappa->a[nctemp564] * nctemp577;
Model->Dkappay->a[nctemp557] =nctemp578;
int nctemp582=i;
nctemp582=j*Model->Drhox->d[0]+nctemp582;
int nctemp589=i;
nctemp589=j*Model->Rho->d[0]+nctemp589;
float nctemp601 = tausx / tauex;
float nctemp602 = 1.0 - nctemp601;
float nctemp603 = Model->Rho->a[nctemp589] * nctemp602;
Model->Drhox->a[nctemp582] =nctemp603;
int nctemp607=i;
nctemp607=j*Model->Drhoy->d[0]+nctemp607;
int nctemp614=i;
nctemp614=j*Model->Rho->d[0]+nctemp614;
float nctemp626 = tausy / tauey;
float nctemp627 = 1.0 - nctemp626;
float nctemp628 = Model->Rho->a[nctemp614] * nctemp627;
Model->Drhoy->a[nctemp607] =nctemp628;
}
int nctemp637 = i + 1;
i =nctemp637;
int nctemp638 = (i < Nx);
nctemp94=nctemp638;
}
}
int nctemp650 = j + 1;
j =nctemp650;
int nctemp651 = (j < Ny);
nctemp86=nctemp651;
}
return 1;
}
int Modelthetasls (struct model* Model)
{
int Nx;
int Ny;
int i;
int j;
float Qmin;
float Qmax;
float argx;
float argy;
float tauemax;
float tauemin;
float tausmax;
float tausmin;
float tauex;
float tausx;
float tauey;
float tausy;
float tau0;
Nx =Model->Nx;
Ny =Model->Ny;
j =0;
int nctemp668 = (j < Ny);
while(nctemp668){
{
i =0;
int nctemp676 = (i < Nx);
while(nctemp676){
{
float nctemp688 = 1.0 / Model->W0;
tau0 =nctemp688;
Qmin =1.1;
float nctemp704 = tau0 / Qmin;
float nctemp717 = Qmin * Qmin;
float nctemp719 = nctemp717 + 1.0;
float nctemp709= nctemp719;
float nctemp720=LibeSqrt(nctemp709);
float nctemp722 = nctemp720 + 1.0;
float nctemp723 = nctemp704 * nctemp722;
tauemin =nctemp723;
float nctemp732 = 1.0 / tauemin;
tauemin =nctemp732;
float nctemp744 = tau0 / Qmin;
float nctemp757 = Qmin * Qmin;
float nctemp759 = nctemp757 + 1.0;
float nctemp749= nctemp759;
float nctemp760=LibeSqrt(nctemp749);
float nctemp762 = nctemp760 - 1.0;
float nctemp763 = nctemp744 * nctemp762;
tausmin =nctemp763;
float nctemp772 = 1.0 / tausmin;
tausmin =nctemp772;
int nctemp777=Model->Nb;
nctemp777=j*Model->Qp->d[0]+nctemp777;
Qmax =Model->Qp->a[nctemp777];
float nctemp791 = tau0 / Qmin;
float nctemp804 = Qmax * Qmax;
float nctemp806 = nctemp804 + 1.0;
float nctemp796= nctemp806;
float nctemp807=LibeSqrt(nctemp796);
float nctemp809 = nctemp807 + 1.0;
float nctemp810 = nctemp791 * nctemp809;
tauemax =nctemp810;
float nctemp819 = 1.0 / tauemax;
tauemax =nctemp819;
float nctemp831 = tau0 / Qmin;
float nctemp844 = Qmax * Qmax;
float nctemp846 = nctemp844 + 1.0;
float nctemp836= nctemp846;
float nctemp847=LibeSqrt(nctemp836);
float nctemp849 = nctemp847 - 1.0;
float nctemp850 = nctemp831 * nctemp849;
tausmax =nctemp850;
float nctemp859 = 1.0 / tausmax;
tausmax =nctemp859;
float nctemp875 = tauemax - tauemin;
int nctemp877=i;
float nctemp879 = nctemp875 * Model->dx->a[nctemp877];
float nctemp880 = tauemin + nctemp879;
tauex =nctemp880;
float nctemp896 = tausmax - tausmin;
int nctemp898=i;
float nctemp900 = nctemp896 * Model->dx->a[nctemp898];
float nctemp901 = tausmin + nctemp900;
tausx =nctemp901;
int nctemp906=i;
nctemp906=Model->Nb*Model->Qr->d[0]+nctemp906;
Qmax =Model->Qr->a[nctemp906];
float nctemp920 = tau0 / Qmin;
float nctemp933 = Qmax * Qmax;
float nctemp935 = nctemp933 + 1.0;
float nctemp925= nctemp935;
float nctemp936=LibeSqrt(nctemp925);
float nctemp938 = nctemp936 + 1.0;
float nctemp939 = nctemp920 * nctemp938;
tauemax =nctemp939;
float nctemp948 = 1.0 / tauemax;
tauemax =nctemp948;
float nctemp960 = tau0 / Qmin;
float nctemp973 = Qmax * Qmax;
float nctemp975 = nctemp973 + 1.0;
float nctemp965= nctemp975;
float nctemp976=LibeSqrt(nctemp965);
float nctemp978 = nctemp976 - 1.0;
float nctemp979 = nctemp960 * nctemp978;
tausmax =nctemp979;
float nctemp988 = 1.0 / tausmax;
tausmax =nctemp988;
float nctemp1004 = tauemax - tauemin;
int nctemp1006=j;
float nctemp1008 = nctemp1004 * Model->dy->a[nctemp1006];
float nctemp1009 = tauemin + nctemp1008;
tauey =nctemp1009;
float nctemp1025 = tausmax - tausmin;
int nctemp1027=j;
float nctemp1029 = nctemp1025 * Model->dy->a[nctemp1027];
float nctemp1030 = tausmin + nctemp1029;
tausy =nctemp1030;
int nctemp1035=i;
argx =Model->dx->a[nctemp1035];
int nctemp1041=j;
argy =Model->dy->a[nctemp1041];
int nctemp1046=i;
nctemp1046=j*Model->Eta1x->d[0]+nctemp1046;
float nctemp1054= -argx;
float nctemp1053= nctemp1054;
float nctemp1055=LibeExp(nctemp1053);
float nctemp1060= -Model->Dt;
float nctemp1062 = nctemp1060 * tausx;
float nctemp1057= nctemp1062;
float nctemp1063=LibeExp(nctemp1057);
float nctemp1064 = nctemp1055 * nctemp1063;
Model->Eta1x->a[nctemp1046] =nctemp1064;
int nctemp1068=i;
nctemp1068=j*Model->Eta1y->d[0]+nctemp1068;
float nctemp1076= -argy;
float nctemp1075= nctemp1076;
float nctemp1077=LibeExp(nctemp1075);
float nctemp1082= -Model->Dt;
float nctemp1084 = nctemp1082 * tausy;
float nctemp1079= nctemp1084;
float nctemp1085=LibeExp(nctemp1079);
float nctemp1086 = nctemp1077 * nctemp1085;
Model->Eta1y->a[nctemp1068] =nctemp1086;
int nctemp1090=i;
nctemp1090=j*Model->Eta2x->d[0]+nctemp1090;
float nctemp1098 = Model->Dt * tauex;
Model->Eta2x->a[nctemp1090] =nctemp1098;
int nctemp1102=i;
nctemp1102=j*Model->Eta2y->d[0]+nctemp1102;
float nctemp1110 = Model->Dt * tauey;
Model->Eta2y->a[nctemp1102] =nctemp1110;
}
int nctemp1119 = i + 1;
i =nctemp1119;
int nctemp1120 = (i < Nx);
nctemp676=nctemp1120;
}
}
int nctemp1132 = j + 1;
j =nctemp1132;
int nctemp1133 = (j < Ny);
nctemp668=nctemp1133;
}
return 1;
}
struct model* Modelmaxwell (nctempfloat2 *vp,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb)
{
struct model* Model;
int Nx;
int Ny;
int i;
int j;
struct model *nctemp1142=(struct model*)RunMalloc(sizeof(struct model));
Model =nctemp1142;
Model->Dx =Dx;
Model->Dt =Dt;
int nctemp1156=vp->d[0];Model->Nx =nctemp1156;
int nctemp1164=vp->d[1];Model->Ny =nctemp1164;
Model->Nb =Nb;
Model->W0 =W0;
Nx =Model->Nx;
Ny =Model->Ny;
int nctemp1190=Nx;
nctemp1190=nctemp1190*Ny;
nctempfloat2 *nctemp1189;
nctemp1189=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1189->d[0]=Nx;
nctemp1189->d[1]=Ny;
nctemp1189->a=(float *)RunMalloc(sizeof(float)*nctemp1190);
Model->Rho=nctemp1189;
int nctemp1201=Nx;
nctemp1201=nctemp1201*Ny;
nctempfloat2 *nctemp1200;
nctemp1200=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1200->d[0]=Nx;
nctemp1200->d[1]=Ny;
nctemp1200->a=(float *)RunMalloc(sizeof(float)*nctemp1201);
Model->Qp=nctemp1200;
int nctemp1212=Nx;
nctemp1212=nctemp1212*Ny;
nctempfloat2 *nctemp1211;
nctemp1211=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1211->d[0]=Nx;
nctemp1211->d[1]=Ny;
nctemp1211->a=(float *)RunMalloc(sizeof(float)*nctemp1212);
Model->Qr=nctemp1211;
int nctemp1223=Nx;
nctemp1223=nctemp1223*Ny;
nctempfloat2 *nctemp1222;
nctemp1222=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1222->d[0]=Nx;
nctemp1222->d[1]=Ny;
nctemp1222->a=(float *)RunMalloc(sizeof(float)*nctemp1223);
Model->Kappa=nctemp1222;
int nctemp1234=Nx;
nctemp1234=nctemp1234*Ny;
nctempfloat2 *nctemp1233;
nctemp1233=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1233->d[0]=Nx;
nctemp1233->d[1]=Ny;
nctemp1233->a=(float *)RunMalloc(sizeof(float)*nctemp1234);
Model->Dkappax=nctemp1233;
int nctemp1245=Nx;
nctemp1245=nctemp1245*Ny;
nctempfloat2 *nctemp1244;
nctemp1244=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1244->d[0]=Nx;
nctemp1244->d[1]=Ny;
nctemp1244->a=(float *)RunMalloc(sizeof(float)*nctemp1245);
Model->Dkappay=nctemp1244;
int nctemp1256=Nx;
nctemp1256=nctemp1256*Ny;
nctempfloat2 *nctemp1255;
nctemp1255=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1255->d[0]=Nx;
nctemp1255->d[1]=Ny;
nctemp1255->a=(float *)RunMalloc(sizeof(float)*nctemp1256);
Model->Drhox=nctemp1255;
int nctemp1267=Nx;
nctemp1267=nctemp1267*Ny;
nctempfloat2 *nctemp1266;
nctemp1266=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1266->d[0]=Nx;
nctemp1266->d[1]=Ny;
nctemp1266->a=(float *)RunMalloc(sizeof(float)*nctemp1267);
Model->Drhoy=nctemp1266;
int nctemp1278=Nx;
nctemp1278=nctemp1278*Ny;
nctempfloat2 *nctemp1277;
nctemp1277=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1277->d[0]=Nx;
nctemp1277->d[1]=Ny;
nctemp1277->a=(float *)RunMalloc(sizeof(float)*nctemp1278);
Model->Alpha1x=nctemp1277;
int nctemp1289=Nx;
nctemp1289=nctemp1289*Ny;
nctempfloat2 *nctemp1288;
nctemp1288=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1288->d[0]=Nx;
nctemp1288->d[1]=Ny;
nctemp1288->a=(float *)RunMalloc(sizeof(float)*nctemp1289);
Model->Alpha1y=nctemp1288;
int nctemp1300=Nx;
nctemp1300=nctemp1300*Ny;
nctempfloat2 *nctemp1299;
nctemp1299=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1299->d[0]=Nx;
nctemp1299->d[1]=Ny;
nctemp1299->a=(float *)RunMalloc(sizeof(float)*nctemp1300);
Model->Alpha2x=nctemp1299;
int nctemp1311=Nx;
nctemp1311=nctemp1311*Ny;
nctempfloat2 *nctemp1310;
nctemp1310=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1310->d[0]=Nx;
nctemp1310->d[1]=Ny;
nctemp1310->a=(float *)RunMalloc(sizeof(float)*nctemp1311);
Model->Alpha2y=nctemp1310;
int nctemp1322=Nx;
nctemp1322=nctemp1322*Ny;
nctempfloat2 *nctemp1321;
nctemp1321=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1321->d[0]=Nx;
nctemp1321->d[1]=Ny;
nctemp1321->a=(float *)RunMalloc(sizeof(float)*nctemp1322);
Model->Eta1x=nctemp1321;
int nctemp1333=Nx;
nctemp1333=nctemp1333*Ny;
nctempfloat2 *nctemp1332;
nctemp1332=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1332->d[0]=Nx;
nctemp1332->d[1]=Ny;
nctemp1332->a=(float *)RunMalloc(sizeof(float)*nctemp1333);
Model->Eta1y=nctemp1332;
int nctemp1344=Nx;
nctemp1344=nctemp1344*Ny;
nctempfloat2 *nctemp1343;
nctemp1343=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1343->d[0]=Nx;
nctemp1343->d[1]=Ny;
nctemp1343->a=(float *)RunMalloc(sizeof(float)*nctemp1344);
Model->Eta2x=nctemp1343;
int nctemp1355=Nx;
nctemp1355=nctemp1355*Ny;
nctempfloat2 *nctemp1354;
nctemp1354=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp1354->d[0]=Nx;
nctemp1354->d[1]=Ny;
nctemp1354->a=(float *)RunMalloc(sizeof(float)*nctemp1355);
Model->Eta2y=nctemp1354;
int nctemp1366=Nx;
nctempfloat1 *nctemp1365;
nctemp1365=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp1365->d[0]=Nx;
nctemp1365->a=(float *)RunMalloc(sizeof(float)*nctemp1366);
Model->dx=nctemp1365;
int nctemp1375=Ny;
nctempfloat1 *nctemp1374;
nctemp1374=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp1374->d[0]=Ny;
nctemp1374->a=(float *)RunMalloc(sizeof(float)*nctemp1375);
Model->dy=nctemp1374;
j =0;
int nctemp1382 = (j < Ny);
while(nctemp1382){
{
i =0;
int nctemp1390 = (i < Nx);
while(nctemp1390){
{
int nctemp1397=i;
nctemp1397=j*Model->Kappa->d[0]+nctemp1397;
int nctemp1407=i;
nctemp1407=j*rho->d[0]+nctemp1407;
int nctemp1411=i;
nctemp1411=j*vp->d[0]+nctemp1411;
float nctemp1414 = rho->a[nctemp1407] * vp->a[nctemp1411];
int nctemp1416=i;
nctemp1416=j*vp->d[0]+nctemp1416;
float nctemp1419 = nctemp1414 * vp->a[nctemp1416];
Model->Kappa->a[nctemp1397] =nctemp1419;
int nctemp1423=i;
nctemp1423=j*Model->Rho->d[0]+nctemp1423;
int nctemp1431=i;
nctemp1431=j*rho->d[0]+nctemp1431;
float nctemp1434 = 1.0 / rho->a[nctemp1431];
Model->Rho->a[nctemp1423] =nctemp1434;
int nctemp1438=i;
nctemp1438=j*Model->Qp->d[0]+nctemp1438;
int nctemp1442=i;
nctemp1442=j*Qp->d[0]+nctemp1442;
Model->Qp->a[nctemp1438] =Qp->a[nctemp1442];
int nctemp1448=i;
nctemp1448=j*Model->Qr->d[0]+nctemp1448;
int nctemp1452=i;
nctemp1452=j*Qr->d[0]+nctemp1452;
Model->Qr->a[nctemp1448] =Qr->a[nctemp1452];
}
int nctemp1463 = i + 1;
i =nctemp1463;
int nctemp1464 = (i < Nx);
nctemp1390=nctemp1464;
}
}
int nctemp1476 = j + 1;
j =nctemp1476;
int nctemp1477 = (j < Ny);
nctemp1382=nctemp1477;
}
nctempfloat1* nctemp1482= Model->dx;
float nctemp1485= Model->Dx;
int nctemp1487= Model->Nb;
int nctemp1489=Modeld(nctemp1482,nctemp1485,nctemp1487);
nctempfloat1* nctemp1491= Model->dy;
float nctemp1494= Model->Dx;
int nctemp1496= Model->Nb;
int nctemp1498=Modeld(nctemp1491,nctemp1494,nctemp1496);
struct model* nctemp1500= Model;
int nctemp1502=Modelalphamax(nctemp1500);
struct model* nctemp1504= Model;
int nctemp1506=Modelthetamax(nctemp1504);
j =0;
int nctemp1511 = (j < Ny);
while(nctemp1511){
{
i =0;
int nctemp1519 = (i < Nx);
while(nctemp1519){
{
int nctemp1526=i;
nctemp1526=j*Model->Dkappax->d[0]+nctemp1526;
int nctemp1530=i;
nctemp1530=j*Model->Kappa->d[0]+nctemp1530;
Model->Dkappax->a[nctemp1526] =Model->Kappa->a[nctemp1530];
int nctemp1536=i;
nctemp1536=j*Model->Dkappay->d[0]+nctemp1536;
int nctemp1540=i;
nctemp1540=j*Model->Kappa->d[0]+nctemp1540;
Model->Dkappay->a[nctemp1536] =Model->Kappa->a[nctemp1540];
int nctemp1546=i;
nctemp1546=j*Model->Drhox->d[0]+nctemp1546;
int nctemp1550=i;
nctemp1550=j*Model->Rho->d[0]+nctemp1550;
Model->Drhox->a[nctemp1546] =Model->Rho->a[nctemp1550];
int nctemp1556=i;
nctemp1556=j*Model->Drhoy->d[0]+nctemp1556;
int nctemp1560=i;
nctemp1560=j*Model->Rho->d[0]+nctemp1560;
Model->Drhoy->a[nctemp1556] =Model->Rho->a[nctemp1560];
}
int nctemp1571 = i + 1;
i =nctemp1571;
int nctemp1572 = (i < Nx);
nctemp1519=nctemp1572;
}
}
int nctemp1584 = j + 1;
j =nctemp1584;
int nctemp1585 = (j < Ny);
nctemp1511=nctemp1585;
}
return Model;
}
int Modelalphamax (struct model* Model)
{
int Nx;
int Ny;
int i;
int j;
float Qmin;
float Qmax;
float tau0min;
float tau0max;
float tau0x;
float tau0y;
float argx;
float argy;
Nx =Model->Nx;
Ny =Model->Ny;
j =0;
int nctemp1602 = (j < Ny);
while(nctemp1602){
{
i =0;
int nctemp1610 = (i < Nx);
while(nctemp1610){
{
Qmin =1.1;
float nctemp1626 = Qmin / Model->W0;
tau0min =nctemp1626;
float nctemp1635 = 1.0 / tau0min;
tau0min =nctemp1635;
int nctemp1640=Model->Nb;
nctemp1640=j*Model->Qp->d[0]+nctemp1640;
Qmax =Model->Qp->a[nctemp1640];
float nctemp1651 = Qmax / Model->W0;
tau0max =nctemp1651;
float nctemp1660 = 1.0 / tau0max;
tau0max =nctemp1660;
float nctemp1676 = tau0max - tau0min;
int nctemp1678=i;
float nctemp1680 = nctemp1676 * Model->dx->a[nctemp1678];
float nctemp1681 = tau0min + nctemp1680;
tau0x =nctemp1681;
int nctemp1686=i;
nctemp1686=Model->Nb*Model->Qp->d[0]+nctemp1686;
Qmax =Model->Qp->a[nctemp1686];
float nctemp1697 = Qmax / Model->W0;
tau0max =nctemp1697;
float nctemp1706 = 1.0 / tau0max;
tau0max =nctemp1706;
float nctemp1722 = tau0max - tau0min;
int nctemp1724=j;
float nctemp1726 = nctemp1722 * Model->dy->a[nctemp1724];
float nctemp1727 = tau0min + nctemp1726;
tau0y =nctemp1727;
int nctemp1732=i;
argx =Model->dx->a[nctemp1732];
int nctemp1738=j;
argy =Model->dy->a[nctemp1738];
int nctemp1743=i;
nctemp1743=j*Model->Alpha1x->d[0]+nctemp1743;
float nctemp1751= -argx;
float nctemp1750= nctemp1751;
float nctemp1752=LibeExp(nctemp1750);
float nctemp1757= -Model->Dt;
float nctemp1759 = nctemp1757 * tau0x;
float nctemp1754= nctemp1759;
float nctemp1760=LibeExp(nctemp1754);
float nctemp1761 = nctemp1752 * nctemp1760;
Model->Alpha1x->a[nctemp1743] =nctemp1761;
int nctemp1765=i;
nctemp1765=j*Model->Alpha1y->d[0]+nctemp1765;
float nctemp1773= -argy;
float nctemp1772= nctemp1773;
float nctemp1774=LibeExp(nctemp1772);
float nctemp1779= -Model->Dt;
float nctemp1781 = nctemp1779 * tau0y;
float nctemp1776= nctemp1781;
float nctemp1782=LibeExp(nctemp1776);
float nctemp1783 = nctemp1774 * nctemp1782;
Model->Alpha1y->a[nctemp1765] =nctemp1783;
int nctemp1787=i;
nctemp1787=j*Model->Alpha2x->d[0]+nctemp1787;
float nctemp1793= -Model->Dt;
float nctemp1795 = nctemp1793 * tau0x;
Model->Alpha2x->a[nctemp1787] =nctemp1795;
int nctemp1799=i;
nctemp1799=j*Model->Alpha2y->d[0]+nctemp1799;
float nctemp1805= -Model->Dt;
float nctemp1807 = nctemp1805 * tau0y;
Model->Alpha2y->a[nctemp1799] =nctemp1807;
}
int nctemp1816 = i + 1;
i =nctemp1816;
int nctemp1817 = (i < Nx);
nctemp1610=nctemp1817;
}
}
int nctemp1829 = j + 1;
j =nctemp1829;
int nctemp1830 = (j < Ny);
nctemp1602=nctemp1830;
}
return 1;
}
int Modelthetamax (struct model* Model)
{
int Nx;
int Ny;
int i;
int j;
float Qmin;
float Qmax;
float tau0min;
float tau0max;
float tau0x;
float tau0y;
float argx;
float argy;
Nx =Model->Nx;
Ny =Model->Ny;
j =0;
int nctemp1847 = (j < Ny);
while(nctemp1847){
{
i =0;
int nctemp1855 = (i < Nx);
while(nctemp1855){
{
Qmin =1.1;
float nctemp1871 = Qmin / Model->W0;
tau0min =nctemp1871;
float nctemp1880 = 1.0 / tau0min;
tau0min =nctemp1880;
int nctemp1885=Model->Nb;
nctemp1885=j*Model->Qr->d[0]+nctemp1885;
Qmax =Model->Qr->a[nctemp1885];
float nctemp1896 = Qmax / Model->W0;
tau0max =nctemp1896;
float nctemp1905 = 1.0 / tau0max;
tau0max =nctemp1905;
float nctemp1921 = tau0max - tau0min;
int nctemp1923=i;
float nctemp1925 = nctemp1921 * Model->dx->a[nctemp1923];
float nctemp1926 = tau0min + nctemp1925;
tau0x =nctemp1926;
int nctemp1931=i;
nctemp1931=Model->Nb*Model->Qr->d[0]+nctemp1931;
Qmax =Model->Qr->a[nctemp1931];
float nctemp1942 = Qmax / Model->W0;
tau0max =nctemp1942;
float nctemp1951 = 1.0 / tau0max;
tau0max =nctemp1951;
float nctemp1967 = tau0max - tau0min;
int nctemp1969=j;
float nctemp1971 = nctemp1967 * Model->dy->a[nctemp1969];
float nctemp1972 = tau0min + nctemp1971;
tau0y =nctemp1972;
int nctemp1977=i;
argx =Model->dx->a[nctemp1977];
int nctemp1983=j;
argy =Model->dy->a[nctemp1983];
int nctemp1988=i;
nctemp1988=j*Model->Eta1x->d[0]+nctemp1988;
float nctemp1996= -argx;
float nctemp1995= nctemp1996;
float nctemp1997=LibeExp(nctemp1995);
float nctemp2002= -Model->Dt;
float nctemp2004 = nctemp2002 * tau0x;
float nctemp1999= nctemp2004;
float nctemp2005=LibeExp(nctemp1999);
float nctemp2006 = nctemp1997 * nctemp2005;
Model->Eta1x->a[nctemp1988] =nctemp2006;
int nctemp2010=i;
nctemp2010=j*Model->Eta1y->d[0]+nctemp2010;
float nctemp2018= -argy;
float nctemp2017= nctemp2018;
float nctemp2019=LibeExp(nctemp2017);
float nctemp2024= -Model->Dt;
float nctemp2026 = nctemp2024 * tau0y;
float nctemp2021= nctemp2026;
float nctemp2027=LibeExp(nctemp2021);
float nctemp2028 = nctemp2019 * nctemp2027;
Model->Eta1y->a[nctemp2010] =nctemp2028;
int nctemp2032=i;
nctemp2032=j*Model->Eta2x->d[0]+nctemp2032;
float nctemp2038= -Model->Dt;
float nctemp2040 = nctemp2038 * tau0x;
Model->Eta2x->a[nctemp2032] =nctemp2040;
int nctemp2044=i;
nctemp2044=j*Model->Eta2y->d[0]+nctemp2044;
float nctemp2050= -Model->Dt;
float nctemp2052 = nctemp2050 * tau0y;
Model->Eta2y->a[nctemp2044] =nctemp2052;
}
int nctemp2061 = i + 1;
i =nctemp2061;
int nctemp2062 = (i < Nx);
nctemp1855=nctemp2062;
}
}
int nctemp2074 = j + 1;
j =nctemp2074;
int nctemp2075 = (j < Ny);
nctemp1847=nctemp2075;
}
return 1;
}
struct model* Modelsls (nctempfloat2 *vp,nctempfloat2 *rho,nctempfloat2 *Qp,nctempfloat2 *Qr,float Dx,float Dt,float W0,int Nb)
{
struct model* Model;
int Nx;
int Ny;
int i;
int j;
struct model *nctemp2084=(struct model*)RunMalloc(sizeof(struct model));
Model =nctemp2084;
Model->Dx =Dx;
Model->Dt =Dt;
int nctemp2098=vp->d[0];Model->Nx =nctemp2098;
int nctemp2106=vp->d[1];Model->Ny =nctemp2106;
Model->Nb =Nb;
Model->W0 =W0;
Nx =Model->Nx;
Ny =Model->Ny;
int nctemp2132=Nx;
nctemp2132=nctemp2132*Ny;
nctempfloat2 *nctemp2131;
nctemp2131=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2131->d[0]=Nx;
nctemp2131->d[1]=Ny;
nctemp2131->a=(float *)RunMalloc(sizeof(float)*nctemp2132);
Model->Rho=nctemp2131;
int nctemp2143=Nx;
nctemp2143=nctemp2143*Ny;
nctempfloat2 *nctemp2142;
nctemp2142=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2142->d[0]=Nx;
nctemp2142->d[1]=Ny;
nctemp2142->a=(float *)RunMalloc(sizeof(float)*nctemp2143);
Model->Qp=nctemp2142;
int nctemp2154=Nx;
nctemp2154=nctemp2154*Ny;
nctempfloat2 *nctemp2153;
nctemp2153=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2153->d[0]=Nx;
nctemp2153->d[1]=Ny;
nctemp2153->a=(float *)RunMalloc(sizeof(float)*nctemp2154);
Model->Qr=nctemp2153;
int nctemp2165=Nx;
nctemp2165=nctemp2165*Ny;
nctempfloat2 *nctemp2164;
nctemp2164=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2164->d[0]=Nx;
nctemp2164->d[1]=Ny;
nctemp2164->a=(float *)RunMalloc(sizeof(float)*nctemp2165);
Model->Kappa=nctemp2164;
int nctemp2176=Nx;
nctemp2176=nctemp2176*Ny;
nctempfloat2 *nctemp2175;
nctemp2175=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2175->d[0]=Nx;
nctemp2175->d[1]=Ny;
nctemp2175->a=(float *)RunMalloc(sizeof(float)*nctemp2176);
Model->Dkappax=nctemp2175;
int nctemp2187=Nx;
nctemp2187=nctemp2187*Ny;
nctempfloat2 *nctemp2186;
nctemp2186=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2186->d[0]=Nx;
nctemp2186->d[1]=Ny;
nctemp2186->a=(float *)RunMalloc(sizeof(float)*nctemp2187);
Model->Dkappay=nctemp2186;
int nctemp2198=Nx;
nctemp2198=nctemp2198*Ny;
nctempfloat2 *nctemp2197;
nctemp2197=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2197->d[0]=Nx;
nctemp2197->d[1]=Ny;
nctemp2197->a=(float *)RunMalloc(sizeof(float)*nctemp2198);
Model->Drhox=nctemp2197;
int nctemp2209=Nx;
nctemp2209=nctemp2209*Ny;
nctempfloat2 *nctemp2208;
nctemp2208=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2208->d[0]=Nx;
nctemp2208->d[1]=Ny;
nctemp2208->a=(float *)RunMalloc(sizeof(float)*nctemp2209);
Model->Drhoy=nctemp2208;
int nctemp2220=Nx;
nctemp2220=nctemp2220*Ny;
nctempfloat2 *nctemp2219;
nctemp2219=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2219->d[0]=Nx;
nctemp2219->d[1]=Ny;
nctemp2219->a=(float *)RunMalloc(sizeof(float)*nctemp2220);
Model->Alpha1x=nctemp2219;
int nctemp2231=Nx;
nctemp2231=nctemp2231*Ny;
nctempfloat2 *nctemp2230;
nctemp2230=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2230->d[0]=Nx;
nctemp2230->d[1]=Ny;
nctemp2230->a=(float *)RunMalloc(sizeof(float)*nctemp2231);
Model->Alpha1y=nctemp2230;
int nctemp2242=Nx;
nctemp2242=nctemp2242*Ny;
nctempfloat2 *nctemp2241;
nctemp2241=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2241->d[0]=Nx;
nctemp2241->d[1]=Ny;
nctemp2241->a=(float *)RunMalloc(sizeof(float)*nctemp2242);
Model->Alpha2x=nctemp2241;
int nctemp2253=Nx;
nctemp2253=nctemp2253*Ny;
nctempfloat2 *nctemp2252;
nctemp2252=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2252->d[0]=Nx;
nctemp2252->d[1]=Ny;
nctemp2252->a=(float *)RunMalloc(sizeof(float)*nctemp2253);
Model->Alpha2y=nctemp2252;
int nctemp2264=Nx;
nctemp2264=nctemp2264*Ny;
nctempfloat2 *nctemp2263;
nctemp2263=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2263->d[0]=Nx;
nctemp2263->d[1]=Ny;
nctemp2263->a=(float *)RunMalloc(sizeof(float)*nctemp2264);
Model->Eta1x=nctemp2263;
int nctemp2275=Nx;
nctemp2275=nctemp2275*Ny;
nctempfloat2 *nctemp2274;
nctemp2274=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2274->d[0]=Nx;
nctemp2274->d[1]=Ny;
nctemp2274->a=(float *)RunMalloc(sizeof(float)*nctemp2275);
Model->Eta1y=nctemp2274;
int nctemp2286=Nx;
nctemp2286=nctemp2286*Ny;
nctempfloat2 *nctemp2285;
nctemp2285=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2285->d[0]=Nx;
nctemp2285->d[1]=Ny;
nctemp2285->a=(float *)RunMalloc(sizeof(float)*nctemp2286);
Model->Eta2x=nctemp2285;
int nctemp2297=Nx;
nctemp2297=nctemp2297*Ny;
nctempfloat2 *nctemp2296;
nctemp2296=(nctempfloat2*)RunMalloc(sizeof(nctempfloat2));
nctemp2296->d[0]=Nx;
nctemp2296->d[1]=Ny;
nctemp2296->a=(float *)RunMalloc(sizeof(float)*nctemp2297);
Model->Eta2y=nctemp2296;
int nctemp2308=Nx;
nctempfloat1 *nctemp2307;
nctemp2307=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp2307->d[0]=Nx;
nctemp2307->a=(float *)RunMalloc(sizeof(float)*nctemp2308);
Model->dx=nctemp2307;
int nctemp2317=Ny;
nctempfloat1 *nctemp2316;
nctemp2316=(nctempfloat1*)RunMalloc(sizeof(nctempfloat1));
nctemp2316->d[0]=Ny;
nctemp2316->a=(float *)RunMalloc(sizeof(float)*nctemp2317);
Model->dy=nctemp2316;
j =0;
int nctemp2324 = (j < Ny);
while(nctemp2324){
{
i =0;
int nctemp2332 = (i < Nx);
while(nctemp2332){
{
int nctemp2339=i;
nctemp2339=j*Model->Kappa->d[0]+nctemp2339;
int nctemp2349=i;
nctemp2349=j*rho->d[0]+nctemp2349;
int nctemp2353=i;
nctemp2353=j*vp->d[0]+nctemp2353;
float nctemp2356 = rho->a[nctemp2349] * vp->a[nctemp2353];
int nctemp2358=i;
nctemp2358=j*vp->d[0]+nctemp2358;
float nctemp2361 = nctemp2356 * vp->a[nctemp2358];
Model->Kappa->a[nctemp2339] =nctemp2361;
int nctemp2365=i;
nctemp2365=j*Model->Rho->d[0]+nctemp2365;
int nctemp2373=i;
nctemp2373=j*rho->d[0]+nctemp2373;
float nctemp2376 = 1.0 / rho->a[nctemp2373];
Model->Rho->a[nctemp2365] =nctemp2376;
int nctemp2380=i;
nctemp2380=j*Model->Qp->d[0]+nctemp2380;
int nctemp2384=i;
nctemp2384=j*Qp->d[0]+nctemp2384;
Model->Qp->a[nctemp2380] =Qp->a[nctemp2384];
int nctemp2390=i;
nctemp2390=j*Model->Qr->d[0]+nctemp2390;
int nctemp2394=i;
nctemp2394=j*Qr->d[0]+nctemp2394;
Model->Qr->a[nctemp2390] =Qr->a[nctemp2394];
}
int nctemp2405 = i + 1;
i =nctemp2405;
int nctemp2406 = (i < Nx);
nctemp2332=nctemp2406;
}
}
int nctemp2418 = j + 1;
j =nctemp2418;
int nctemp2419 = (j < Ny);
nctemp2324=nctemp2419;
}
nctempfloat1* nctemp2424= Model->dx;
float nctemp2427= Model->Dx;
int nctemp2429= Model->Nb;
int nctemp2431=Modeld(nctemp2424,nctemp2427,nctemp2429);
nctempfloat1* nctemp2433= Model->dy;
float nctemp2436= Model->Dx;
int nctemp2438= Model->Nb;
int nctemp2440=Modeld(nctemp2433,nctemp2436,nctemp2438);
struct model* nctemp2442= Model;
int nctemp2444=Modelalphasls(nctemp2442);
struct model* nctemp2446= Model;
int nctemp2448=Modelthetasls(nctemp2446);
return Model;
}
float ModelStability (struct model* Model)
{
int nx;
int ny;
int i;
int j;
float vp;
float stab;
nx =Model->Nx;
ny =Model->Ny;
j =0;
int nctemp2462 = (j < ny);
while(nctemp2462){
{
i =0;
int nctemp2470 = (i < nx);
while(nctemp2470){
{
int nctemp2482=i;
nctemp2482=j*Model->Kappa->d[0]+nctemp2482;
int nctemp2486=i;
nctemp2486=j*Model->Rho->d[0]+nctemp2486;
float nctemp2489 = Model->Kappa->a[nctemp2482] * Model->Rho->a[nctemp2486];
float nctemp2478= nctemp2489;
float nctemp2490=LibeSqrt(nctemp2478);
vp =nctemp2490;
float nctemp2502 = vp * Model->Dt;
float nctemp2504 = nctemp2502 / Model->Dx;
stab =nctemp2504;
float nctemp2513= 2.0;
float nctemp2515=LibeSqrt(nctemp2513);
float nctemp2516 = 1.0 / nctemp2515;
int nctemp2505 = (stab > nctemp2516);
if(nctemp2505)
{
int nctemp2518= 4;
struct nctempchar1 *nctemp2522;
static struct nctempchar1 nctemp2523 = {{ 28}, (char*)"Stability index too large! \0"};
nctemp2522=&nctemp2523;
nctempchar1* nctemp2520= nctemp2522;
int nctemp2524=LibePuts(nctemp2518,nctemp2520);
int nctemp2526= 4;
float nctemp2528= stab;
struct nctempchar1 *nctemp2532;
static struct nctempchar1 nctemp2533 = {{ 2}, (char*)"g\0"};
nctemp2532=&nctemp2533;
nctempchar1* nctemp2530= nctemp2532;
int nctemp2534=LibePutf(nctemp2526,nctemp2528,nctemp2530);
int nctemp2536= 4;
struct nctempchar1 *nctemp2540;
static struct nctempchar1 nctemp2541 = {{ 3}, (char*)"\n\0"};
nctemp2540=&nctemp2541;
nctempchar1* nctemp2538= nctemp2540;
int nctemp2542=LibePuts(nctemp2536,nctemp2538);
int nctemp2544= 4;
struct nctempchar1 *nctemp2548;
static struct nctempchar1 nctemp2549 = {{ 7}, (char*)"vp: \n\0"};
nctemp2548=&nctemp2549;
nctempchar1* nctemp2546= nctemp2548;
int nctemp2550=LibePuts(nctemp2544,nctemp2546);
int nctemp2552= 4;
float nctemp2554= vp;
struct nctempchar1 *nctemp2558;
static struct nctempchar1 nctemp2559 = {{ 2}, (char*)"g\0"};
nctemp2558=&nctemp2559;
nctempchar1* nctemp2556= nctemp2558;
int nctemp2560=LibePutf(nctemp2552,nctemp2554,nctemp2556);
int nctemp2562= 4;
struct nctempchar1 *nctemp2566;
static struct nctempchar1 nctemp2567 = {{ 3}, (char*)"\n\0"};
nctemp2566=&nctemp2567;
nctempchar1* nctemp2564= nctemp2566;
int nctemp2568=LibePuts(nctemp2562,nctemp2564);
int nctemp2570= 4;
struct nctempchar1 *nctemp2574;
static struct nctempchar1 nctemp2575 = {{ 7}, (char*)"dt: \n\0"};
nctemp2574=&nctemp2575;
nctempchar1* nctemp2572= nctemp2574;
int nctemp2576=LibePuts(nctemp2570,nctemp2572);
int nctemp2578= 4;
float nctemp2580= Model->Dt;
struct nctempchar1 *nctemp2584;
static struct nctempchar1 nctemp2585 = {{ 2}, (char*)"g\0"};
nctemp2584=&nctemp2585;
nctempchar1* nctemp2582= nctemp2584;
int nctemp2586=LibePutf(nctemp2578,nctemp2580,nctemp2582);
int nctemp2588= 4;
struct nctempchar1 *nctemp2592;
static struct nctempchar1 nctemp2593 = {{ 3}, (char*)"\n\0"};
nctemp2592=&nctemp2593;
nctempchar1* nctemp2590= nctemp2592;
int nctemp2594=LibePuts(nctemp2588,nctemp2590);
int nctemp2596= 4;
struct nctempchar1 *nctemp2600;
static struct nctempchar1 nctemp2601 = {{ 7}, (char*)"dx: \n\0"};
nctemp2600=&nctemp2601;
nctempchar1* nctemp2598= nctemp2600;
int nctemp2602=LibePuts(nctemp2596,nctemp2598);
int nctemp2604= 4;
float nctemp2606= Model->Dx;
struct nctempchar1 *nctemp2610;
static struct nctempchar1 nctemp2611 = {{ 2}, (char*)"g\0"};
nctemp2610=&nctemp2611;
nctempchar1* nctemp2608= nctemp2610;
int nctemp2612=LibePutf(nctemp2604,nctemp2606,nctemp2608);
int nctemp2614= 4;
struct nctempchar1 *nctemp2618;
static struct nctempchar1 nctemp2619 = {{ 3}, (char*)"\n\0"};
nctemp2618=&nctemp2619;
nctempchar1* nctemp2616= nctemp2618;
int nctemp2620=LibePuts(nctemp2614,nctemp2616);
int nctemp2622= 4;
int nctemp2624=LibeFlush(nctemp2622);
}
}
int nctemp2633 = i + 1;
i =nctemp2633;
int nctemp2634 = (i < nx);
nctemp2470=nctemp2634;
}
}
int nctemp2646 = j + 1;
j =nctemp2646;
int nctemp2647 = (j < ny);
nctemp2462=nctemp2647;
}
return stab;
}
int Modeld (nctempfloat1 *d,float dx,int nb)
{
int i;
int n;
int nctemp2656=d->d[0];n =nctemp2656;
i =0;
int nctemp2664 = (i < n);
while(nctemp2664){
{
int nctemp2671=i;
d->a[nctemp2671] =1.0;
}
int nctemp2682 = i + 1;
i =nctemp2682;
int nctemp2683 = (i < n);
nctemp2664=nctemp2683;
}
i =0;
int nctemp2691 = (i < nb);
while(nctemp2691){
{
int nctemp2698=i;
int nctemp2704=i;
float nctemp2719=(float)(i);
float nctemp2723 = nctemp2719 * dx;
float nctemp2728=(float)(nb);
float nctemp2732 = nctemp2728 * dx;
float nctemp2733 = nctemp2723 / nctemp2732;
float nctemp2738=(float)(i);
float nctemp2742 = nctemp2738 * dx;
float nctemp2743 = nctemp2733 * nctemp2742;
float nctemp2748=(float)(nb);
float nctemp2752 = nctemp2748 * dx;
float nctemp2753 = nctemp2743 / nctemp2752;
float nctemp2754 = d->a[nctemp2704] * nctemp2753;
d->a[nctemp2698] =nctemp2754;
}
int nctemp2763 = i + 1;
i =nctemp2763;
int nctemp2764 = (i < nb);
nctemp2691=nctemp2764;
}
int nctemp2779 = n - 1;
int nctemp2781 = nctemp2779 - nb;
i =nctemp2781;
int nctemp2782 = (i < n);
while(nctemp2782){
{
int nctemp2789=i;
int nctemp2795=i;
int nctemp2819 = n - 1;
int nctemp2821 = nctemp2819 - i;
float nctemp2810=(float)(nctemp2821);
float nctemp2823 = nctemp2810 * dx;
float nctemp2828=(float)(nb);
float nctemp2832 = nctemp2828 * dx;
float nctemp2833 = nctemp2823 / nctemp2832;
int nctemp2847 = n - 1;
int nctemp2849 = nctemp2847 - i;
float nctemp2838=(float)(nctemp2849);
float nctemp2851 = nctemp2838 * dx;
float nctemp2852 = nctemp2833 * nctemp2851;
float nctemp2857=(float)(nb);
float nctemp2861 = nctemp2857 * dx;
float nctemp2862 = nctemp2852 / nctemp2861;
float nctemp2863 = d->a[nctemp2795] * nctemp2862;
d->a[nctemp2789] =nctemp2863;
}
int nctemp2872 = i + 1;
i =nctemp2872;
int nctemp2873 = (i < n);
nctemp2782=nctemp2873;
}
return 1;
}
